[{"title":"æ¨¡æ‹Ÿå®žçŽ°newè¿ç®—ç¬¦åŠŸèƒ½","url":"/js-new/","content":"\nnew è¿ç®—ç¬¦åˆ›å»ºä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ç±»åž‹çš„å®žä¾‹æˆ–å…·æœ‰æž„é€ å‡½æ•°çš„å†…ç½®å¯¹è±¡ç±»åž‹ä¹‹ä¸€\n\nç¤ºä¾‹ï¼š\n```javascript\nfunction Wechat() {\n  this.name = 'fedaily'\n}\nWechat.prototype.getName = function() {\n  return this.name\n}\n\nconst wechat = new Wechat()\n// wechat.name === fedaily\n// wechat.getName() === fedaily\n```\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå®žä¾‹å¯ä»¥è®¿é—®åˆ°æž„é€ å‡½æ•°çš„å±žæ€§ä»¥åŠåŽŸåž‹å¯¹è±¡ä¸Šçš„å±žæ€§ã€‚\n\næ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿä¸€ä¸‹ï¼š\n```javascript\nfunction newFactory() {\n  var obj = new Object(),\n  Constructor = [].shift.call(arguments);\n  obj.__proto__ = Constructor.prototype;\n  // å¤„ç†æž„é€ å‡½æ•°æœ‰è¿”å›žå€¼çš„æƒ…å†µ\n  // è¿”å›žå€¼å¦‚æžœæ˜¯ä¸€ä¸ªobjectåˆ™ç›´æŽ¥è¿”å›žï¼Œå¦åˆ™è¿”å›žobj\n  var ret = Constructor.apply(obj, arguments);\n  return typeof ret === 'object' ? ret : obj;\n};\n```\n","tags":["JavaScript"]},{"title":"ç¬¬21æœŸ åœ¨TSä¸­å¦‚ä½•å‡å°‘é‡å¤ä»£ç  & ä¼˜ç§€ç½‘ç«™å¿…é¡»å…³æ³¨çš„å¥åº·æŒ‡æ ‡ & äº†ä¸èµ·çš„ Deno å…¥é—¨æ•™ç¨‹","url":"/hotlink21/","content":"\n[Vue çš„è®¡ç®—å±žæ€§å¦‚ä½•å®žçŽ°ç¼“å­˜ï¼Ÿï¼ˆåŽŸç†æ·±å…¥æ­ç§˜ï¼‰](https://mp.weixin.qq.com/s/J1zznDfwTAHvAbTNgftJRA)\n\nå¾ˆå¤šäººæèµ· Vue ä¸­çš„ computedï¼Œç¬¬ä¸€ååº”å°±æ˜¯è®¡ç®—å±žæ€§ä¼šç¼“å­˜ï¼Œé‚£ä¹ˆå®ƒåˆ°åº•æ˜¯æ€Žä¹ˆç¼“å­˜çš„å‘¢ï¼Ÿç¼“å­˜çš„åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œä»€ä¹ˆæ—¶å€™ç¼“å­˜ä¼šå¤±æ•ˆï¼Œç›¸ä¿¡è¿˜æ˜¯æœ‰å¾ˆå¤šäººå¯¹æ­¤å¾ˆæ¨¡ç³Šã€‚\næœ¬æ–‡ä»¥ Vue 2.6.11 ç‰ˆæœ¬ä¸ºåŸºç¡€ï¼Œå°±æ·±å…¥åŽŸç†ï¼Œå¸¦ä½ æ¥çœ‹çœ‹æ‰€è°“çš„ç¼“å­˜åˆ°åº•æ˜¯ä»€ä¹ˆæ ·çš„ã€‚\n\n[ä¼˜ç§€ç½‘ç«™å¿…é¡»å…³æ³¨çš„å¥åº·æŒ‡æ ‡ | Web Vitals é—ªäº®ç™»åœº](https://mp.weixin.qq.com/s/BSlOnrmDLWhzpCWAuTOulw)\n\nä¼˜åŒ–ç”¨æˆ·ä½“éªŒè´¨é‡æ˜¯æ‰€æœ‰ç½‘ç«™å–å¾—é•¿æœŸæˆåŠŸçš„å…³é”®ã€‚é€šè¿‡ä¸Žæ•°ç™¾ä¸‡ç½‘ç»œå¼€å‘è€…å’Œç½‘ç«™æ‰€æœ‰è€…çš„æŒç»­äº¤æµå’Œåä½œï¼Œæˆ‘ä»¬åœ¨ Google å¼€å‘äº†è®¸å¤šå®žç”¨æŒ‡æ ‡å’Œå·¥å…·ï¼Œä»¥å¸®åŠ©ä¼ä¸šæ‰€æœ‰è€…ã€å¸‚åœºè¥é”€äººå‘˜å’Œå¼€å‘è€…å‘æŽ˜æ”¹å–„ç”¨æˆ·ä½“éªŒçš„æœºä¼šã€‚ç„¶è€Œï¼Œä¸°å¯Œå¤šæ ·çš„æŒ‡æ ‡å’Œå·¥å…·ä¹Ÿç»™è®¸å¤šäººå¸¦æ¥äº†å„ç§ä¼˜å…ˆçº§ã€æ˜Žæ™°åº¦å’Œä¸€è‡´æ€§æ–¹é¢çš„æŒ‘æˆ˜ã€‚\n\nä»Šå¤©ï¼Œæˆ‘ä»¬ä¸ºå„ä½ä»‹ç»ä¸€é¡¹åä¸º Web Vitals çš„æ–°è®¡åˆ’ï¼Œæ­¤è®¡åˆ’çš„å‘èµ·æ–¹ä¸º Googleï¼Œæ—¨åœ¨æä¾›å„ç§è´¨é‡ä¿¡å·çš„ç»Ÿä¸€æŒ‡å—ï¼Œæˆ‘ä»¬ç›¸ä¿¡è¿™äº›è´¨é‡ä¿¡å·å¯¹æä¾›å‡ºè‰²çš„ç½‘ç»œç”¨æˆ·ä½“éªŒè‡³å…³é‡è¦ã€‚\n\n[åœ¨TSä¸­å¦‚ä½•å‡å°‘é‡å¤ä»£ç ](https://mp.weixin.qq.com/s/I7ciHCgFjLFv_rHQn_dY_A)\n\nç›¸ä¿¡æœ‰äº›è¯»è€…å·²ç»å¬è¯´è¿‡ DRY åŽŸåˆ™ï¼ŒDRY çš„å…¨ç§°æ˜¯ â€”â€” Don't Repeat Yourself ï¼Œæ˜¯æŒ‡ç¼–ç¨‹è¿‡ç¨‹ä¸­ä¸å†™é‡å¤ä»£ç ï¼Œå°†èƒ½å¤Ÿå…¬å…±çš„éƒ¨åˆ†æŠ½è±¡å‡ºæ¥ï¼Œå°è£…æˆå·¥å…·ç±»æˆ–è€…ç”¨æŠ½è±¡ç±»æ¥æŠ½è±¡å…¬å…±çš„ä¸œè¥¿ï¼Œä»Žè€Œé™ä½Žä»£ç çš„è€¦åˆæ€§ï¼Œè¿™æ ·ä¸ä»…æé«˜ä»£ç çš„çµæ´»æ€§ã€å¥å£®æ€§ä»¥åŠå¯è¯»æ€§ï¼Œä¹Ÿæ–¹ä¾¿åŽæœŸçš„ç»´æŠ¤ã€‚\n\næŽ¥ä¸‹æ¥ï¼Œæœ¬æ–‡å°†ä»‹ç»åœ¨ TypeScript é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¦‚ä½•å€Ÿé‰´ DRY åŽŸåˆ™å°½é‡å‡å°‘é‡å¤ä»£ç ã€‚\n\n[äº†ä¸èµ·çš„ Deno å…¥é—¨æ•™ç¨‹](https://mp.weixin.qq.com/s/9R--wREYRW2M7GA6zn9Hdg)\n\nDeno æ˜¯ä¸€ä¸ª JavaScript/TypeScript çš„è¿è¡Œæ—¶ï¼Œé»˜è®¤ä½¿ç”¨å®‰å…¨çŽ¯å¢ƒæ‰§è¡Œä»£ç ï¼Œæœ‰ç€å“è¶Šçš„å¼€å‘ä½“éªŒã€‚\n\n[Node.js ä¸­çš„ stream æ¨¡å—è¯¦è§£](https://mp.weixin.qq.com/s/N6U-Lj7ts2aLiv4KC22DAw)\n\næµçš„è‹±æ–‡streamï¼Œæµï¼ˆStreamï¼‰æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ•°æ®æŽ¥å£ï¼ŒNode.jsä¸­å¾ˆå¤šå¯¹è±¡éƒ½å®žçŽ°äº†æµï¼Œæµæ˜¯EventEmitterå¯¹è±¡çš„ä¸€ä¸ªå®žä¾‹ï¼Œæ€»ä¹‹å®ƒæ˜¯ä¼šå†’æ•°æ®ï¼ˆä»¥ Buffer ä¸ºå•ä½ï¼‰ï¼Œæˆ–è€…èƒ½å¤Ÿå¸æ”¶æ•°æ®çš„ä¸œè¥¿ï¼Œå®ƒçš„æœ¬è´¨å°±æ˜¯è®©æ•°æ®æµåŠ¨èµ·æ¥ã€‚\n\n[ç†è§£ JavaScript å†…å­˜æ¨¡åž‹ï¼Œå°±é è¿™å‡ å¼ å›¾äº†ï¼](https://mp.weixin.qq.com/s/bLnjDg5lbH7CVhvXOz2Gkw)\n\nä½œä¸ºç¨‹åºå‘˜ï¼Œå£°æ˜Žå˜é‡ã€åˆå§‹åŒ–å˜é‡ã€ç»™å˜é‡é‡æ–°èµ‹å€¼ï¼Œè¿™äº›æ˜¯æˆ‘ä»¬çš„æ—¥å¸¸å·¥ä½œã€‚\n\nä½†æ˜¯ï¼Œè¿™ä¹ˆåšçš„æ—¶å€™å®žé™…ä¸Šå‘ç”Ÿäº†ä»€ä¹ˆï¼ŸJavaScript æ˜¯å¦‚ä½•åœ¨å†…éƒ¨å¤„ç†è¿™äº›åŸºæœ¬åŠŸèƒ½çš„ï¼Ÿæ›´é‡è¦çš„æ˜¯ï¼Œä½œä¸ºç¨‹åºå‘˜ï¼Œç†è§£ JavaScript çš„åº•å±‚ç»†èŠ‚å¯¹æˆ‘ä»¬æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ\n\n### å‰ç«¯æ”¶è—å®¶ï¼ˆå¾®ä¿¡å·: fedailyï¼‰\n##### æ”¶é›†å…¨ç½‘ä¼˜ç§€å‰ç«¯æŠ€æœ¯èµ„è®¯ï¼Œä¸Žä½ åˆ†äº«ï¼Œå…±åŒæˆé•¿ã€‚\n"},{"title":"å½»åº•å¼„æ¸…jsç»§æ‰¿çš„å‡ ç§å®žçŽ°æ–¹å¼","url":"/js-inheritance/","content":"\njsæœ‰å‡ ç§ç»å…¸çš„ç»§æ‰¿æ–¹å¼ã€‚æ¯”å¦‚åŽŸåž‹é“¾ç»§æ‰¿ã€æž„é€ å‡½æ•°ç»§æ‰¿ã€ç»„åˆç»§æ‰¿ã€å¯„ç”Ÿç»„åˆç»§æ‰¿ã€ES6ç»§æ‰¿ã€‚è®©æˆ‘ä»¬ä¸€ä¸€åˆ†æžå¹¶å®žçŽ°ã€‚åŒæ—¶äº†è§£æ¯ç§æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹ã€‚\n\nå…¶å®žjsçš„ç»§æ‰¿æœ¬è´¨ä¸Šæ˜¯é€šè¿‡åŽŸåž‹é“¾æœºåˆ¶å®žçŽ°çš„æ‰©å±•ã€‚ä¸ç®¡æ˜¯å“ªç§ç»§æ‰¿æ–¹å¼ï¼Œéƒ½æ˜¯é€šè¿‡æ“ä½œçˆ¶ç±»åŽŸåž‹é“¾å’Œå­ç±»åŽŸåž‹é“¾å½¢æˆå…³è”å…³ç³»å®žçŽ°çš„ã€‚åªæ˜¯ä¸åŒå®žçŽ°ä¸­éœ€è¦è€ƒè™‘ä¸åŒçš„é—®é¢˜ã€‚åœ¨å®žé™…é¡¹ç›®å¼€å‘ä¸­ï¼Œå»ºè®®å°½å¯èƒ½ä½¿ç”¨ES6çš„class extendså®žçŽ°ã€‚\nå…¶ä»–å®žçŽ°æ–¹å¼ä¸»è¦æ˜¯ç†è§£èƒŒåŽçš„åŽŸç†å’Œæ€æƒ³ã€‚\n\n### åŽŸåž‹é“¾ç»§æ‰¿\nåŽŸåž‹é“¾ç»§æ‰¿é€šè¿‡ä¿®æ”¹å­ç±»çš„åŽŸåž‹ä¸ºçˆ¶ç±»çš„å®žä¾‹ï¼Œä»Žè€Œå®žçŽ°å­ç±»å¯ä»¥è®¿é—®åˆ°çˆ¶ç±»æž„é€ å‡½æ•°ä»¥åŠåŽŸåž‹ä¸Šçš„å±žæ€§æˆ–è€…æ–¹æ³•ã€‚\n\nè®©æˆ‘ä»¬æ¥å®žçŽ°ä¸€ä¸‹ï¼š\n```javascript\nfunction Parent() {\n  this.name = 'fedaily'\n}\n\nParent.prototype.getName = function() {\n  return this.name;\n}\n\nfunction Child() {}\n\n// è¿™é‡Œä¹Ÿå¯ä»¥ç›´æŽ¥å†™å‡ºChild.prototype = Parent.prototype\n// ä½†æ˜¯è¿™æ ·å°±ä¸èƒ½è®¿é—®åˆ°çˆ¶ç±»çš„æž„é€ å‡½æ•°çš„å±žæ€§äº†ï¼Œå³this.name\nChild.prototype = new Parent()\n\nvar child = new Child()\nchild.getName() // fedaily\n```\n\n#### ä¼˜ç‚¹\nå®žçŽ°é€»è¾‘ç®€å•\n\n#### ç¼ºç‚¹\nçˆ¶ç±»æž„é€ å‡½æ•°ä¸­çš„å¼•ç”¨ç±»åž‹ï¼ˆæ¯”å¦‚å¯¹è±¡/æ•°ç»„ï¼‰ï¼Œä¼šè¢«æ‰€æœ‰å­ç±»å®žä¾‹å…±äº«ã€‚å…¶ä¸­ä¸€ä¸ªå­ç±»å®žä¾‹è¿›è¡Œä¿®æ”¹ï¼Œä¼šå¯¼è‡´æ‰€æœ‰å…¶ä»–å­ç±»å®žä¾‹çš„è¿™ä¸ªå€¼éƒ½ä¼šæ”¹å˜\n\n### æž„é€ å‡½æ•°ç»§æ‰¿\næž„é€ å‡½æ•°ç»§æ‰¿å…¶å®žå°±æ˜¯é€šè¿‡ä¿®æ”¹çˆ¶ç±»æž„é€ å‡½æ•°thiså®žçŽ°çš„ç»§æ‰¿ã€‚æˆ‘ä»¬åœ¨å­ç±»æž„é€ å‡½æ•°ä¸­æ‰§è¡Œçˆ¶ç±»æž„é€ å‡½æ•°ï¼ŒåŒæ—¶ä¿®æ”¹çˆ¶ç±»æž„é€ å‡½æ•°çš„thisä¸ºå­ç±»çš„thisã€‚\n\næˆ‘ä»¬ç›´æŽ¥çœ‹å¦‚ä½•å®žçŽ°ï¼š\n```javascript\nfunction Parent() {\n  this.name = ['fedaily']\n}\n\nfunction Child() {\n  Parent.call(this)\n}\n\nvar child = new Child()\nchild.name.push('fe')\n\nvar child2 = new Child() // child2.name === ['fedaily']\n```\n\n#### ä¼˜ç‚¹\nè§£å†³äº†åŽŸåž‹é“¾ç»§æ‰¿ä¸­æž„é€ å‡½æ•°å¼•ç”¨ç±»åž‹å…±äº«çš„é—®é¢˜ï¼ŒåŒæ—¶å¯ä»¥å‘æž„é€ å‡½æ•°ä¼ å‚ï¼ˆé€šè¿‡callä¼ å‚ï¼‰\n\n#### ç¼ºç‚¹\næ‰€æœ‰æ–¹æ³•éƒ½å®šä¹‰åœ¨æž„é€ å‡½æ•°ä¸­ï¼Œæ¯æ¬¡éƒ½éœ€è¦é‡æ–°åˆ›å»ºï¼ˆå¯¹æ¯”åŽŸåž‹é“¾ç»§æ‰¿çš„æ–¹å¼ï¼Œæ–¹æ³•ç›´æŽ¥å†™åœ¨åŽŸåž‹ä¸Šï¼Œå­ç±»åˆ›å»ºæ—¶ä¸éœ€è¦é‡æ–°åˆ›å»ºæ–¹æ³•ï¼‰\n\n### ç»„åˆç»§æ‰¿\nåŒæ—¶ç»“åˆåŽŸåž‹é“¾ç»§æ‰¿ã€æž„é€ å‡½æ•°ç»§æ‰¿å°±æ˜¯ç»„åˆç»§æ‰¿äº†ã€‚\n```javascript\nfunction Parent() {\n  this.name = 'fedaily'\n}\n\nParent.prototype.getName = function() {\n  return this.name\n}\n\nfunction Child() {\n  Parent.call(this)\n  this.topic = 'fe'\n}\n\nChild.prototype = new Parent()\n// éœ€è¦é‡æ–°è®¾ç½®å­ç±»çš„constructorï¼ŒChild.prototype = new Parent()ç›¸å½“äºŽå­ç±»çš„åŽŸåž‹å¯¹è±¡å®Œå…¨è¢«è¦†ç›–äº†\nChild.prototype.constructor = Child\n```\n\n#### ä¼˜ç‚¹\nåŒæ—¶è§£å†³äº†æž„é€ å‡½æ•°å¼•ç”¨ç±»åž‹çš„é—®é¢˜ï¼ŒåŒæ—¶é¿å…äº†æ–¹æ³•ä¼šè¢«åˆ›å»ºå¤šæ¬¡çš„é—®é¢˜\n\n#### ç¼ºç‚¹\nçˆ¶ç±»æž„é€ å‡½æ•°è¢«è°ƒç”¨äº†ä¸¤æ¬¡ã€‚åŒæ—¶å­ç±»å®žä¾‹ä»¥åŠå­ç±»åŽŸåž‹å¯¹è±¡ä¸Šéƒ½ä¼šå­˜åœ¨nameå±žæ€§ã€‚è™½ç„¶æ ¹æ®åŽŸåž‹é“¾æœºåˆ¶ï¼Œå¹¶ä¸ä¼šè®¿é—®åˆ°åŽŸåž‹å¯¹è±¡ä¸Šçš„åŒåå±žæ€§ï¼Œä½†æ€»å½’æ˜¯ä¸ç¾Žã€‚\n\n### å¯„ç”Ÿç»„åˆç»§æ‰¿\nå¯„ç”Ÿç»„åˆç»§æ‰¿å…¶å®žå°±æ˜¯åœ¨ç»„åˆç»§æ‰¿çš„åŸºç¡€ä¸Šï¼Œè§£å†³äº†çˆ¶ç±»æž„é€ å‡½æ•°è°ƒç”¨ä¸¤æ¬¡çš„é—®é¢˜ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•è§£å†³çš„ï¼š\n```javascript\nfunction Parent() {\n  this.name = 'fedaily'\n}\n\nParent.prototype.getName = function() {\n  return this.name\n}\n\nfunction Child() {\n  Parent.call(this)\n  this.topic = 'fe'\n}\n\n// ä»”ç»†çœ‹è¿™ä¸ªå‡½æ•°çš„å®žçŽ°\ninherit(Child, Parent)\n```\n\n```javascript\nfunction inherit(child, parent) {\n  var prototype = object(parent.prototype)\n  prototype.constructor = child\n  child.prototype = prototype\n}\n\n// è¿™ä¸ªå‡½æ•°çš„ä½œç”¨å¯ä»¥ç†è§£ä¸ºå¤åˆ¶äº†ä¸€ä»½çˆ¶ç±»çš„åŽŸåž‹å¯¹è±¡\n// å¦‚æžœç›´æŽ¥å°†å­ç±»çš„åŽŸåž‹å¯¹è±¡èµ‹å€¼ä¸ºçˆ¶ç±»åŽŸåž‹å¯¹è±¡\n// é‚£ä¹ˆä¿®æ”¹å­ç±»åŽŸåž‹å¯¹è±¡å…¶å®žå°±ç›¸å½“äºŽä¿®æ”¹äº†çˆ¶ç±»çš„åŽŸåž‹å¯¹è±¡\nfunction object(o) {\n  function F() {}\n  F.prototype = o;\n  return new F();\n}\n```\n\n#### ä¼˜ç‚¹\nè¿™ç§æ–¹å¼å°±è§£å†³äº†ç»„åˆç»§æ‰¿ä¸­çš„æž„é€ å‡½æ•°è°ƒç”¨ä¸¤æ¬¡ï¼Œæž„é€ å‡½æ•°å¼•ç”¨ç±»åž‹å…±äº«ï¼Œä»¥åŠåŽŸåž‹å¯¹è±¡ä¸Šå­˜åœ¨å¤šä½™å±žæ€§çš„é—®é¢˜ã€‚æ˜¯æŽ¨èçš„æœ€åˆç†å®žçŽ°æ–¹å¼ï¼ˆæŽ’é™¤ES6çš„class extendsç»§æ‰¿å“ˆå“ˆå“ˆï¼‰ã€‚\n\n#### ç¼ºç‚¹\næ²¡æœ‰å•¥ç‰¹åˆ«çš„ç¼ºç‚¹\n\n### ES6ç»§æ‰¿\nES6æä¾›äº†classè¯­æ³•ç³–ï¼ŒåŒæ—¶æä¾›äº†extendsç”¨äºŽå®žçŽ°ç±»çš„ç»§æ‰¿ã€‚è¿™ä¹Ÿæ˜¯é¡¹ç›®å¼€å‘ä¸­æŽ¨èä½¿ç”¨çš„æ–¹å¼ã€‚\n\nä½¿ç”¨classç»§æ‰¿å¾ˆç®€å•ï¼Œä¹Ÿå¾ˆç›´è§‚ï¼š\n```javascript\nclass Parent {\n  constructor() {\n    this.name = 'fedaily'\n  }\n\n  getName() {\n    return this.name\n  }\n}\n\nclass Child extends Parent {\n  constructor() {\n    // è¿™é‡Œå¾ˆé‡è¦ï¼Œå¦‚æžœåœ¨this.topic = 'fe'åŽé¢è°ƒç”¨ï¼Œä¼šå¯¼è‡´thisä¸ºundefinedï¼Œå…·ä½“åŽŸå› å¯ä»¥è¯¦ç»†äº†è§£ES6çš„classç›¸å…³å†…å®¹ï¼Œè¿™é‡Œä¸å±•å¼€è¯´æ˜Ž\n    super()\n    this.topic = 'fe'\n  }\n}\n\nconst child = new Child()\nchild.getName() // fedaily\n```\n","tags":["JavaScript"]},{"title":"interface å’Œ type aliases åŒºåˆ«","url":"/ts-interface-vs-type-aliases/","content":"\n[TypeScript interface vs type aliases](https://www.typescriptlang.org/docs/handbook/advanced-types.html#type-aliases)\n\nåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œinterfaceå’Œç±»åž‹åˆ«åå¹¶æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ã€‚ä½†æ˜¯ï¼Œå®ƒä»¬æœ‰ä¸€äº›å¾®å¦™çš„åŒºåˆ«ã€‚\n\nå…¶ä¸­ä¸€ä¸ªåŒºåˆ«å°±æ˜¯interfaceä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç±»åž‹åç§°ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨ã€‚ä½†æ˜¯typeæ²¡æœ‰ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªå¼•ç”¨ï¼Œå¹¶æ²¡æœ‰åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»åž‹å®žä¾‹ã€‚\n\nçœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œå½“æˆ‘ä»¬é¼ æ ‡hoveråˆ°interfacedçš„æ—¶å€™ï¼Œç¼–è¾‘å™¨ä¼šæç¤ºå½“å‰å‡½æ•°è¿”å›žä¸€ä¸ªInterfaceã€‚è€Œå½“æˆ‘ä»¬hoveråˆ°aliasedçš„æ—¶å€™ï¼Œè¿”å›žçš„æ˜¯ä¸€ä¸ª{ num: number }å¯¹è±¡ã€‚\n```javascript\ntype Alias = { num: number };\ninterface Interface {\n  num: number;\n}\ndeclare function aliased(arg: Alias): Alias;\ndeclare function interfaced(arg: Interface): Interface;\n```\n\nåœ¨è€ç‰ˆæœ¬çš„typescriptä¸­ï¼Œç±»åž‹åˆ«åæ˜¯ä¸æ”¯æŒextendedæˆ–è€…implementedï¼ˆä¹Ÿä¸æ”¯æŒä»Žå…¶ä»–ç±»åž‹åˆ«åextend/implementï¼‰\n\nåœ¨2.7ç‰ˆæœ¬åŽï¼Œç±»åž‹åˆ«åå¯ä»¥é€šè¿‡äº¤å‰ç±»åž‹å®žçŽ°extendã€‚ä¾‹å¦‚`type Cat = Animal & { purrs: true }`\n\næ ¹æ®è½¯ä»¶çš„[å¼€é—­åŽŸåˆ™](https://en.wikipedia.org/wiki/Open/closed_principle), ä½ åº”è¯¥å°½å¯èƒ½çš„ä½¿ç”¨interfaceä»£æ›¿type aliasã€‚\n\nä»Žå¦ä¸€æ–¹é¢è¯´ï¼Œå¦‚æžœä½ ä¸èƒ½ä½¿ç”¨interfaceè¡¨è¾¾ä½ çš„ç±»åž‹ï¼Œéœ€è¦ä½¿ç”¨åˆ°è”åˆç±»åž‹æˆ–è€…å…ƒç»„ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨type aliasã€‚\n\n### è‹±æ–‡åŽŸæ–‡ï¼š\nAs we mentioned, type aliases can act sort of like interfaces; however, there are some subtle differences.\n\nOne difference is that interfaces create a new name that is used everywhere. Type aliases donâ€™t create a new name â€” for instance, error messages wonâ€™t use the alias name. In the code below, hovering over interfaced in an editor will show that it returns an Interface, but will show that aliased returns object literal type.\n```javascript\ntype Alias = { num: number };\ninterface Interface {\n  num: number;\n}\ndeclare function aliased(arg: Alias): Alias;\ndeclare function interfaced(arg: Interface): Interface;\n```\n\nIn older versions of TypeScript, type aliases couldnâ€™t be extended or implemented from (nor could they extend/implement other types). As of version 2.7, type aliases can be extended by creating a new intersection type e.g. type Cat = Animal & { purrs: true }.\n\nBecause [an ideal property of software is being open to extension](https://en.wikipedia.org/wiki/Open/closed_principle), you should always use an interface over a type alias if possible.\n\nOn the other hand, if you canâ€™t express some shape with an interface and you need to use a union or tuple type, type aliases are usually the way to go.\n","tags":["TypeScript"]},{"title":"æ–æ³¢é‚£å¥‘æ•°åˆ—","url":"/fibnacci/","content":"\nä½¿ç”¨æ•°ç»„ç»“æž„å®žçŽ°ä¸€ä¸ªéžé€’å½’çš„æ–æ³¢é‚£å¥‘æ•°åˆ—\n\n```javascript\nconst fibnacci = (n) => {\n  if (n === 0) {\n    return 0;\n  }\n  let a = 0;\n  let b = 1;\n  for (let i = 1; i <= n; i += 1) {\n    [a, b] = [a, a + b];\n  }\n  return b;\n}\n```\n","tags":["ç®—æ³•"]},{"title":"ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å†™ super(props) ï¼Ÿ","url":"/why-super-props/","content":"\n>è½¬è½½è‡ªhttps://overreacted.io/zh-hans/why-do-we-write-super-props/\n\næ®è¯´ Hooks åŠ¿å¤´æ­£ç››ï¼Œä¸è¿‡æˆ‘è¿˜æ˜¯æƒ³ç•¥å¸¦è°ƒä¾ƒåœ°ä»Ž class çš„æœ‰è¶£ä¹‹å¤„å¼€å§‹è¿™ç¯‡åšå®¢ã€‚å¯è¿˜è¡Œï¼Ÿ\n\nè¿™äº›æ¢—å¯¹äºŽä½¿ç”¨ React è¾“å‡ºäº§å“å¹¶ä¸é‡è¦ï¼Œä½†å¦‚æžœä½ æƒ³æ·±å…¥çš„äº†è§£å®ƒä»¬çš„è¿ä½œåŽŸç†ï¼Œå®ƒä»¬ä¼šéžå¸¸çš„æœ‰ç”¨ã€‚\n\né¦–å…ˆï¼Œåœ¨è¿™ä¸€ç”Ÿä¸­ï¼Œ`super(props)` å‡ºçŽ°åœ¨æˆ‘ä»£ç é‡Œçš„æ¬¡æ•°æ¯”æˆ‘çŸ¥é“çš„è¿˜è¦å¤šï¼š\n```javascript\nclass Checkbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { isOn: true };\n  }\n  // ...\n}\n```\n\nå½“ç„¶äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ `class fields proposal` æ¥çœç•¥è¿™ä¸ªå£°æ˜Žï¼š\n```javascript\nclass Checkbox extends React.Component {\n  state = { isOn: true };\n  // ...\n}\n```\n\næ—©åœ¨ 2015 å¹´ React 0.13 å·²ç»è®¡åˆ’æ”¯æŒ ã€‚åœ¨å½“æ—¶ï¼Œå£°æ˜Ž `constructor` å’Œè°ƒç”¨ `super(props)` ä¸€ç›´è¢«è§†ä½œæš‚æ—¶çš„è§£å†³æ–¹æ¡ˆï¼Œç›´åˆ°æœ‰åˆé€‚çš„ç±»å­—æ®µå£°æ˜Žå½¢å¼ã€‚\n\nä½†åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå›žåˆ° ES2015 é£Žæ ¼çš„ä»£ç ï¼š\n```javascript\nclass Checkbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { isOn: true };\n  }\n  // ...\n}\n```\n\nä¸ºä»€ä¹ˆæˆ‘ä»¬è¦è°ƒç”¨ superï¼Œæˆ‘ä»¬å¯ä»¥ä¸è¿™ä¹ˆåšå—ï¼Ÿé‚£ä¹ˆåœ¨æˆ‘ä»¬è°ƒç”¨å®ƒæ—¶ä¸ä¼ å…¥ propsï¼Œåˆä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿä¼šæœ‰å…¶ä»–çš„ç¼ºçœå‚æ•°å—ï¼ŸæŽ¥æ¥ä¸‹æˆ‘ä»¬å°±è§£å¼€è¿™ä¸€ç³»åˆ—è°œé¢˜ã€‚\n\nåœ¨ JavaScript ä¸­ï¼Œsuper æŒ‡çš„æ˜¯çˆ¶ç±»ï¼ˆå³è¶…ç±»ï¼‰çš„æž„é€ å‡½æ•°ã€‚ï¼ˆåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒæŒ‡å‘äº† React.Component çš„å®žçŽ°ã€‚ï¼‰\n\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨è°ƒç”¨çˆ¶ç±»çš„æž„é€ å‡½æ•°ä¹‹å‰ï¼Œä½ æ˜¯ä¸èƒ½åœ¨ constructor ä¸­ä½¿ç”¨ this å…³é”®å­—çš„ã€‚JavaScript ä¸å…è®¸è¿™ä¸ªè¡Œä¸ºã€‚\n```javascript\nclass Checkbox extends React.Component {\n  constructor(props) {\n    // ðŸ”´  è¿˜ä¸èƒ½ä½¿ç”¨ `this`\n    super(props);\n    // âœ…  çŽ°åœ¨å¯ä»¥äº†\n    this.state = { isOn: true };\n  }\n  // ...\n}\n```\n\nJavaScript æœ‰è¶³å¤Ÿåˆç†çš„åŠ¨æœºæ¥å¼ºåˆ¶ä½ åœ¨æŽ¥è§¦ this ä¹‹å‰æ‰§è¡Œçˆ¶ç±»æž„é€ å‡½æ•°ã€‚è€ƒè™‘è€ƒè™‘ä¸€äº›ç±»å±‚æ¬¡ç»“æž„çš„ä¸œè¥¿ï¼š\n```javascript\nclass Person {\n  constructor(name) {\n    this.name = name;\n  }\n}\n\nclass PolitePerson extends Person {\n  constructor(name) {\n    this.greetColleagues(); // ðŸ”´  è¿™æ˜¯ç¦æ­¢çš„ï¼Œå¾€åŽè§åŽŸå› \n    super(name);\n  }\n  greetColleagues() {\n    alert('Good morning folks!');\n  }\n}\n```\n\nè¯•æƒ³ä¸€ä¸‹ï¼Œåœ¨è°ƒç”¨ super ä¹‹å‰ä½¿ç”¨ this ä¸è¢«ç¦æ­¢çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªæœˆåŽï¼Œæˆ‘ä»¬å¯èƒ½åœ¨ `greetColleagues` æ‰“å°çš„æ¶ˆæ¯ä¸­ä½¿ç”¨äº† person çš„ name å±žæ€§ï¼š\n```javascript\ngreetColleagues() {\n  alert('Good morning folks!');\n  alert('My name is ' + this.name + ', nice to meet you!');\n}\n```\n\nä½†æ˜¯æˆ‘ä»¬å¹¶æœªæƒ³èµ· `this.greetColleagues` åœ¨ super() ç»™ this.name èµ‹å€¼å‰å°±å·²ç»æ‰§è¡Œã€‚this.name æ­¤æ—¶ç”šè‡³å°šæœªå®šä¹‰ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ ·çš„ä»£ç éš¾ä»¥å¾€ä¸‹æŽ¨æ•²ã€‚\n\nä¸ºäº†é¿å…è½å…¥è¿™ä¸ªé™·é˜±ï¼ŒJavaScript å¼ºåˆ¶ä½ åœ¨ä½¿ç”¨ this ä¹‹å‰å…ˆè¡Œè°ƒç”¨ superã€‚è®©çˆ¶ç±»æ¥å®Œæˆè¿™ä»¶äº‹æƒ…ï¼ï¼š\n```javascript\nconstructor(props) {\n  super(props);\n  // âœ… èƒ½ä½¿ç”¨ `this` äº†\n  this.state = { isOn: true };\n}\n```\n\nè¿™é‡Œç•™ä¸‹äº†å¦ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆè¦ä¼ å…¥ props ï¼Ÿ\n\nä½ æˆ–è®¸ä¼šæƒ³åˆ°ï¼Œä¸ºäº†è®© React.Component æž„é€ å‡½æ•°èƒ½å¤Ÿåˆå§‹åŒ– this.propsï¼Œå°† props ä¼ å…¥ super æ˜¯å¿…é¡»çš„ï¼š\n```javascript\n// React å…§éƒ¨\nclass Component {\n  constructor(props) {\n    this.props = props;\n    // ...\n  }\n}\n```\n\nè¿™å‡ ä¹Žå°±æ˜¯çœŸç›¸äº† â€” ç¡®ç„¶ï¼Œå®ƒæ˜¯ è¿™æ ·åš çš„ã€‚\n\nä½†æœ‰äº›æ‰‘æœ”è¿·ç¦»çš„æ˜¯ï¼Œå³ä¾¿ä½ è°ƒç”¨ super() çš„æ—¶å€™æ²¡æœ‰ä¼ å…¥ propsï¼Œä½ ä¾ç„¶èƒ½å¤Ÿåœ¨ render å‡½æ•°æˆ–å…¶ä»–æ–¹æ³•ä¸­è®¿é—®åˆ° this.propsã€‚ï¼ˆå¦‚æžœä½ è´¨ç–‘è¿™ä¸ªæœºåˆ¶ï¼Œå°è¯•ä¸€ä¸‹å³å¯ï¼‰\n\né‚£ä¹ˆè¿™æ˜¯æ€Žä¹ˆåšåˆ°çš„å‘¢ï¼Ÿäº‹å®žè¯æ˜Žï¼ŒReact åœ¨è°ƒç”¨æž„é€ å‡½æ•°åŽä¹Ÿç«‹å³å°† props èµ‹å€¼åˆ°äº†å®žä¾‹ä¸Šï¼š**\n```javascript\n// React å†…éƒ¨\nconst instance = new YourComponent(props);\ninstance.props = props;\n```\n\nå› æ­¤å³ä¾¿ä½ å¿˜è®°äº†å°† props ä¼ ç»™ super()ï¼ŒReact ä¹Ÿä»ç„¶ä¼šåœ¨ä¹‹åŽå°†å®ƒå®šä¹‰åˆ°å®žä¾‹ä¸Šã€‚è¿™ä¹ˆåšæ˜¯æœ‰åŽŸå› çš„ã€‚\n\nå½“ React å¢žåŠ äº†å¯¹ç±»çš„æ”¯æŒæ—¶ï¼Œä¸ä»…ä»…æ˜¯ä¸ºäº†æœåŠ¡äºŽ ES6ã€‚å…¶ç›®æ ‡æ˜¯å°½å¯èƒ½å¹¿æ³›åœ°æ”¯æŒç±»æŠ½è±¡ã€‚å½“æ—¶æˆ‘ä»¬ ä¸æ¸…æ¥š `ClojureScriptï¼ŒCoffeeScriptï¼ŒES6ï¼ŒFableï¼ŒScala.jsï¼ŒTypeScript` ç­‰è§£æ±ºæ–¹æ¡ˆæ˜¯å¦‚ä½•æˆåŠŸçš„å®žè·µç»„ä»¶å®šä¹‰çš„ã€‚å› è€Œ React åˆ»æ„åœ°æ²¡æœ‰æ˜¾å¼è¦æ±‚è°ƒç”¨ super() â€”â€” å³ä¾¿ ES6 è‡ªèº«å°±åŒ…å«è¿™ä¸ªæœºåˆ¶ã€‚\n\nè¿™æ„å‘³ç€ä½ èƒ½å¤Ÿç”¨ super() ä»£æ›¿ super(props) å—ï¼Ÿ\n\næœ€å¥½ä¸è¦ï¼Œæ¯•ç«Ÿè¿™æ ·å†™åœ¨é€»è¾‘ä¸Šå¹¶ä¸æ˜Žç¡®ç¡®ç„¶ï¼ŒReact ä¼šåœ¨æž„é€ å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åŽç»™ this.props èµ‹å€¼ã€‚ä½†å¦‚æ­¤ä¸ºä¹‹ä¼šä½¿å¾— this.props åœ¨ super è°ƒç”¨ä¸€ç›´åˆ°æž„é€ å‡½æ•°ç»“æŸæœŸé—´å€¼ä¸º undefinedã€‚\n```javascript\n// React å…§éƒ¨\nclass Component {\n  constructor(props) {\n    this.props = props;\n    // ...\n  }\n}\n// ä½ çš„ç¨‹å¼ç¢¼å…§éƒ¨\nclass Button extends React.Component {\n  constructor(props) {\n    super(); // ðŸ˜¬ æˆ‘ä»¬å¿˜äº†ä¼ å…¥ props\n    console.log(props);      // âœ… {}\n    console.log(this.props); // ðŸ˜¬ æœªå®šä¹‰\n  }\n  // ...\n}\n```\n\nå¦‚æžœåœ¨æž„é€ å‡½æ•°ä¸­è°ƒç”¨äº†å…¶ä»–çš„å†…éƒ¨æ–¹æ³•ï¼Œé‚£ä¹ˆä¸€æ—¦å‡ºé”™è¿™ä¼šä½¿å¾—è°ƒè¯•è¿‡ç¨‹é˜»åŠ›æ›´å¤§ã€‚è¿™å°±æ˜¯æˆ‘å»ºè®®å¼€å‘è€…ä¸€å®šæ‰§è¡Œ super(props) çš„åŽŸå› ï¼Œå³ä½¿ç†è®ºä¸Šè¿™å¹¶éžå¿…è¦ï¼š\n```javascript\nclass Button extends React.Component {\n  constructor(props) {\n    super(props); // âœ… ä¼ å…¥ props\n    console.log(props);      // âœ… {}\n    console.log(this.props); // âœ… {}\n  }\n  // ...\n}\n```\n\nç¡®ä¿äº† this.props åœ¨æž„é€ å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹å‰å·²è¢«èµ‹å€¼ã€‚\n\næœ€åŽï¼Œè¿˜æœ‰ä¸€ç‚¹æ˜¯ React çˆ±å¥½è€…é•¿æœŸä»¥æ¥çš„å¥½å¥‡ä¹‹å¤„ã€‚\n\nä½ ä¼šå‘çŽ°å½“ä½ åœ¨ç±»ä¸­ä½¿ç”¨ Context API ï¼ˆæ— è®ºæ˜¯æ—§ç‰ˆçš„ contextTypes æˆ–æ˜¯åœ¨ React 16.6 æ›´æ–°çš„æ–°ç‰ˆ contextTypesï¼‰çš„æ—¶å€™ï¼Œcontext æ˜¯ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥æž„é€ å‡½æ•°çš„ã€‚\n\né‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½è½¬è€Œå†™æˆ `super(props, context)` å‘¢ï¼Ÿæˆ‘ä»¬å½“ç„¶å¯ä»¥ï¼Œä½† context çš„ä½¿ç”¨é¢‘çŽ‡è¾ƒä½Žï¼Œå› è€Œå¹¶æ²¡æœ‰æŽ˜è¿™ä¸ªå‘ã€‚\n\nclass fields proposal å‡ºå°åŽï¼Œè¿™äº›å‘å¤§éƒ¨åˆ†éƒ½ä¼šè‡ªç„¶åœ°æ¶ˆå¤±åœ¨æ²¡æœ‰æ˜¾ç¤ºçš„å®šä¹‰æž„é€ å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œä»¥ä¸Šçš„å±žæ€§éƒ½ä¼šè¢«è‡ªåŠ¨åœ°åˆå§‹åŒ–ã€‚è¿™ä½¿å¾—åƒ state = {} è¿™ç±»è¡¨è¾¾å¼èƒ½å¤Ÿåœ¨éœ€è¦çš„æƒ…å†µä¸‹å¼•ç”¨ this.props å’Œ this.context çš„å†…å®¹ã€‚\n\nç„¶è€Œï¼Œæœ‰äº† Hooks ä»¥åŽï¼Œæˆ‘ä»¬å‡ ä¹Žå°±ä¸éœ€è¦ super å’Œ this äº†ã€‚ä½†é‚£å°±æ˜¯å¦ä¸€ä¸ªä¸‹åˆçš„èŒ¶ç‚¹äº†ã€‚\n","tags":["è½¬è½½","React"]},{"title":"ç¬¬19æœŸ å½»åº•æžæ‡‚Reactæºç è°ƒåº¦åŽŸç†ï¼ˆConcurrentæ¨¡å¼ï¼‰& HTTP/3åŽŸç†ä¸Žå®žè·µ","url":"/hotlink19/","content":"\n[HTTP/3åŽŸç†ä¸Žå®žè·µ](https://mp.weixin.qq.com/s?__biz=MjM5MTA1MjAxMQ==&mid=2651236564&idx=1&sn=4cfbf59ed50cc45d889613e5b19292bd&scene=21#wechat_redirect)\n\n2015 å¹´ HTTP/2 æ ‡å‡†å‘è¡¨åŽï¼Œå¤§å¤šæ•°ä¸»æµæµè§ˆå™¨ä¹ŸäºŽå½“å¹´å¹´åº•æ”¯æŒè¯¥æ ‡å‡†ã€‚æ­¤åŽï¼Œå‡­å€Ÿç€å¤šè·¯å¤ç”¨ã€å¤´éƒ¨åŽ‹ç¼©ã€æœåŠ¡å™¨æŽ¨é€ç­‰ä¼˜åŠ¿ï¼ŒHTTP/2 å¾—åˆ°äº†è¶Šæ¥è¶Šå¤šå¼€å‘è€…çš„é’çã€‚ä¸çŸ¥ä¸è§‰çš„ HTTP å·²ç»å‘å±•åˆ°äº†ç¬¬ä¸‰ä»£ï¼Œé¹…åŽ‚ä¹Ÿç´§è·ŸæŠ€æœ¯æ½®æµï¼Œå¾ˆå¤šé¡¹ç›®ä¹Ÿåœ¨é€æ¸ä½¿ç”¨ HTTP/3ã€‚æœ¬æ–‡åŸºäºŽ QQå…´è¶£éƒ¨è½æŽ¥å…¥ HTTP/3 çš„å®žè·µï¼ŒèŠä¸€èŠ HTTP/3 çš„åŽŸç†ä»¥åŠä¸šåŠ¡æŽ¥å…¥çš„æ–¹å¼ã€‚\n\n[å¦‚ä½•å›žç­”å¥½è¿™ä¸ªé«˜é¢‘é¢è¯•é¢˜ï¼šCommonJSå’ŒES6æ¨¡å—çš„åŒºåˆ«ï¼Ÿ](https://mp.weixin.qq.com/s?__biz=MzI1ODk2Mjk0Nw==&mid=2247485426&idx=1&sn=1caa7a95942fc573ae15b004010522cd&scene=21#wechat_redirect)\n\né€šè¿‡é˜…è¯»æœ¬ç¯‡æ–‡ç« ä½ å¯ä»¥å­¦ä¹ åˆ°ï¼š\nåŽŸå§‹æ¨¡æ‹Ÿæ¨¡å—çš„ä¸€äº›å†™æ³•\nCommonJSè§„èŒƒ\nAMDè§„èŒƒ\nCMDè§„èŒƒ\nAMDå’ŒCMDçš„åŒºåˆ«\nES6 Modulesè§„èŒƒ\nCommonJSä¸ŽES6 Modulesè§„èŒƒçš„åŒºåˆ«\n\n[é‚£äº›å¹´ä¸Žé¢è¯•å®˜äº¤æ‰‹è¿‡çš„HTTPé—®é¢˜](https://mp.weixin.qq.com/s?__biz=MzA4ODUzNTE2Nw==&mid=2451047001&idx=1&sn=834dd557bfd7a17474160e1b9dabaa61&scene=21#wechat_redirect)\n\nä»Žæ·¡é»„çš„é•¿è£™å’Œè“¬æ¾çš„å¤´å‘æˆ‘å¯Ÿè§‰åˆ°ï¼Œé¢å‰åç€çš„è¿™ä½å¥³é¢è¯•å®˜å±žå®žæ˜¯æœ‰ç‚¹ä¸œè¥¿ã€‚æˆ‘çš„è‡ªæˆ‘ä»‹ç»ä¹Ÿå˜å¾—å£°æƒ…å¹¶èŒ‚èµ·æ¥ã€‚Skr~~~ åœ¨æ­¤æœŸé—´ï¼Œå°å§å§é¢æ— æ”¹è‰²çš„çœ‹ç€æˆ‘çš„ç®€åŽ†ã€‚ä¸è¿‡æ— æ‰€è°“ï¼Œè¿™äº›éƒ½ä¸é‡è¦ã€‚\n\n[å½»åº•æžæ‡‚Reactæºç è°ƒåº¦åŽŸç†ï¼ˆConcurrentæ¨¡å¼ï¼‰](https://mp.weixin.qq.com/s?__biz=MjM5MTA1MjAxMQ==&mid=2651236611&idx=1&sn=c908931b15b7981e0c52e972a9e6ed07&scene=21#wechat_redirect)\n\næœ€æ—©ä¹‹å‰ï¼ŒReactè¿˜æ²¡æœ‰ç”¨fiberé‡å†™ï¼Œé‚£ä¸ªæ—¶å€™å¯¹Reactè°ƒåº¦æ¨¡å—å°±æœ‰å¥½å¥‡ã€‚è€ŒçŽ°åœ¨çš„è°ƒåº¦æ¨¡å—å¯¹äºŽä¹‹å‰æ²¡ç ”ç©¶è¿‡å®ƒçš„æˆ‘æ¥è¯´æ›´æ˜¯å¸¦æœ‰ä¸€å±‚ç¥žç§˜çš„è‰²å½©ï¼Œè‰²å½©ä¸­æœ¦èƒ§æµ®çŽ°å‡ºä¸¤ä¸ªå­—ï¼šâ€œå›°éš¾â€ã€‚\n\n### å‰ç«¯æ”¶è—å®¶ï¼ˆå¾®ä¿¡å·: fedailyï¼‰\n##### æ”¶é›†å…¨ç½‘ä¼˜ç§€å‰ç«¯æŠ€æœ¯èµ„è®¯ï¼Œä¸Žä½ åˆ†äº«ï¼Œå…±åŒæˆé•¿ã€‚\n","tags":["ç²¾é€‰"]},{"title":"ç¬¬18æœŸ æ‰‹æŠŠæ‰‹æ•™ä½ å®žçŽ°ã€Œäº¬å–œå·¥åŽ‚ã€çš„CSSåŠ¨ç”»æ•ˆæžœ & å‰ç«¯ç½‘çº¢æ¡†æž¶çš„æ’ä»¶æœºåˆ¶axiosã€koaã€reduxã€vuex","url":"/hotlink18/","content":"\n[æ‰‹æŠŠæ‰‹æ•™ä½ å®žçŽ°ã€Œäº¬å–œå·¥åŽ‚ã€çš„CSSåŠ¨ç”»æ•ˆæžœ](https://mp.weixin.qq.com/s?__biz=MzI5NjIzNjA1Nw==&mid=2247484579&idx=1&sn=74adcdc4708ebd64b99fcddeaa40982a&scene=21#wechat_redirect)\n\nä»Šå¹´Q1ï¼ˆ2020å¹´ç¬¬ä¸€å­£åº¦ï¼‰å‚ä¸Žäº†äº¬å–œäº‹ä¸šéƒ¨ã€Œäº¬å–œå·¥åŽ‚ã€ä¸šåŠ¡çš„å‰ç«¯å¼€å‘ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡ã€Œäº¬å–œå·¥åŽ‚ã€å‚ä¸Žå£ç½©ã€æŠ½çº¸ã€å¤§ç±³ç­‰å•†å“çš„â€œåœ¨çº¿ç”Ÿäº§â€ï¼Œæ—¢èƒ½è¶£å‘³é€ ç‰©ï¼Œåˆèƒ½å…è´¹é¢†å¥–å“ã€‚ç›®å‰å¯ä»¥é€šè¿‡ã€Œäº¬å–œã€å°ç¨‹åºé¦–é¡µè®¿é—®è¯¥æ´»åŠ¨ã€‚\næ´»åŠ¨åœ¨ä¸Šçº¿åŽä¸ä¹…ï¼ŒPV è¾¾åˆ°åƒä¸‡çš„é‡çº§ï¼Œå¼•äººæ³¨ç›®ã€‚æœ‰ä¸å°‘å‰ç«¯åŒå­¦å¥½å¥‡é‡Œé¢æ¶‰åŠåˆ°çš„åŠ¨ç”»å®žçŽ°ï¼Œæ–‡æœ¬åº”è¿è€Œç”Ÿã€‚\n\n[å¦‚ä½•è®¾è®¡å¤§åž‹å‰ç«¯å›¢é˜ŸåŸºå»ºè·¯çº¿](https://mp.weixin.qq.com/s?__biz=MjM5MDc4MzgxNA==&mid=2458454613&idx=1&sn=5024a9cc96b960c88cfd9bd79129ecb6&scene=21#wechat_redirect)\n\nå¤§å®¶ä¸‹åˆå¥½ï¼Œæˆ‘ä»Šå¤©è¦åˆ†äº«çš„ä¸»é¢˜å«ã€å¤§åž‹å‰ç«¯å›¢é˜Ÿçš„åŸºå»ºè®¾è®¡æ•´åˆä¹‹è·¯ã€‘ï¼Œä¸»è¦ä¼šè·Ÿå¤§å®¶åˆ†äº«ä¸‹æˆ‘ä»¬å›¢é˜Ÿè¿™ä¹ˆå¤šå¹´ç§¯ç´¯ä¸‹æ¥çš„å‰ç«¯åŸºç¡€è®¾æ–½ç›¸å…³æ–¹é¢çš„ä¸€äº›æˆæžœå’Œå¿ƒå¾—ã€‚\n\n[äº¬å–œå‰ç«¯çš„è‡ªåŠ¨åŒ–æµ‹è¯•ä¹‹è·¯](https://mp.weixin.qq.com/s?__biz=MzI2NTk2NzUxNg==&mid=2247485048&idx=1&sn=59a989ce925c2f7e3c247e2a64a104bb&scene=21#wechat_redirect)\n\näº¬å–œï¼ˆåŽŸäº¬ä¸œæ‹¼è´­ï¼‰é¡¹ç›®ï¼Œä½œä¸ºäº¬ä¸œæˆ˜ç•¥çº§ä¸šåŠ¡ï¼Œæ‹¥æœ‰åƒä¸‡çº§åˆ«çš„æµé‡å…¥å£ã€‚ä¸ºäº†ä¿éšœçº¿ä¸Šä¸šåŠ¡çš„ç¨³å®šè¿è¡Œï¼Œæ¯æœˆä¾‹è¡Œå¼€å±•å‰ç«¯å®¹ç¾æ¼”ä¹ ï¼Œä¸»è¦åŒ…å«å°ç¨‹åºåŠ H5 ç‰ˆæœ¬ï¼Œè¦æ±‚å„é¡µé¢å„æ¨¡å—åœ¨å¼‚å¸¸æƒ…å†µä¸‹è¿›è¡Œé€‚å½“çš„é™çº§å¤„ç†ï¼Œä¸èƒ½å‡ºçŽ°ç©ºçª—ã€æ ·å¼é”™ä¹±ã€ä¸åˆç†çš„é”™è¯¯æç¤ºç­‰ä½“éªŒé—®é¢˜ã€‚\n\n[é‡æ¸©åŸºç¡€ï¼šæ­£åˆ™è¡¨è¾¾å¼](https://mp.weixin.qq.com/s?__biz=MjM5MDc4MzgxNA==&mid=2458454613&idx=4&sn=edfd5b329438eea9599e0c82e7293a5a&scene=21#wechat_redirect)\n\næœ¬ç« èŠ‚å¤ä¹ çš„æ˜¯JSä¸­çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ŒJSä¸­ç”¨æ¥åŒ¹é…å­—ç¬¦ä¸²çš„å¼ºå¤§å·¥å…·ã€‚\n\n[æ·±å…¥ç†è§£ åŠ¨æ€ Import å’Œ é¡¶å±‚ await](https://mp.weixin.qq.com/s?__biz=MzIwNTc4OTU2NA==&mid=2247485052&idx=1&sn=e8ebc37db33fb4fe0d9a849ff3ffa267&scene=21#wechat_redirect)\n\néšç€ ES6 çš„å‘å¸ƒï¼ŒJavaScript è¯­æ³•ä¹Ÿè¶Šæ¥è¶Šè¶‹äºŽæˆç†Ÿï¼Œæ–°çš„ææ¡ˆä¹Ÿåœ¨ä¸æ–­åœ°æå‡ºã€‚\nECMA ææ¡ˆä¸€å…±æœ‰å››ä¸ªé˜¶æ®µï¼Œå¤„äºŽ Stage3 çš„éƒ½éœ€è¦æˆ‘ä»¬æŒç»­å…³æ³¨ï¼Œä»¥åŽå¾ˆå¯èƒ½å°±ä¼šè¢«çº³å…¥æ–°æ ‡å‡†ä¸­ã€‚\nä»Šå¤©ä¸»è¦æ¥æ·±å…¥è®²è§£ä¸€ä¸‹åŠ¨æ€ import å’Œ Top-level awaitã€‚\n\n[TypeScript 3.9æ­£å¼å‘å¸ƒï¼å¹³å‡ç¼–è¯‘æ—¶é•¿ä»Ž26ç§’ç¼©çŸ­è‡³10ç§’](https://mp.weixin.qq.com/s?__biz=MzUxMzcxMzE5Ng==&mid=2247494688&idx=1&sn=9f924231ad2edb07b9d56027f03d3a86&scene=21#wechat_redirect)\n\næœ‰äº›æœ‹å‹å¯èƒ½å¯¹ TypeScript è¿˜ä¸å¤ªç†Ÿæ‚‰ï¼Œè¿™æ˜¯ä¸€ç§ä»¥ JavaScript ä¸ºåŸºç¡€å¼€å‘çš„è¯­è¨€ï¼Œæ–°å¢ž type å£°æ˜Žä¸Žæ³¨é‡Šç­‰å¤šç§è¯­æ³•ã€‚TypeScript ç¼–è¯‘å™¨èƒ½å¤Ÿä½¿ç”¨è¿™äº›è¯­æ³•å¯¹ä»£ç è¿›è¡Œ type æ£€æŸ¥ï¼Œè€ŒåŽè¾“å‡ºèƒ½å¤Ÿé€‚é…å¤šç§ä¸åŒè¿è¡Œæ—¶ã€ä¸”æ¸…æ™°å¯è¯»çš„ JavaScript ä»£ç ã€‚\n\n[å‰ç«¯ç½‘çº¢æ¡†æž¶çš„æ’ä»¶æœºåˆ¶å…¨æ¢³ç†ï¼ˆaxiosã€koaã€reduxã€vuexï¼‰](https://mp.weixin.qq.com/s?__biz=MzI1ODk2Mjk0Nw==&mid=2247485368&idx=1&sn=3118fef9dd9fadca66f7e7d2c317026c&scene=21#wechat_redirect)\n\nå‰ç«¯ä¸­çš„åº“å¾ˆå¤šï¼Œå¼€å‘è¿™äº›åº“çš„ä½œè€…ä¼šå°½å¯èƒ½çš„è¦†ç›–åˆ°å¤§å®¶åœ¨ä¸šåŠ¡ä¸­åƒå¥‡ç™¾æ€ªçš„éœ€æ±‚ï¼Œä½†æ˜¯æ€»æœ‰æ— æ³•é¢„æ–™åˆ°çš„ï¼Œæ‰€ä»¥ä¼˜ç§€çš„åº“å°±éœ€è¦æä¾›ä¸€ç§æœºåˆ¶ï¼Œè®©å¼€å‘è€…å¯ä»¥å¹²é¢„æ’ä»¶ä¸­é—´çš„ä¸€äº›çŽ¯èŠ‚ï¼Œä»Žè€Œå®Œæˆè‡ªå·±çš„ä¸€äº›éœ€æ±‚ã€‚\næœ¬æ–‡å°†ä»Žkoaã€axiosã€vuexå’Œreduxçš„å®žçŽ°æ¥æ•™ä½ æ€Žä¹ˆç¼–å†™å±žäºŽè‡ªå·±çš„æ’ä»¶æœºåˆ¶ã€‚\n\n[èŠ±å¼è§£è¯´é˜²æŠ–å‡½æ•°debounceçš„å®žçŽ°](https://mp.weixin.qq.com/s?__biz=MzA5NzkwNDk3MQ==&mid=2650591878&idx=1&sn=28e8021b44d92f5dcd534aa4d4ebcf51&scene=21#wechat_redirect)\n\næ­ªå¼çµ®å¨ï¼šåŽŸæœ¬æ‰“ç®—åªç”¨ä¸€ç¯‡æ–‡ç« æ€»ç»“ä¸‹é˜²æŠ–å’ŒèŠ‚æµçš„ï¼Œä½†æ˜¯å†™ç€å†™ç€å‘çŽ°æŒºæœ‰æ„æ€çš„ã€‚æ‰€ä»¥å‡†å¤‡ä¼šåˆ†æˆ 3-4 ç¯‡æ¥å†™äº†ï¼Œå•ç‹¬çš„é˜²æŠ–å’ŒèŠ‚æµçš„å®žçŽ°ï¼Œç„¶åŽåœ¨åŽ»åˆ†äº«ä¸€ä¸‹çŸ¥ååº“çš„æºç ã€‚ä»Šå¤©å…ˆè·Ÿæ­ªé©¬ä¸€èµ·çœ‹çœ‹é˜²æŠ–çš„å®žçŽ°å§ã€‚å…¶ä»–å†…å®¹æ•¬è¯·æœŸå¾…~ï¼\n\n### å‰ç«¯æ”¶è—å®¶ï¼ˆå¾®ä¿¡å·: fedailyï¼‰\n##### æ”¶é›†å…¨ç½‘ä¼˜ç§€å‰ç«¯æŠ€æœ¯èµ„è®¯ï¼Œä¸Žä½ åˆ†äº«ï¼Œå…±åŒæˆé•¿ã€‚\n","tags":["ç²¾é€‰"]},{"title":"å¦‚ä½•æ¨¡æ‹Ÿå®žçŽ°ä¸€ä¸ªcallã€applyã€bindå‡½æ•°","url":"/call-applay-bind/","content":"\né¦–å…ˆå¼ºçƒˆæŽ¨èè¿™ä½å¤§ä½¬çš„æ–‡ç« ï¼Œå†™çš„ç›¸å½“æ£’ï¼ŒåŽç»­è®¨è®ºå†…å®¹çš„ä¹Ÿæ˜¯ä½ æ¥æˆ‘å¾€ï¼Œåˆ†æžçš„å¾ˆé€å½»ã€‚\n[JavaScriptæ·±å…¥ä¹‹callå’Œapplyçš„æ¨¡æ‹Ÿå®žçŽ°](https://github.com/mqyqingfeng/Blog/issues/11)\n[JavaScriptæ·±å…¥ä¹‹bindçš„æ¨¡æ‹Ÿå®žçŽ°](https://github.com/mqyqingfeng/Blog/issues/12)\n\ncall, apply, bindè¿™ä¸‰ä¸ªæ–¹æ³•éƒ½å¯ä»¥æ”¹å˜å‡½æ•°å†…éƒ¨thisæŒ‡å‘ã€‚åŒºåˆ«æ˜¯call, applyæ˜¯ç«‹å³æŒ‡å‘è¯¥å‡½æ•°ï¼Œè€Œbindæ˜¯è¿”å›žä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œç”¨äºŽä¸‹æ¬¡è°ƒç”¨ã€‚\n\nå…¶ä¸­ï¼Œcallå’Œapplyçš„åŒºåˆ«æ˜¯ä¼ é€’å‡½æ•°å‚æ•°çš„æ–¹å¼ä¸åŒï¼Œcallæ˜¯ä¸€ä¸ªä¸€ä¸ªä¼ å…¥ï¼Œä¾‹å¦‚call(this, arg1, arg2, arg3)è¿™æ ·ã€‚ä½†æ˜¯applyæ˜¯é€šè¿‡ä¸€ä¸ªæ•°ç»„ä¼ é€’ï¼Œæ¯”å¦‚apply(this, [arg1, arg2, arg3])ã€‚\n\n### callæ¨¡æ‹Ÿå®žçŽ°\n\né¦–å…ˆæˆ‘ä»¬å®žçŽ°ç»‘å®šthisåŠŸèƒ½ã€‚\n```\n// æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªfooå‡½æ•°\nfunction getName() {\n  return this.name;\n}\n\n// è¿˜æœ‰ä¸€ä¸ªwechatå¯¹è±¡\nconst wechat = { name: 'fedaily' };\n\n// æˆ‘ä»¬å¸Œæœ›å®žçŽ°\ngetName.call(wechat); // fedaily\n```\n\né‚£ä¹ˆåœ¨callå†…éƒ¨å¦‚ä½•è®¾è®¡èƒ½å¤Ÿå®žçŽ°è¿™ä¸ªåŠŸèƒ½å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥è”æƒ³åˆ°å°†`getName`æ–¹æ³•å˜æˆ`wechat`å¯¹è±¡é‡Œçš„ä¸€ä¸ªæ–¹æ³•ï¼Œç„¶åŽé€šè¿‡`wechat.getName()`ï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥å®žçŽ°è¿™ä¸ªæ•ˆæžœäº†ã€‚\n\næˆ‘ä»¬æ¥å®žè·µä¸€ä¸‹ï¼š\n```\nFunction.prototype.call = function (context) {\n  context.fn = this;\n  context.fn();\n  delete context.fn;\n}\n```\n\nä»¥`wechat`å’Œ`getName`è¿™ä¸ªä¸ºä¾‹ï¼Œè¿™é‡Œçš„thiså³getNameï¼Œcontextå³wechatã€‚\næˆ‘ä»¬å°†`getName`èµ‹å€¼ç»™`wechat`å¯¹è±¡çš„`fn`ç†Ÿæ‚‰ï¼Œç„¶åŽé€šè¿‡`wechat`å¯¹è±¡è°ƒç”¨ï¼Œæœ€åŽåˆ é™¤è¿™ä¸ªfnå±žæ€§ã€‚ï¼ˆå®žé™…ä¸­æˆ‘ä»¬è‚¯å®šä¸èƒ½ç”¨fnè¿™ä¸ªåå­—ï¼Œé¿å…å’Œå¯¹è±¡åŽŸæœ¬é‡å¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨Symbolå®žçŽ°ï¼‰\n\nç„¶åŽæˆ‘ä»¬ç»‘å®šthisçš„åŠŸèƒ½å°±å®žçŽ°ã€‚è¿˜æœ‰ä¼ é€’å‚æ•°ï¼Œè¿™ä¸ªä¹Ÿå¥½åŠžã€‚\n```\nFunction.prototype.call = function () {\n  const [ctx, ...args] = arguments;\n  ctx.fn = this;\n  ctx.fn(...args);\n  delete ctx.fn;\n}\n// è¿™é‡Œå…¶å®žç”¨äº†ES6çš„è¯­æ³•ï¼Œä½†æ˜¯ä¸»è¦ä¸ºäº†æ›´å¥½çš„è¯´æ˜Žæ•´ä¸ªå®žçŽ°è¿‡ç¨‹ï¼Œç†è§£åŽŸç†å°±å¥½\n```\n\nè¿™é‡Œé€šè¿‡`arguments`å¯¹è±¡åŽ»èŽ·å–ä¼ è¿›æ¥çš„å‚æ•°ä»¥åŠ`this`ã€‚\n\nç„¶åŽè€ƒè™‘åˆ°å‡½æ•°å¯èƒ½æ˜¯æœ‰è¿”å›žå€¼çš„ï¼Œæ‰€ä»¥`ctx.fn()`çš„æ‰§è¡Œç»“æžœä¹Ÿéœ€è¦è¿”å›žã€‚åŒæ—¶thiså¯èƒ½ä¸ºnullï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å°†thisæŒ‡å‘windowã€‚\n\næ‰€ä»¥æˆ‘ä»¬å†æ¥è°ƒæ•´ä¸€ä¸‹ï¼š\n```\nFunction.prototype.call = function () {\n  const [ctx, ...args] = arguments;\n  ctx.fn = this || window;\n  const result = ctx.fn(...args);\n  delete ctx.fn;\n  return result;\n}\n```\n\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±æ¨¡æ‹Ÿå®žçŽ°äº†ä¸€ä¸ªcallæ–¹æ³•ã€‚\n\n### applyæ¨¡æ‹Ÿå®žçŽ°\n\næŽ¥ä¸Šæ–‡ï¼Œæˆ‘ä»¬å†æ¥å®žçŽ°ä¸€ä¸ªapplyå°±å¾ˆå®¹æ˜“äº†ã€‚æˆ‘ä»¬ç›´æŽ¥ä¸Šä»£ç ï¼š\n```\nFunction.prototype.apply = function () {\n  const [ctx, args] = arguments; // argsåŒºåˆ«\n  ctx.fn = this || window;\n  const result = ctx.fn(...args);\n  delete ctx.fn;\n  return result;\n}\n```\n\n### bindæ¨¡æ‹Ÿå®žçŽ°\n\nbindä¼šè¿”å›žä¸€ä¸ªæ–°å‡½æ•°ï¼Œæ–°å‡½æ•°æ‰§è¡Œæ—¶çš„thisæ˜¯bindæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚\n\næ ¹æ®è¿™äº›ç‰¹å¾ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³åˆ°ä½¿ç”¨applyå¸®åŠ©å®žçŽ°ã€‚è¿˜æ˜¯ä»¥ä¸Šé¢çš„`getName`å‡½æ•°ä¸ºä¾‹ã€‚\n```\nFunction.prototype.bind = function () {\n  const [ctx, ...args] = arguments;\n  const self = this; // è¿™é‡Œçš„thiså³getNameå‡½æ•°\n  return function () {\n    self.applay(ctx, args);\n  }\n}\n```\n\nè¿™æ ·ï¼Œç»‘å®šthisçš„åŠŸèƒ½æˆ‘ä»¬å°±å®žçŽ°äº†ã€‚ç„¶åŽbindå…¶å®žæ˜¯å¯ä»¥ä¼ é€’å‚æ•°çš„ï¼Œbindè¿”å›žçš„å‡½æ•°è°ƒç”¨çš„æ—¶å€™ä¹Ÿæ˜¯å¯ä»¥å†ä¼ é€’å‚æ•°çš„ï¼ŒåŒæ—¶è°ƒç”¨bindçš„æ–¹æ³•å¯èƒ½æ˜¯æœ‰è¿”å›žå€¼çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¤„ç†ä¸€ä¸‹\n```\nFunction.prototype.bind = function () {\n  const [ctx, ...args] = arguments;\n  const self = this; // è¿™é‡Œçš„thiså³getNameå‡½æ•°\n  return function () {\n    // è¿™ä¸‹é¢çš„argumentså…¶å®žæ˜¯è°ƒç”¨bindè¿”å›žçš„å‡½æ•°ï¼Œå½“è¿™ä¸ªå‡½æ•°è°ƒç”¨æ—¶ä¼ é€’çš„å‚æ•°\n    // åŒæ—¶è¿”å›žå‡½æ•°æ‰§è¡Œç»“æžœ\n    return self.applay(ctx, args.concat(arguments));\n  }\n}\n```\n\nbindå‡½æ•°è¿˜æœ‰ä¸€ä¸ªç‰¹æ€§ï¼Œå°±æ˜¯bindè¿”å›žçš„å‡½æ•°æ˜¯å¯ä»¥ä½œä¸ºæž„é€ å‡½æ•°çš„ï¼Œå½“å®ƒä½œä¸ºæž„é€ å‡½æ•°æ—¶ï¼Œå®ƒä¹‹å‰ç»‘å®šçš„thisä¼šè¢«å¿½ç•¥ã€‚\nä¸ºäº†ä¿è¯bindè¿”å›žçš„å‡½æ•°èƒ½å¤Ÿç»§æ‰¿åˆ°è°ƒç”¨å‡½æ•°çš„åŽŸåž‹(å³getNameçš„åŽŸåž‹)ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹bindè¿”å›žå‡½æ•°çš„åŽŸåž‹ä¸ºthisçš„åŽŸåž‹(å³getNameçš„åŽŸåž‹)ã€‚\n\næˆ‘ä»¬å†æ¥å°è¯•ä¸€ä¸‹ï¼š\n```\nFunction.prototype.bind = function () {\n  const [ctx, args] = arguments;\n  const self = this;\n  const fBond = function () {\n    // æ³¨æ„è¿™é‡Œçš„thisä¸æ˜¯getNameäº†ï¼Œè€Œæ˜¯è°ƒç”¨bindä¹‹åŽæ–¹æ³•çš„this\n    // const newGetName = getName.bind(this)\n    // const n = new newGetName()\n    // thiså°±æ˜¯n\n    return self.apply(this instanceof fBond ? this : ctx, args.concat(arguments));\n  }\n  fBond.prototype = self.prototype;\n  return fBond;\n}\n```\n\nç„¶åŽä¸ºäº†ä¸ä¼šä¿®æ”¹åŽŸæ¥å‡½æ•°çš„åŽŸåž‹ï¼Œå³getNameçš„åŽŸåž‹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªä¸­é—´å‡½æ•°æ¥ç»§æ‰¿ã€‚\n\n```\nFunction.prototype.bind = function () {\n  if (typeof this !== \"function\") {\n    throw new Error(\"Must be function to call bind\");\n  }\n\n  const [ctx, args] = arguments;\n  const self = this;\n  var fNOP = function () {};\n  const fBond = function () {\n    return self.apply(this instanceof fBond ? this : ctx, args.concat(arguments));\n  }\n  // è¿™é‡Œå°†selfçš„åŽŸåž‹èµ‹å€¼ç»™æ¥fNOPï¼ŒåŽé¢fBondçš„åŽŸåž‹èµ‹å€¼ä¸ºnew fNOP()ï¼Œè¿™æ ·å°±å’Œselfçš„åŽŸåž‹æ–­å¼€äº†\n  // åŽé¢å†ä¿®æ”¹fBondçš„åŽŸåž‹ä¹Ÿä¸ä¼šå½±å“åˆ°selfï¼Œå³getName.prototype\n  fNOP.prototype = self.prototype;\n  fBond.prototype = new fNOP();\n  return fBond;\n}\n```\n\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±å®žçŽ°äº†ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„bindæ–¹æ³•äº†ã€‚\n\n### å‰ç«¯æ”¶è—å®¶ï¼ˆå¾®ä¿¡å·: fedailyï¼‰\n##### æ”¶é›†å…¨ç½‘ä¼˜ç§€å‰ç«¯æŠ€æœ¯èµ„è®¯ï¼Œä¸Žä½ åˆ†äº«ï¼Œå…±åŒæˆé•¿ã€‚\n","tags":["JavaScript"]},{"title":"ç¬¬17æœŸ Vue3.0ä¹‹å‰ä½ å¿…é¡»çŸ¥é“çš„TypeScriptå®žæˆ˜æŠ€å·§ & ç§»åŠ¨ç«¯å¼€å‘çš„å…¼å®¹é€‚é…ä¸Žæ€§èƒ½ä¼˜åŒ–å¹²è´§åˆ†äº«","url":"/hotlink17/","content":"\n[å…³äºŽNode.jsä¸­å†…å­˜ç®¡ç†çš„æ€è€ƒä¸Žå®žè·µ](https://mp.weixin.qq.com/s?__biz=MzI1ODk2Mjk0Nw==&mid=2247485359&idx=2&sn=01e110c4d6f56b1415125eccc19524c2&scene=21#wechat_redirect)\n\néšç€Nodeçš„å‘å±•ï¼ŒJavaScriptçš„è¿è¡Œå·²ç»ä¸å†å±€é™äºŽè¿è¡Œåœ¨æµè§ˆå™¨ä¸­äº†ï¼ŒNodeåœ¨æœåŠ¡ç«¯çš„åº”ç”¨ä½¿å¾—è¶Šæ¥è¶Šå¤šçš„é—®é¢˜ä¹Ÿæ˜¾çŽ°å‡ºæ¥ã€‚å¯¹äºŽåˆšæŽ¥è§¦JavaScriptçš„å¼€å‘è€…æ¥è¯´ï¼ŒåŸºæœ¬ä¸Šå¾ˆå°‘ä¼šæƒ³åˆ°å†…å­˜åˆ†é…æˆ–è€…å†…å­˜æ³„éœ²çš„é—®é¢˜ï¼Œä¸ºäº†è·Ÿä¸Šæ½®æµï¼Œå°±è®²è§£ä¸€ä¸‹Nodeæ˜¯å¦‚ä½•åˆç†é«˜æ•ˆåœ°ä½¿ç”¨å†…å­˜ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚\n\n[Vue3.0ä¹‹å‰ä½ å¿…é¡»çŸ¥é“çš„TypeScriptå®žæˆ˜æŠ€å·§](https://mp.weixin.qq.com/s?__biz=Mzg5NDEyMzA2NQ==&mid=2247485138&idx=1&sn=6efe935ee8578a5b71ad64d2300179c2&scene=21#wechat_redirect)\n\nå¾ˆå¤šäººå¯¹TypeScriptçš„ä½¿ç”¨è¿˜åœç•™åœ¨åŸºæœ¬æ“ä½œä¸Š,å…¶å®ž TypeScript çš„ç‰¹æ€§éžå¸¸å¼ºå¤§,æˆ‘ä»¬åˆ©ç”¨å¥½è¿™äº›ç‰¹æ€§å¯ä»¥æœ‰æ•ˆåœ°æé«˜ä»£ç è´¨é‡ã€åŠ é€Ÿå¼€å‘æ•ˆçŽ‡ï¼Œä»Šå¤©å°±ä»‹ç» 9 ä¸ªéžå¸¸å®žç”¨çš„ TypeScript æŠ€å·§æˆ–è€…ç‰¹æ€§ã€‚\n\n[ç§»åŠ¨ç«¯å¼€å‘çš„å…¼å®¹é€‚é…ä¸Žæ€§èƒ½ä¼˜åŒ–å¹²è´§åˆ†äº«](https://mp.weixin.qq.com/s?__biz=MzI5MjUxNjA4Mw==&mid=2247486891&idx=2&sn=90a069d25967dfcf8212fa8ab3b74883&scene=21#wechat_redirect)\n\næœ¬æ–‡æ˜¯å†…éƒ¨çš„ä¸€æ¬¡åˆ†äº«æ²‰æ·€ï¼Œåå‘åŸºç¡€ä½†æ˜¯æ¶‰åŠäº†ä¸€äº›æœ‰æ„æ€çš„ç»†èŠ‚ï¼Œæ–‡ç¬”æœ‰é™ï¼Œæ‰ç–å­¦æµ…ï¼Œæ–‡ä¸­è‹¥æœ‰ä¸æ­£ä¹‹å¤„ï¼Œä¸‡æœ›å‘ŠçŸ¥ã€‚\n\n[å¤§åŽ‚é¢è¯•è¿‡ç¨‹å¤ç›˜(å¾®ä¿¡/é˜¿é‡Œ/å¤´æ¡,é™„ç­”æ¡ˆç¯‡)](https://mp.weixin.qq.com/s?__biz=MzI0MzIyMDM5Ng==&mid=2649826916&idx=1&sn=f2c0b39cafde9bf73d0bc78052b0e16b&scene=21#wechat_redirect)\n\næœ¬äººå‰ç«¯ï¼Œ3å¹´ç»éªŒï¼Œç”±äºŽä¸ªäººçš„åŽŸå› ï¼Œå†³å®šè·³æ§½ï¼ŒäºŽæ˜¯å¤§æ¦‚3æœˆå¼€å§‹æ‰¾å·¥ä½œï¼Œæ€»åŽ†æ—¶å¤§æ¦‚2ä¸ªæœˆï¼Œé¢è¯•äº†å¾®ä¿¡/é˜¿é‡Œ/å¤´æ¡ï¼Œä¸‰å®¶éƒ½æ‹¿åˆ°äº†offerï¼Œæ¥åˆ†äº«ä¸€ä¸‹é¢ç»ã€‚\n\n[Nodeä½¿ç”¨ç«ç„°å›¾ä¼˜åŒ–CPUçˆ†æ¶¨](https://mp.weixin.qq.com/s?__biz=MjM5MTA1MjAxMQ==&mid=2651236559&idx=1&sn=63a1f3bc17e47f4c1fc96ba1a56ae49c&scene=21#wechat_redirect)\n\nè¯ä¸å¤šè¯´ï¼Œå…ˆä¸Šå›¾ï¼Œè¿™æ˜¯å¾—åˆ°Appé™æ€èµ„æºæ›´æ–°æœåŠ¡çš„CPUä½¿ç”¨çŽ‡ç›‘æŽ§ï¼Œå¯ä»¥çœ‹åˆ°7æœˆ2å·åˆ°7æœˆ3å·åŽï¼Œcpuä½¿ç”¨çŽ‡å‘ç”Ÿäº†çˆ†æ¶¨ï¼Œåœ¨å…«ç‚¹çš„æ—©é«˜å³°å’Œä¸‹åˆå…­ç‚¹çš„æ™šé«˜å³°ï¼Œå‡ ä¹Žå¯ä»¥æŠŠcpuæ‰“æ»¡ã€‚å‘çŽ°é—®é¢˜å½“æœºç«‹æ–­ï¼Œå‡çº§é…ç½®å°†2æ ¸4gå‡çº§è‡³4æ ¸8gï¼Œå…ˆä¿è¯æœåŠ¡ç¨³å®šï¼Œæˆ‘ä»¬å†ç»§ç»­æŸ¥é—®é¢˜ã€‚\n\n### å‰ç«¯æ”¶è—å®¶ï¼ˆå¾®ä¿¡å·: fedailyï¼‰\n##### æ”¶é›†å…¨ç½‘ä¼˜ç§€å‰ç«¯æŠ€æœ¯èµ„è®¯ï¼Œä¸Žä½ åˆ†äº«ï¼Œå…±åŒæˆé•¿ã€‚\n","tags":["ç²¾é€‰"]},{"title":"ç¬¬16æœŸ ä»Žé›¶å®žçŽ°webpackçƒ­æ›´æ–° & Google æŠ€æœ¯é¢è¯•å…¨è®°å½•","url":"/hotlink16/","content":"\n[Google æŠ€æœ¯é¢è¯•å…¨è®°å½•](https://mp.weixin.qq.com/s?__biz=MzIyMDkwODczNw==&mid=2247486410&idx=1&sn=bf9f6d79f1f96ff7af91af7972c70982&scene=21#wechat_redirect)\n\nåœ¨é€šè¿‡äº†GoogleæŠ€æœ¯é¢ä¹‹åŽï¼Œæˆ‘ä¸­é€”é€€å‡ºäº†åº”è˜æµç¨‹ã€‚æˆ‘çŸ¥é“ä½ ä¼šæ€Žä¹ˆæƒ³ï¼šâ€œä½ ç–¯äº†å—ï¼Ÿï¼è°ä¼šä¸­é€”é€€å‡ºGoogleé¢è¯•ï¼Ÿâ€\nè¿™ç¯‡åšæ–‡å°†è®¨è®ºæˆ‘åœ¨Googleé¢è¯•ä¸­çš„ç»åŽ†ï¼Œä»¥åŠé€šè¿‡æŠ€æœ¯é¢æµç¨‹çš„æŠ€å·§ï¼ˆé€‚ç”¨äºŽä»»ä½•å…¬å¸çš„æŠ€æœ¯é¢ï¼‰ã€‚\n\n[å…³äºŽå‰ç«¯å®‰å…¨çš„ 13 ä¸ªæç¤º](https://mp.weixin.qq.com/s?__biz=MzI3NzIzMDY0NA==&mid=2247488632&idx=1&sn=503c5d1ee84919df1cb39b8837c53e85&scene=21#wechat_redirect)\n\næ— è®ºä½ æ˜¯ React.jsã€Angularã€Vue.js ç¨‹åºå‘˜è¿˜æ˜¯å‰ç«¯é¡µé¢ä»”ï¼Œä½ çš„ä»£ç éƒ½å¯ä»¥æˆä¸ºå¼•è¯±é»‘å®¢å…¥ä¾µçš„å¤§é—¨ã€‚\nä½œä¸ºå‰ç«¯å¼€å‘äººå‘˜ï¼Œæˆ‘ä»¬æœ€å…³å¿ƒçš„æ˜¯æ€§èƒ½ã€SEO å’Œ UI/UXâ€”â€”å®‰å…¨æ€§å´ç»å¸¸è¢«å¿½ç•¥ã€‚\n\n[æ¢ä¸ªè§’åº¦å…¥é—¨ K8s](https://mp.weixin.qq.com/s?__biz=MzIzOTU0NTQ0MA==&mid=2247495778&idx=1&sn=77c2c5662b0a98da9521848297d3f371&scene=21#wechat_redirect)\n\nåŽ»å¹´ä¸‹åŠå¹´ï¼Œæˆ‘åšäº†ä¸€æ¬¡è½¬å²—ï¼Œå¼€å§‹æŽ¥è§¦åˆ° kubernetesï¼Œè™½ç„¶å¯¹ K8s çš„è®¤è¯†è¿˜éžå¸¸çš„ä¸å…¨é¢ï¼Œä½†æ˜¯éžå¸¸æƒ³åˆ†äº«ä¸€ä¸‹è‡ªå·±çš„ä¸€äº›æ”¶èŽ·ï¼Œå¸Œæœ›é€šè¿‡æœ¬æ–‡èƒ½å¤Ÿå¸®åŠ©å¤§å®¶å¯¹ K8s æœ‰ä¸€ä¸ªå…¥é—¨çš„äº†è§£ã€‚æ–‡ä¸­æœ‰ä¸å¯¹çš„åœ°æ–¹ï¼Œè¿˜è¯·å„ä½è€å¸æœºä»¬å¸®åŠ©æŒ‡ç‚¹çº æ­£ã€‚\n\n[Vue SSR å³æ—¶ç¼–è¯‘æŠ€æœ¯](https://mp.weixin.qq.com/s?__biz=MjM5MTA1MjAxMQ==&mid=2651236544&idx=2&sn=8c684c77c6d7b8403409128d4b32dc83&scene=21#wechat_redirect)\n\nå½“æˆ‘ä»¬åœ¨æœåŠ¡ç«¯æ¸²æŸ“ Vue åº”ç”¨æ—¶ï¼Œæ— è®ºæœåŠ¡å™¨æ‰§è¡Œå¤šå°‘æ¬¡æ¸²æŸ“ï¼Œå¤§éƒ¨åˆ† VNode æ¸²æŸ“å‡ºçš„å­—ç¬¦ä¸²æ˜¯ä¸å˜çš„ï¼Œå®ƒä»¬æœ‰ä¸€äº›æ¥è‡ªäºŽæ¨¡æ¿çš„é™æ€ htmlï¼Œå¦ä¸€äº›åˆ™æ¥è‡ªæ¨¡æ¿åŠ¨æ€æ¸²æŸ“çš„èŠ‚ç‚¹ï¼ˆè™½ç„¶åœ¨å®¢æˆ·ç«¯åŠ¨æ€èŠ‚ç‚¹æœ‰å¯èƒ½ä¼šå˜åŒ–ï¼Œä½†æ˜¯åœ¨æœåŠ¡ç«¯å®ƒä»¬æ˜¯ä¸å˜çš„ï¼‰ã€‚å°†è¿™ä¸¤ç§ç±»åž‹çš„èŠ‚ç‚¹æå–å‡ºæ¥ï¼Œä»…åœ¨æœåŠ¡ç«¯æ¸²æŸ“çœŸæ­£åŠ¨æ€çš„èŠ‚ç‚¹ï¼ˆserverPrefetch é¢„å–æ•°æ®ç›¸å…³è”çš„èŠ‚ç‚¹ï¼‰ï¼Œå¯ä»¥æ˜¾è‘—çš„æå‡æœåŠ¡ç«¯çš„æ¸²æŸ“æ€§èƒ½ã€‚\n\n[Nginxä¸ºä»€ä¹ˆå¿«åˆ°æ ¹æœ¬åœä¸ä¸‹æ¥ï¼Ÿ](https://mp.weixin.qq.com/s?__biz=MzAxMTkwODIyNA==&mid=2247495132&idx=1&sn=c9e6858e2858e4cc9d029325988d7b48&scene=21#wechat_redirect)\n\nNginx æ˜¯ä¸€ä¸ªå…è´¹çš„ï¼Œå¼€æºçš„ï¼Œé«˜æ€§èƒ½çš„ HTTP æœåŠ¡å™¨å’Œåå‘ä»£ç†ï¼Œä»¥åŠ IMAP / POP3 ä»£ç†æœåŠ¡å™¨ã€‚\nNginx ä»¥å…¶é«˜æ€§èƒ½ï¼Œç¨³å®šæ€§ï¼Œä¸°å¯Œçš„åŠŸèƒ½ï¼Œç®€å•çš„é…ç½®å’Œä½Žèµ„æºæ¶ˆè€—è€Œé—»åã€‚æœ¬æ–‡ä»Žåº•å±‚åŽŸç†åˆ†æž Nginx ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼\n\n[ä»Žé›¶å®žçŽ°webpackçƒ­æ›´æ–°](https://mp.weixin.qq.com/s?__biz=MzI2NTk2NzUxNg==&mid=2247485031&idx=2&sn=0a252248c75edf31cfd0f1ba04c29133&scene=21#wechat_redirect)\n\næœ¬æ–‡ä»¥å‰–æžwebpack-dev-serveræºç ï¼Œä»Žé›¶å¼€å§‹å®žçŽ°ä¸€ä¸ªwebpackçƒ­æ›´æ–°HMRï¼Œæ·±å…¥äº†è§£webpack-dev-serverã€webpack-dev-middlewareã€webpack-hot-middlewareçš„å®žçŽ°æœºåˆ¶ï¼Œå½»åº•æžæ‡‚ä»–ä»¬çš„åŽŸç†ï¼Œåœ¨é¢è¯•è¿‡ç¨‹ä¸­è¿™ä¸ªçŸ¥è¯†ç‚¹èƒ½ç­”çš„éžå¸¸å‡ºå½©ï¼Œåœ¨æ­å»ºè„šæ‰‹æž¶è¿‡ç¨‹ä¸­è¿™å—èƒ½å¾—å¿ƒåº”æ‰‹ã€‚çŸ¥å…¶ç„¶å¹¶çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œæ›´ä¸Šä¸€å±‚æ¥¼ã€‚\n\n### å‰ç«¯æ”¶è—å®¶ï¼ˆå¾®ä¿¡å·: fedailyï¼‰\n##### æ”¶é›†å…¨ç½‘ä¼˜ç§€å‰ç«¯æŠ€æœ¯èµ„è®¯ï¼Œä¸Žä½ åˆ†äº«ï¼Œå…±åŒæˆé•¿ã€‚\n","tags":["ç²¾é€‰"]},{"title":"å¦‚ä½•å®žçŽ°ä¸€ä¸ªLRUç®—æ³•","url":"/lru/","content":"\nLRUç®—æ³•æ˜¯æŒ‡æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•ã€‚\n\né‚£ä¹ˆå¦‚ä½•å®žçŽ°è¿™ç§ç®—æ³•å‘¢ï¼Ÿæˆ‘ä»¬ä»¥æ•°ç»„ä¸ºä¾‹å…ˆæ¥åˆ†æžä¸€ä¸‹æ€è·¯ï¼š\n\nå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬è§„å®šæ•°ç»„è¶Šé å‰é¢çš„å…ƒç´ ä»£è¡¨å³å°†æ·˜æ±°çš„å…ƒç´ ï¼Œè€Œæ•°ç»„æœ€åŽé¢å…ƒç´ ä»£è¡¨æœ€è¿‘æœ‰ä½¿ç”¨è¿‡çš„æ•°æ®ã€‚\n\nå½“æˆ‘ä»¬ä»Žç¼“å­˜ä¸­è®¿é—®ä¸€ä¸ªæ•°æ®çš„æ—¶å€™ï¼š\n1. å¦‚æžœè¯¥æ•°æ®å­˜åœ¨ï¼Œåˆ™å°†è¯¥æ•°æ®æ”¾åˆ°æ•°ç»„æœ€åŽé¢ï¼Œå¹¶è¿”å›žè¯¥æ•°æ®\n2. å¦‚æžœæ•°æ®ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›ž-1\n\nå½“æˆ‘ä»¬å¾€ç¼“å­˜ä¸­æ·»åŠ ä¸€ä¸ªæ•°æ®çš„æ—¶å€™ï¼š\n1. å¦‚æžœè¯¥æ•°æ®å­˜åœ¨ï¼Œåˆ™åˆ é™¤å¯¹åº”çš„å…ƒç´ (å…¶å®žæœ¬æ„æ˜¯è¦å°†è¯¥æ•°æ®ç§»åŠ¨åˆ°æ•°ç»„æœ€åŽé¢ï¼Œè¿™é‡Œç›´æŽ¥å…ˆåˆ é™¤ï¼ŒåŽé¢å†æ·»åŠ )\n2. åˆ¤æ–­æ•°ç»„é•¿åº¦æ˜¯å¦è¶…è¿‡é™åˆ¶\n3. å¦‚æžœè¶…è¿‡é™åˆ¶ï¼Œåˆ™åˆ é™¤æ•°ç»„æœ€å‰é¢çš„å…ƒç´ ï¼Œå³ä¸‹æ ‡ä¸º0çš„å…ƒç´ \n4. å°†æ•°æ®æ·»åŠ åˆ°æ•°ç»„æœ€åŽé¢\n\n**é€šä¿—ç‚¹æ¥è¯´ï¼Œå°±æ˜¯åªè¦è¿™æ¡æ•°æ®è¢«è®¿é—®äº†æˆ–è€…æ˜¯æ·»åŠ åˆ°ç¼“å­˜ä¸­ï¼Œæˆ‘ä»¬éƒ½å°†å®ƒæ”¾åˆ°æ•°ç»„æœ€åŽé¢ã€‚**\n\n**å¦‚æžœæ·»åŠ æ—¶å€™å®¹é‡å·²ç»æ»¡äº†ï¼Œå°±æŠŠæ•°ç»„æœ€å‰é¢çš„å…ƒç´ åˆ é™¤ã€‚**\n\næ ¹æ®è¿™ç§æ€è·¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®žçŽ°ä¸€ä¸ªLRUçš„ç®—æ³•ã€‚å¯ä»¥ä½¿ç”¨é“¾è¡¨ã€æ•°ç»„ã€Mapç­‰ç­‰åŽ»å®žçŽ°ã€‚\n\nè¿™é‡Œä»¥ä¸€ä¸ªæ•°ç»„ä¸ºä¾‹ï¼š(è¿™ç§æ–¹å¼å…¶å®žæ•ˆçŽ‡å¾ˆå·®ï¼Œåªä¸ºäº†ç†è§£æ€è·¯ï¼Œæ ¹æ®è¿™ä¸ªæ€è·¯ï¼Œä½ å¯ä»¥ç”¨é“¾è¡¨ç­‰å…¶ä»–æ›´é«˜æ•ˆçš„æ–¹å¼åŽ»å®žçŽ°)\n```\nclass LRUCache {\n  constructor(capacity) {\n    this.pool = [];\n    this.capacity = capacity;\n  }\n\n  hasKey(key) {\n    return this.pool.findIndex(item => item.key === key);\n  };\n\n  put(key, value) {\n    // å¦‚æžœkeyå­˜åœ¨ï¼Œå°±åˆ é™¤è¿™ä¸ªå…ƒç´ ï¼Œå› ä¸ºåŽé¢ä¼šç›´æŽ¥æ·»åŠ åˆ°æ•°ç»„æœ€åŽé¢\n    const index = this.hasKey(key);\n    if (index >= 0) {\n      this.pool.splice(index, 1);\n    }\n\n    // è¶…è¿‡å®¹é‡å°±æŠŠç¬¬ä¸€ä¸ªæ‰”æŽ‰\n    if (this.pool.length >= this.capacity) {\n      this.pool.shift();\n    }\n    this.pool.push({ key, value });\n  }\n\n  get(key) {\n    // è®¿é—®äº†æŸä¸ªkeyï¼Œå°±éœ€è¦æŠŠè¿™ä¸ªkeyå¯¹åº”çš„å…ƒç´ æ”¾åˆ°æ•°ç»„æœ€åŽé¢\n    const index = this.hasKey(key);\n    const rtv = this.pool[index];\n    if (index >= 0) {\n      this.pool.splice(index, 1);\n      this.pool.push(rtv);\n      return rtv.value;\n    }\n    return -1;\n  }\n}\n```\n","tags":["ç®—æ³•"]},{"title":"ç¬¬15æœŸ ä¸ºæ–°çš„Facebook.comé‡å»ºæˆ‘ä»¬çš„æŠ€æœ¯æ ˆ & HTTP/3åŽŸç†ä¸Žå®žè·µ","url":"/hotlink15/","content":"\n[HTTP/3åŽŸç†ä¸Žå®žè·µ](https://mp.weixin.qq.com/s?__biz=MzI4NzEyMjUxMA==&mid=2649069145&idx=1&sn=6aab52cf10dbbec2a0d5b4a0385f3780&scene=21#wechat_redirect)\n\n2015 å¹´ HTTP/2 æ ‡å‡†å‘è¡¨åŽï¼Œå¤§å¤šæ•°ä¸»æµæµè§ˆå™¨ä¹ŸäºŽå½“å¹´å¹´åº•æ”¯æŒè¯¥æ ‡å‡†ã€‚æ­¤åŽï¼Œå‡­å€Ÿç€å¤šè·¯å¤ç”¨ã€å¤´éƒ¨åŽ‹ç¼©ã€æœåŠ¡å™¨æŽ¨é€ç­‰ä¼˜åŠ¿ï¼ŒHTTP/2 å¾—åˆ°äº†è¶Šæ¥è¶Šå¤šå¼€å‘è€…çš„é’çã€‚ä¸çŸ¥ä¸è§‰çš„ HTTP å·²ç»å‘å±•åˆ°äº†ç¬¬ä¸‰ä»£ï¼Œé¹…åŽ‚ä¹Ÿç´§è·ŸæŠ€æœ¯æ½®æµï¼Œå¾ˆå¤šé¡¹ç›®ä¹Ÿåœ¨é€æ¸ä½¿ç”¨ HTTP/3ã€‚æœ¬æ–‡åŸºäºŽ QQå…´è¶£éƒ¨è½æŽ¥å…¥ HTTP/3 çš„å®žè·µï¼ŒèŠä¸€èŠ HTTP/3 çš„åŽŸç†ä»¥åŠä¸šåŠ¡æŽ¥å…¥çš„æ–¹å¼ã€‚\n\n[ä¸ºæ–°çš„Facebook.comé‡å»ºæˆ‘ä»¬çš„æŠ€æœ¯æ ˆ](https://mp.weixin.qq.com/s?__biz=MjM5MTA1MjAxMQ==&mid=2651236491&idx=1&sn=16ce83f02ecb7eefee0b1cb58d971c27&scene=21#wechat_redirect)\n\nå½“æˆ‘ä»¬è€ƒè™‘å¦‚ä½•æž„å»ºä¸€ä¸ªæ–°çš„ç½‘ç»œåº”ç”¨â€”ä¸€ä¸ªä¸ºçŽ°ä»£æµè§ˆå™¨è®¾è®¡çš„ã€å…·æœ‰ç”¨æˆ·å¯¹Facebookï¼ˆæˆ‘ä»¬å·²çŸ¥çš„ï¼‰æ‰€æœ‰æœŸæœ›çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬çŽ°æœ‰çš„æŠ€æœ¯æ ˆæ— æ³•æ”¯æŒæˆ‘ä»¬æ‰€éœ€è¦çš„ç±»ä¼¼äºŽæ¡Œé¢åº”ç”¨çš„æ„Ÿè§‰å’Œæ€§èƒ½ã€‚å®Œå…¨é‡å†™æ˜¯éžå¸¸ç½•è§çš„ï¼Œä½†åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äºŽè¿‡åŽ»åå¹´æ¥WebæŠ€æœ¯å‘ç”Ÿäº†å¾ˆå¤šå˜åŒ–ï¼Œæˆ‘ä»¬çŸ¥é“è¿™æ˜¯æˆ‘ä»¬å®žçŽ°æ€§èƒ½å’Œæœªæ¥å¯æŒç»­å‘å±•ç›®æ ‡çš„å”¯ä¸€é€”å¾„ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±åˆ†äº«ä¸€ä¸‹æˆ‘ä»¬åœ¨é‡æž„Facebook.comæ—¶çš„ç»éªŒæ•™è®­ï¼Œä½¿ç”¨Reactï¼ˆä¸€ç§ç”¨äºŽæž„å»ºç”¨æˆ·ç•Œé¢çš„å£°æ˜Žå¼JavaScriptåº“ï¼‰å’ŒRelayï¼ˆReactçš„GraphQLå®¢æˆ·ç«¯ï¼‰æ¥é‡æž„Facebook.comã€‚\n\n[HTTP æ— çŠ¶æ€ä¸­çš„ \"çŠ¶æ€\" åˆ°åº•æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ](https://mp.weixin.qq.com/s?__biz=MjM5MDc4MzgxNA==&mid=2458454562&idx=1&sn=a5fe5f7f2850119d7ddf6f3ba22f20e5&scene=21#wechat_redirect)\n\næœ€è¿‘åœ¨å¥½å¥½äº†è§£httpï¼Œå‘çŽ°å¯¹ä»‹ç»httpçš„ç¬¬ä¸€å¥è¯ã€httpåè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œæ— è¿žæŽ¥çš„ã€‘å°±æ— æ³•ç†è§£äº†ï¼šæ— çŠ¶æ€çš„ã€çŠ¶æ€ã€‘åˆ°åº•æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ\n\n[å›¾è§£ HTTP ç¼“å­˜](https://mp.weixin.qq.com/s?__biz=MzI0NTE5NzYyMw==&mid=2247484110&idx=1&sn=23cd33596d6f4a6a6b71b852a1b6c2c6&scene=21#wechat_redirect)\n\nHTTP çš„ç¼“å­˜æœºåˆ¶ï¼Œå¯ä»¥è¯´è¿™æ˜¯å‰ç«¯å·¥ç¨‹å¸ˆéœ€è¦æŽŒæ¡çš„é‡è¦çŸ¥è¯†ç‚¹ä¹‹ä¸€ã€‚æœ¬æ–‡å°†é’ˆå¯¹ HTTP ç¼“å­˜æ•´ä½“çš„æµç¨‹åšä¸€ä¸ªè¯¦ç»†çš„è®²è§£ï¼Œäº‰å–åšåˆ°å¤§å®¶è¯»å®Œæ•´ç¯‡æ–‡ç« åŽï¼Œå¯¹ç¼“å­˜æœ‰ä¸€ä¸ªæ•´ä½“çš„äº†è§£ã€‚\n\n[é¢è¯•é¢˜ï¼šè¯´è¯´äº‹ä»¶å¾ªçŽ¯æœºåˆ¶(æ»¡åˆ†ç­”æ¡ˆæ¥äº†)](https://mp.weixin.qq.com/s?__biz=MzI2NTk2NzUxNg==&mid=2247485017&idx=2&sn=817e8b5d78fe8d46a2d8e62bbe870c50&scene=21#wechat_redirect)\n\n1. å…ˆè¯´åŸºæœ¬çŸ¥è¯†ç‚¹ï¼Œå®ä»»åŠ¡ã€å¾®ä»»åŠ¡æœ‰å“ªäº›\n2. è¯´äº‹ä»¶å¾ªçŽ¯æœºåˆ¶è¿‡ç¨‹ï¼Œè¾¹è¯´è¾¹ç”»å›¾å‡ºæ¥\n3. è¯´async/awaitæ‰§è¡Œé¡ºåºæ³¨æ„ï¼Œå¯ä»¥æŠŠ chrome çš„ä¼˜åŒ–ï¼Œåšæ³•å…¶å®žæ˜¯è¿åäº†è§„èŒƒçš„ï¼ŒV8 å›¢é˜Ÿçš„PRè¿™äº›è‡ªä¿¡ç‚¹è¯´å‡ºæ¥ï¼Œæ˜¾å¾—4. ä½ å¾ˆå¥½å­¦ï¼Œç†è§£å¾—å¾ˆè¯¦ç»†ï¼Œå¾ˆé€å½»ã€‚\n5. æŠŠnodeçš„äº‹ä»¶å¾ªçŽ¯ä¹Ÿè¯´ä¸€ä¸‹ï¼Œé‡å¤1ã€2ã€3ç‚¹ï¼Œnodeä¸­çš„ç¬¬3ç‚¹è¦è¯´çš„æ˜¯node11å‰åŽçš„äº‹ä»¶å¾ªçŽ¯å˜åŠ¨ç‚¹ã€‚\n\n### å‰ç«¯æ”¶è—å®¶ï¼ˆå¾®ä¿¡å·: fedailyï¼‰\n##### æ”¶é›†å…¨ç½‘ä¼˜ç§€å‰ç«¯æŠ€æœ¯èµ„è®¯ï¼Œä¸Žä½ åˆ†äº«ï¼Œå…±åŒæˆé•¿ã€‚\n","tags":["ç²¾é€‰"]},{"title":"å‡½æ•°å¼ç»„ä»¶ä¸Žç±»ç»„ä»¶æœ‰ä½•ä¸åŒï¼Ÿ","url":"/react-fc-and-class-component-different/","content":"\nè½¬è½½è‡ªï¼šhttps://overreacted.io/zh-hans/how-are-function-components-different-from-classes/\n\n#### ä¸ŽReactç±»ç»„ä»¶ç›¸æ¯”ï¼ŒReactå‡½æ•°å¼ç»„ä»¶ç©¶ç«Ÿæœ‰ä½•ä¸åŒï¼Ÿ\n\nåœ¨è¿‡åŽ»ä¸€æ®µæ—¶é—´é‡Œï¼Œå…¸åž‹çš„å›žç­”æ˜¯ç±»ç»„ä»¶æä¾›äº†æ›´å¤šçš„ç‰¹æ€§ï¼ˆæ¯”å¦‚stateï¼‰ã€‚å½“æœ‰äº†[Hooks](https://reactjs.org/docs/hooks-intro.html)åŽï¼Œç­”æ¡ˆå°±ä¸å†æ˜¯è¿™æ ·äº†ã€‚\n\næˆ–è®¸ä½ æ›¾å¬è¿‡å®ƒä»¬ä¸­çš„æŸä¸€ä¸ªåœ¨æ€§èƒ½ä¸Šçš„è¡¨çŽ°ä¼˜äºŽå¦ä¸€ä¸ªã€‚é‚£æ˜¯å“ªä¸€ä¸ªï¼Ÿå¾ˆå¤šæ­¤ç±»çš„åˆ¤æ–­æ ‡å‡†éƒ½å­˜åœ¨è¿™æ ·é‚£æ ·çš„[ç¼ºé™·ï¼ˆflawedï¼‰](https://medium.com/@dan_abramov/this-benchmark-is-indeed-flawed-c3d6b5b6f97f?source=your_stories_page---------------------------)ï¼Œæ‰€ä»¥æˆ‘ä¼šè°¨æ…Žçœ‹å¾…ä»Žå®ƒä»¬ä¸­[å¾—å‡ºçš„ç»“è®º](https://github.com/ryardley/hooks-perf-issues/pull/2)ã€‚æ€§èƒ½ä¸»è¦å–å†³äºŽä»£ç çš„ä½œç”¨ï¼Œè€Œä¸æ˜¯é€‰æ‹©å‡½æ•°å¼è¿˜æ˜¯ç±»ç»„ä»¶ã€‚åœ¨æˆ‘ä»¬çš„è§‚å¯Ÿä¸­ï¼Œå°½ç®¡ä¼˜åŒ–ç­–ç•¥å„æœ‰ç•¥å¾®[ä¸åŒ](https://reactjs.org/docs/hooks-faq.html#are-hooks-slow-because-of-creating-functions-in-render)ï¼Œä½†æ€§èƒ½å·®å¼‚å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚\n\nåœ¨ä»»ä½•ä¸€ç§æƒ…å†µä¸‹ï¼Œé™¤éžä½ æœ‰å…¶ä»–åŽŸå› å¹¶ä¸”ä¸ä»‹æ„æˆä¸ºæ—©æœŸä½¿ç”¨è€…ï¼Œå¦åˆ™æˆ‘ä»¬[ä¸æŽ¨è](https://reactjs.org/docs/hooks-faq.html#should-i-use-hooks-classes-or-a-mix-of-both)é‡æž„ä½ çŽ°æœ‰çš„ç»„ä»¶ã€‚Hooksè¿˜å¾ˆå¹´è½»ï¼ˆå¦‚åŒ2014å¹´çš„Reactï¼‰ï¼Œå¹¶ä¸”æœ‰äº›â€œæœ€ä½³å®žè·µâ€è¿˜æ²¡æœ‰æ‰¾åˆ°å®ƒä»¬çš„åˆ‡å…¥æ–¹å¼ã€‚\n\né‚£ä¹ˆçŽ°åœ¨æ˜¯ä¸ªä»€ä¹ˆæƒ…å†µï¼ŸReactçš„å‡½æ•°å¼ç»„ä»¶å’Œç±»ç»„ä»¶ä¹‹é—´æ˜¯å¦æœ‰ä»»ä½•æ ¹æœ¬ä¸Šçš„åŒºåˆ«ï¼Ÿå½“ç„¶æœ‰ â€”â€” åœ¨å¿ƒæ™ºæ¨¡åž‹ä¸Šã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†é˜è¿°å®ƒä»¬ä¹‹é—´çš„æœ€å¤§åŒºåˆ«ã€‚ è‡ª2015å¹´æˆ‘ä»¬æŽ¨å‡ºå‡½æ•°å¼ç»„ä»¶ä»¥æ¥ï¼Œå®ƒä¸€ç›´å­˜åœ¨ï¼Œä½†æ˜¯ç»å¸¸è¢«å¿½ç•¥ï¼š\n\n> å‡½æ•°å¼ç»„ä»¶æ•èŽ·äº†æ¸²æŸ“æ‰€ç”¨çš„å€¼ã€‚ï¼ˆFunction components capture the rendered values.ï¼‰\n\nè®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™æ„å‘³ç€ä»€ä¹ˆã€‚\n\n> æ³¨æ„ï¼šè¿™ç¯‡æ–‡ç« ä¸æ˜¯å¯¹å‡½æ•°å¼ç»„ä»¶æˆ–è€…ç±»ç»„ä»¶çš„ä»·å€¼åˆ¤æ–­ã€‚æˆ‘åªæ˜¯åœ¨é˜è¿°åœ¨Reactä¸­è¿™ä¸¤ç§ç¼–ç¨‹æ¨¡åž‹ä¹‹é—´çš„åŒºåˆ«ã€‚å…³äºŽæ›´å¹¿æ³›åœ°é‡‡ç”¨å‡½æ•°å¼ç»„ä»¶çš„é—®é¢˜ï¼Œè¯·æŸ¥çœ‹Hooks FAQã€‚\n\næ€è€ƒè¿™ä¸ªç»„ä»¶:\n\n```\nfunction ProfilePage(props) {\n  const showMessage = () => {\n    alert('Followed ' + props.user);\n  };\n\n  const handleClick = () => {\n    setTimeout(showMessage, 3000);\n  };\n\n  return (\n    <button onClick={handleClick}>Follow</button>\n  );\n}\n```\n\nå®ƒæ¸²æŸ“äº†ä¸€ä¸ªåˆ©ç”¨`setTimeout`æ¥æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚ï¼Œç„¶åŽæ˜¾ç¤ºä¸€ä¸ªç¡®è®¤è­¦å‘Šçš„æŒ‰é’®ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœ`props.user`æ˜¯`Dan`ï¼Œå®ƒä¼šåœ¨ä¸‰ç§’åŽæ˜¾ç¤º`Followed Dan`ã€‚éžå¸¸ç®€å•ã€‚\n\n> è¯·æ³¨æ„ï¼Œåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­æˆ‘æ˜¯å¦ç”¨äº†ç®­å¤´å‡½æ•°æˆ–è€…å‡½æ•°å£°æ˜Žå¹¶ä¸é‡è¦ã€‚function handleClick()ä¹Ÿå°†å®Œå…¨ä»¥åŒæ ·æ–¹å¼æœ‰æ•ˆã€‚\n\nå¦‚æžœæ˜¯ç±»ç»„ä»¶æˆ‘ä»¬æ€Žä¹ˆå†™ï¼Ÿä¸€ä¸ªç®€å•çš„é‡æž„å¯èƒ½å°±è±¡è¿™æ ·ï¼š\n```\nclass ProfilePage extends React.Component {\n  showMessage = () => {\n    alert('Followed ' + this.props.user);\n  };\n\n  handleClick = () => {\n    setTimeout(this.showMessage, 3000);\n  };\n\n  render() {\n    return <button onClick={this.handleClick}>Follow</button>;\n  }\n}\n```\n\né€šå¸¸æˆ‘ä»¬è®¤ä¸ºï¼Œè¿™ä¸¤ä¸ªä»£ç ç‰‡æ®µæ˜¯ç­‰æ•ˆçš„ã€‚äººä»¬ç»å¸¸åœ¨è¿™ä¸¤ç§æ¨¡å¼ä¸­è‡ªç”±çš„é‡æž„ä»£ç ï¼Œä½†æ˜¯å¾ˆå°‘æ³¨æ„åˆ°å®ƒä»¬çš„å«ä¹‰:\n![wtf](https://overreacted.io/1d3c7a341ee3fcadc79df00e7d872e4b/wtf.gif)\n\nç„¶è€Œï¼Œè¿™ä¸¤ä¸ªä»£ç ç‰‡æ®µè¿˜æ˜¯æœ‰ç•¥å¾®çš„ä¸åŒã€‚ ä»”ç»†çš„çœ‹çœ‹å®ƒä»¬ã€‚çŽ°åœ¨çœ‹å‡ºä»–ä»¬çš„ä¸åŒäº†å—ï¼Ÿå°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œæˆ‘èŠ±äº†å¥½ä¸€ä¼šå„¿æ‰çœ‹æ˜Žç™½è¿™ä¸€ç‚¹ã€‚\n\næŽ¥ä¸‹æ¥çš„æ–‡ç« æ˜¯â€œå‰§é€â€ï¼Œå¦‚æžœä½ æƒ³è‡ªå·±æžæ˜Žç™½ï¼Œä½ å¯ä»¥æŸ¥çœ‹è¿™ä¸ª[live demo](https://codesandbox.io/s/pjqnl16lm7)ã€‚ æœ¬æ–‡çš„ç”Ÿè‚²éƒ¨åˆ†è§£é‡Šäº†è¿™é‡Œé¢çš„å·®å¼‚ä»¥åŠé˜è¿°äº†ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦ã€‚\n\nåœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œæˆ‘æƒ³å¼ºè°ƒä¸€ç‚¹ï¼Œæˆ‘æ‰€æè¿°çš„å·®å¼‚ä¸Ž React Hooks å®Œå…¨æ— å…³ã€‚ä¸Šé¢çš„ä¾‹å­ä¸­ç”šè‡³æ²¡æœ‰ä½¿ç”¨ Hooksï¼\n\nå®ƒå…¨éƒ¨æ˜¯å…³äºŽ React ä¸­å‡½æ•°å¼ç»„ä»¶ä¸Žç±»ç»„ä»¶çš„åŒºåˆ«çš„ã€‚å¦‚æžœä½ æ‰“ç®—åœ¨ä½ çš„ React åº”ç”¨ä¸­æ›´é¢‘ç¹åœ°ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶ï¼Œä½ å¯èƒ½éœ€è¦ç†è§£å®ƒã€‚\n\næˆ‘ä»¬å°†é€šè¿‡ React åº”ç”¨ç¨‹åºä¸­çš„ä¸€ä¸ªå¸¸è§é”™è¯¯æ¥è¯´æ˜Žå…¶ä¸­çš„ä¸åŒã€‚\n\n---\n\næ‰“å¼€è¿™ä¸ª [sandbox](https://codesandbox.io/s/pjqnl16lm7) ä¾‹å­ï¼Œ ä½ å°†çœ‹åˆ°ä¸€ä¸ªå½“å‰è´¦å·é€‰æ‹©æ¡†ä»¥åŠä¸¤ä¸ªä¸Šé¢ ProfilePage çš„å®žçŽ° â€”â€” æ¯ä¸ªéƒ½æ¸²æŸ“äº†ä¸€ä¸ª Follow æŒ‰é’®ã€‚\n\nå°è¯•æŒ‰ç…§ä»¥ä¸‹é¡ºåºæ¥åˆ†åˆ«ä½¿ç”¨è¿™ä¸¤ä¸ªæŒ‰é’®ï¼š\n\n1. ç‚¹å‡» å…¶ä¸­æŸä¸€ä¸ª Follow æŒ‰é’®ã€‚\n2. åœ¨3ç§’å†… åˆ‡æ¢ é€‰ä¸­çš„è´¦å·ã€‚\n3. æŸ¥çœ‹ å¼¹å‡ºçš„æ–‡æœ¬ã€‚\n\nä½ å°†çœ‹åˆ°ä¸€ä¸ªå¥‡ç‰¹çš„åŒºåˆ«:\n\n* å½“ä½¿ç”¨ å‡½æ•°å¼ç»„ä»¶ å®žçŽ°çš„ ProfilePage, å½“å‰è´¦å·æ˜¯ Dan æ—¶ç‚¹å‡» Follow æŒ‰é’®ï¼Œç„¶åŽç«‹é©¬åˆ‡æ¢å½“å‰è´¦å·åˆ° Sophieï¼Œå¼¹å‡ºçš„æ–‡æœ¬å°†ä¾æ—§æ˜¯ 'Followed Dan'ã€‚\n* å½“ä½¿ç”¨ ç±»ç»„ä»¶ å®žçŽ°çš„ ProfilePage, å¼¹å‡ºçš„æ–‡æœ¬å°†æ˜¯ 'Followed Sophie'ï¼š\n\n![bug git](https://overreacted.io/386a449110202d5140d67336a0ade5a0/bug.gif)\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç¬¬ä¸€ä¸ªè¡Œä¸ºæ˜¯æ­£ç¡®çš„ã€‚å¦‚æžœæˆ‘å…³æ³¨ä¸€ä¸ªäººï¼Œç„¶åŽå¯¼èˆªåˆ°äº†å¦ä¸€ä¸ªäººçš„è´¦å·ï¼Œæˆ‘çš„ç»„ä»¶ä¸åº”è¯¥æ··æ·†æˆ‘å…³æ³¨äº†è°ã€‚ åœ¨è¿™é‡Œï¼Œç±»ç»„ä»¶çš„å®žçŽ°å¾ˆæ˜Žæ˜¾æ˜¯é”™è¯¯çš„ã€‚\n\n(éžå¸¸æŽ¨èä½  å…³æ³¨ Sophieã€‚)\n\n---\n\næ‰€ä»¥ä¸ºä»€ä¹ˆæˆ‘ä»¬çš„ä¾‹å­ä¸­ç±»ç»„ä»¶ä¼šæœ‰è¿™æ ·çš„è¡¨çŽ°ï¼Ÿ\n\nè®©æˆ‘ä»¬æ¥ä»”ç»†çœ‹çœ‹æˆ‘ä»¬ç±»ç»„ä»¶ä¸­çš„ showMessage æ–¹æ³•ï¼š\n```\nclass ProfilePage extends React.Component {\n  showMessage = () => {\n    alert('Followed ' + this.props.user);\n  };\n```\n\nè¿™ä¸ªç±»æ–¹æ³•ä»Ž this.props.user ä¸­è¯»å–æ•°æ®ã€‚åœ¨ React ä¸­ Props æ˜¯ä¸å¯å˜(immutable)çš„ï¼Œæ‰€ä»¥ä»–ä»¬æ°¸è¿œä¸ä¼šæ”¹å˜ã€‚ç„¶è€Œï¼Œthisæ˜¯ï¼Œè€Œä¸”æ°¸è¿œæ˜¯ï¼Œå¯å˜(mutable)çš„ã€‚\n\näº‹å®žä¸Šï¼Œè¿™å°±æ˜¯ç±»ç»„ä»¶ this å­˜åœ¨çš„æ„ä¹‰ã€‚Reactæœ¬èº«ä¼šéšç€æ—¶é—´çš„æŽ¨ç§»è€Œæ”¹å˜ï¼Œä»¥ä¾¿ä½ å¯ä»¥åœ¨æ¸²æŸ“æ–¹æ³•ä»¥åŠç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­å¾—åˆ°æœ€æ–°çš„å®žä¾‹ã€‚\n\næ‰€ä»¥å¦‚æžœåœ¨è¯·æ±‚å·²ç»å‘å‡ºçš„æƒ…å†µä¸‹æˆ‘ä»¬çš„ç»„ä»¶è¿›è¡Œäº†é‡æ–°æ¸²æŸ“ï¼Œthis.propså°†ä¼šæ”¹å˜ã€‚showMessageæ–¹æ³•ä»Žä¸€ä¸ªâ€œè¿‡äºŽæ–°â€çš„propsä¸­å¾—åˆ°äº†userã€‚\n\nè¿™æš´éœ²äº†ä¸€ä¸ªå…³äºŽç”¨æˆ·ç•Œé¢æ€§è´¨çš„ä¸€ä¸ªæœ‰è¶£è§‚å¯Ÿã€‚å¦‚æžœæˆ‘ä»¬è¯´UIåœ¨æ¦‚å¿µä¸Šæ˜¯å½“å‰åº”ç”¨çŠ¶æ€çš„ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆäº‹ä»¶å¤„ç†ç¨‹åºåˆ™æ˜¯æ¸²æŸ“ç»“æžœçš„ä¸€éƒ¨åˆ† â€”â€” å°±åƒè§†è§‰è¾“å‡ºä¸€æ ·ã€‚æˆ‘ä»¬çš„äº‹ä»¶å¤„ç†ç¨‹åºâ€œå±žäºŽâ€ä¸€ä¸ªæ‹¥æœ‰ç‰¹å®š props å’Œ state çš„ç‰¹å®šæ¸²æŸ“ã€‚\n\nç„¶è€Œï¼Œè°ƒç”¨ä¸€ä¸ªå›žè°ƒå‡½æ•°è¯»å– this.props çš„ timeout ä¼šæ‰“æ–­è¿™ç§å…³è”ã€‚æˆ‘ä»¬çš„ showMessage å›žè°ƒå¹¶æ²¡æœ‰ä¸Žä»»ä½•ä¸€ä¸ªç‰¹å®šçš„æ¸²æŸ“â€œç»‘å®šâ€åœ¨ä¸€èµ·ï¼Œæ‰€ä»¥å®ƒâ€œå¤±åŽ»â€äº†æ­£ç¡®çš„ propsã€‚ä»Ž this ä¸­è¯»å–æ•°æ®çš„è¿™ç§è¡Œä¸ºï¼Œåˆ‡æ–­äº†è¿™ç§è”ç³»ã€‚\n\nè®©æˆ‘ä»¬å‡è®¾å‡½æ•°å¼ç»„ä»¶ä¸å­˜åœ¨ã€‚æˆ‘ä»¬å°†å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ\n\næˆ‘ä»¬æƒ³è¦ä»¥æŸç§æ–¹å¼â€œä¿®å¤â€æ‹¥æœ‰æ­£ç¡® props çš„æ¸²æŸ“ä¸Žè¯»å–è¿™äº› props çš„showMessageå›žè°ƒä¹‹é—´çš„è”ç³»ã€‚åœ¨æŸä¸ªåœ°æ–¹propsè¢«å¼„ä¸¢äº†ã€‚\n\nä¸€ç§æ–¹æ³•æ˜¯åœ¨è°ƒç”¨äº‹ä»¶ä¹‹å‰è¯»å–this.propsï¼Œç„¶åŽå°†ä»–ä»¬æ˜¾å¼åœ°ä¼ é€’åˆ°timeoutå›žè°ƒå‡½æ•°ä¸­åŽ»ï¼š\n```\nclass ProfilePage extends React.Component {\n  showMessage = (user) => {\n    alert('Followed ' + user);\n  };\n\n  handleClick = () => {\n    const {user} = this.props;\n    setTimeout(() => this.showMessage(user), 3000);\n  };\n\n  render() {\n    return <button onClick={this.handleClick}>Follow</button>;\n  }\n}\n```\n\nè¿™ç§æ–¹æ³• ä¼šèµ·ä½œç”¨ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹æ³•ä½¿å¾—ä»£ç æ˜Žæ˜¾å˜å¾—æ›´åŠ å†—é•¿ï¼Œå¹¶ä¸”éšç€æ—¶é—´æŽ¨ç§»å®¹æ˜“å‡ºé”™ã€‚å¦‚æžœæˆ‘ä»¬éœ€è¦çš„ä¸æ­¢æ˜¯ä¸€ä¸ªpropsæ€Žä¹ˆåŠžï¼Ÿå¦‚æžœæˆ‘ä»¬è¿˜éœ€è¦è®¿é—®stateæ€Žä¹ˆåŠžï¼Ÿå¦‚æžœ showMessage è°ƒç”¨äº†å¦ä¸€ä¸ªæ–¹æ³•ï¼Œç„¶åŽé‚£ä¸ªæ–¹æ³•ä¸­è¯»å–äº† this.props.something æˆ–è€… this.state.somethingï¼Œæˆ‘ä»¬åˆå°†é‡åˆ°åŒæ ·çš„é—®é¢˜ã€‚ç„¶åŽæˆ‘ä»¬ä¸å¾—ä¸å°†this.propså’Œthis.stateä»¥å‡½æ•°å‚æ•°çš„å½¢å¼åœ¨è¢«showMessageè°ƒç”¨çš„æ¯ä¸ªæ–¹æ³•ä¸­ä¸€è·¯ä¼ é€’ä¸‹åŽ»ã€‚\n\nè¿™æ ·çš„åšæ³•ç ´åäº†ç±»æä¾›çš„å·¥ç¨‹å­¦ã€‚åŒæ—¶è¿™ä¹Ÿå¾ˆéš¾è®©äººåŽ»è®°ä½ä¼ é€’çš„å˜é‡æˆ–è€…å¼ºåˆ¶æ‰§è¡Œï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆäººä»¬æ€»æ˜¯åœ¨è§£å†³bugsã€‚\n\nåŒæ ·çš„ï¼Œåœ¨handleClickä¸­å†…è”åœ°å†™alertä»£ç ä¹Ÿæ— æ³•è§£å†³é—®é¢˜ã€‚æˆ‘ä»¬å¸Œæœ›ä»¥å…è®¸å°†å…¶æ‹†åˆ†ä¸ºå¤šä¸ªæ–¹æ³•çš„æ–¹å¼æ¥æž„é€ ç»„ç»‡ä»£ç ï¼Œä½†åŒæ—¶ä¹Ÿèƒ½è¯»å–ä¸ŽæŸæ¬¡ç»„ä»¶è°ƒç”¨å½¢æˆçš„æ¸²æŸ“ç»“æžœå¯¹åº”çš„propså’Œstateã€‚è¿™ä¸ªé—®é¢˜å¹¶ä¸æ˜¯Reactæ‰€ç‹¬æœ‰çš„ â€”â€” ä½ å¯ä»¥åœ¨ä»»ä½•ä¸€ä¸ªå°†æ•°æ®æ”¾å…¥ç±»ä¼¼ this è¿™æ ·çš„å¯å˜å¯¹è±¡ä¸­çš„UIåº“ä¸­é‡çŽ°å®ƒã€‚\n\næˆ–è®¸ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æž„é€ å‡½æ•°ä¸­ç»‘å®šæ–¹æ³•ï¼Ÿ\n```\nclass ProfilePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.showMessage = this.showMessage.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  showMessage() {\n    alert('Followed ' + this.props.user);\n  }\n\n  handleClick() {\n    setTimeout(this.showMessage, 3000);\n  }\n\n  render() {\n    return <button onClick={this.handleClick}>Follow</button>;\n  }\n}\n```\n\nä¸ï¼Œè¿™æ²¡æœ‰è§£å†³ä»»ä½•é—®é¢˜ã€‚è®°ä½ï¼Œæˆ‘ä»¬é¢å¯¹çš„é—®é¢˜æ˜¯æˆ‘ä»¬ä»Žthis.propsä¸­è¯»å–æ•°æ®å¤ªè¿Ÿäº†â€”â€”è¯»å–æ—¶å·²ç»ä¸æ˜¯æˆ‘ä»¬æ‰€éœ€è¦ä½¿ç”¨çš„ä¸Šä¸‹æ–‡äº†ï¼ç„¶è€Œï¼Œå¦‚æžœæˆ‘ä»¬èƒ½åˆ©ç”¨JavaScripté—­åŒ…çš„è¯é—®é¢˜å°†è¿Žåˆƒè€Œè§£ã€‚\n\né€šå¸¸æ¥è¯´æˆ‘ä»¬ä¼šé¿å…ä½¿ç”¨é—­åŒ…ï¼Œå› ä¸ºå®ƒä¼šè®©æˆ‘ä»¬éš¾ä»¥æƒ³è±¡ä¸€ä¸ªå¯èƒ½ä¼šéšç€æ—¶é—´æŽ¨ç§»è€Œå˜åŒ–çš„å˜é‡ã€‚ä½†æ˜¯åœ¨Reactä¸­ï¼Œpropså’Œstateæ˜¯ä¸å¯å˜å¾—ï¼ï¼ˆæˆ–è€…è¯´ï¼Œåœ¨æˆ‘ä»¬çš„å¼ºçƒˆæŽ¨èä¸­æ˜¯ä¸å¯å˜å¾—ã€‚ï¼‰è¿™å°±æ¶ˆé™¤äº†é—­åŒ…çš„ä¸€ä¸ªä¸»è¦ç¼ºé™·ã€‚\n\nè¿™å°±æ„å‘³ç€å¦‚æžœä½ åœ¨ä¸€æ¬¡ç‰¹å®šçš„æ¸²æŸ“ä¸­æ•èŽ·é‚£ä¸€æ¬¡æ¸²æŸ“æ‰€ç”¨çš„propsæˆ–è€…stateï¼Œä½ ä¼šå‘çŽ°ä»–ä»¬æ€»æ˜¯ä¼šä¿æŒä¸€è‡´ï¼Œå°±å¦‚åŒä½ çš„é¢„æœŸé‚£æ ·ï¼š\n```\nclass ProfilePage extends React.Component {\n  render() {\n    // Capture the props!\n    const props = this.props;\n\n    // Note: we are *inside render*.\n    // These aren't class methods.\n    const showMessage = () => {\n      alert('Followed ' + props.user);\n    };\n\n    const handleClick = () => {\n      setTimeout(showMessage, 3000);\n    };\n\n    return <button onClick={handleClick}>Follow</button>;\n  }\n}\n```\n\nä½ åœ¨æ¸²æŸ“çš„æ—¶å€™å°±å·²ç»â€œæ•èŽ·â€äº†propsï¼š\n\n![pokemon](https://overreacted.io/fa483dd5699aac1350c57591770a49be/pokemon.gif)\n\nè¿™æ ·ï¼Œåœ¨å®ƒå†…éƒ¨çš„ä»»ä½•ä»£ç ï¼ˆåŒ…æ‹¬showMessageï¼‰éƒ½ä¿è¯å¯ä»¥å¾—åˆ°è¿™ä¸€æ¬¡ç‰¹å®šæ¸²æŸ“æ‰€ä½¿ç”¨çš„propsã€‚Reactå†ä¹Ÿä¸ä¼šâ€œåŠ¨æˆ‘ä»¬çš„å¥¶é…ªâ€ã€‚\n\nç„¶åŽæˆ‘ä»¬å¯ä»¥åœ¨é‡Œé¢æ·»åŠ ä»»æ„å¤šçš„è¾…åŠ©å‡½æ•°ï¼Œå®ƒä»¬éƒ½ä¼šä½¿ç”¨è¢«æ•èŽ·çš„propså’Œstateã€‚é—­åŒ…ä¸‡å²ï¼\n\nä¸Šé¢çš„ä¾‹å­æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯çœ‹èµ·æ¥å¾ˆå¥‡æ€ªã€‚å¦‚æžœä½ åœ¨renderæ–¹æ³•ä¸­å®šä¹‰å„ç§å‡½æ•°ï¼Œè€Œä¸æ˜¯ä½¿ç”¨classçš„æ–¹æ³•ï¼Œé‚£ä¹ˆä½¿ç”¨ç±»çš„æ„ä¹‰åœ¨å“ªé‡Œï¼Ÿ\n\näº‹å®žä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ é™¤ç±»çš„â€œåŒ…è£¹â€æ¥ç®€åŒ–ä»£ç ï¼š\n```\nfunction ProfilePage(props) {\n  const showMessage = () => {\n    alert('Followed ' + props.user);\n  };\n\n  const handleClick = () => {\n    setTimeout(showMessage, 3000);\n  };\n\n  return (\n    <button onClick={handleClick}>Follow</button>\n  );\n}\n```\n\nå°±åƒä¸Šé¢è¿™æ ·ï¼Œpropsä»æ—§è¢«æ•èŽ·äº† â€”â€” Reactå°†å®ƒä»¬ä½œä¸ºå‚æ•°ä¼ é€’ã€‚ä¸åŒäºŽthisï¼Œpropså¯¹è±¡æœ¬èº«æ°¸è¿œä¸ä¼šè¢«Reactæ”¹å˜ã€‚\n\nå¦‚æžœä½ åœ¨å‡½æ•°å®šä¹‰ä¸­è§£æž„propsï¼Œé‚£å°†æ›´åŠ æ˜Žæ˜¾ï¼š\n```\nfunction ProfilePage({ user }) {\n  const showMessage = () => {\n    alert('Followed ' + user);\n  };\n\n  const handleClick = () => {\n    setTimeout(showMessage, 3000);\n  };\n\n  return (\n    <button onClick={handleClick}>Follow</button>\n  );\n}\n```\n\nå½“çˆ¶ç»„ä»¶ä½¿ç”¨ä¸åŒçš„propsæ¥æ¸²æŸ“ProfilePageæ—¶ï¼ŒReactä¼šå†æ¬¡è°ƒç”¨ProfilePageå‡½æ•°ã€‚ä½†æ˜¯æˆ‘ä»¬ç‚¹å‡»çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œâ€œå±žäºŽâ€å…·æœ‰è‡ªå·±çš„userå€¼çš„ä¸Šä¸€æ¬¡æ¸²æŸ“ï¼Œå¹¶ä¸”showMessageå›žè°ƒå‡½æ•°ä¹Ÿèƒ½è¯»å–åˆ°è¿™ä¸ªå€¼ã€‚å®ƒä»¬éƒ½ä¿æŒå®Œå¥½æ— æŸã€‚\n\nè¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼Œåœ¨ä¸Šé¢é‚£ä¸ªdemoçš„å‡½æ•°å¼ç‰ˆæœ¬ä¸­ï¼Œç‚¹å‡»å…³æ³¨Sophieçš„è´¦å·ï¼Œç„¶åŽæ”¹å˜é€‰æ‹©ä¸ºSunilä»æ—§ä¼šå¼¹å‡º'Followed Sophie'ï¼š\n![fix](https://overreacted.io/84396c4b3982827bead96912a947904e/fix.gif)\n\nè¿™ä¸ªè¡Œä¸ºå±•çŽ°æ˜¯æ­£ç¡®çš„ (åŒæ—¶ä½ ä¹Ÿå¯èƒ½ä¼šæƒ³è¦ [å…³æ³¨Sunil](https://mobile.twitter.com/threepointone)!)\n\nçŽ°åœ¨æˆ‘ä»¬æ˜Žç™½äº†Reactä¸­å‡½æ•°å¼ç»„ä»¶å’Œç±»ç»„ä»¶ä¹‹é—´çš„å·¨å¤§å·®åˆ«ï¼š\n\n**å‡½æ•°å¼ç»„ä»¶æ•èŽ·äº†æ¸²æŸ“æ‰€ä½¿ç”¨çš„å€¼ã€‚**\n\nä½¿ç”¨Hooksï¼ŒåŒæ ·çš„åŽŸåˆ™ä¹Ÿé€‚ç”¨äºŽstateã€‚ çœ‹è¿™ä¸ªä¾‹å­ï¼š\n```\nfunction MessageThread() {\n  const [message, setMessage] = useState('');\n\n  const showMessage = () => {\n    alert('You said: ' + message);\n  };\n\n  const handleSendClick = () => {\n    setTimeout(showMessage, 3000);\n  };\n\n  const handleMessageChange = (e) => {\n    setMessage(e.target.value);\n  };\n\n  return (\n    <>\n      <input value={message} onChange={handleMessageChange} />\n      <button onClick={handleSendClick}>Send</button>\n    </>\n  );\n}\n```\n\nï¼ˆè¿™æ˜¯[æ¼”ç¤ºdemo](https://codesandbox.io/s/93m5mz9w24)ã€‚ï¼‰\n\nå°½ç®¡è¿™ä¸æ˜¯ä¸€ä¸ªéžå¸¸å¥½çš„æ¶ˆæ¯åº”ç”¨çš„UIï¼Œä½†å®ƒè¯´æ˜Žäº†åŒæ ·çš„è§‚ç‚¹ï¼šå¦‚æžœæˆ‘å‘é€ä¸€æ¡ç‰¹å®šçš„æ¶ˆæ¯ï¼Œç»„ä»¶ä¸åº”è¯¥å¯¹å®žé™…å‘é€çš„æ˜¯å“ªæ¡æ¶ˆæ¯æ„Ÿåˆ°å›°æƒ‘ã€‚è¿™ä¸ªå‡½æ•°ç»„ä»¶çš„messageå˜é‡æ•èŽ·äº†â€œå±žäºŽâ€è¿”å›žäº†è¢«æµè§ˆå™¨è°ƒç”¨çš„å•å‡»å¤„ç†å‡½æ•°çš„é‚£ä¸€æ¬¡æ¸²æŸ“ã€‚æ‰€ä»¥å½“æˆ‘ç‚¹å‡»â€œå‘é€â€æ—¶messageè¢«è®¾ç½®ä¸ºé‚£ä¸€åˆ»åœ¨inputä¸­è¾“å…¥çš„å†…å®¹ã€‚\n\nå› æ­¤æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹Reactä¸­çš„å‡½æ•°ä¼šæ•èŽ·propså’Œstateã€‚ä½†æ˜¯å¦‚æžœæˆ‘ä»¬æƒ³è¦è¯»å–å¹¶ä¸å±žäºŽè¿™ä¸€æ¬¡ç‰¹å®šæ¸²æŸ“çš„ï¼Œæœ€æ–°çš„propså’Œstateå‘¢ï¼Ÿå¦‚æžœæˆ‘ä»¬æƒ³è¦â€œ[ä»Žæœªæ¥è¯»å–ä»–ä»¬](https://dev.to/scastiel/react-hooks-get-the-current-state-back-to-the-future-3op2)â€å‘¢ï¼Ÿ\n\nåœ¨ç±»ä¸­ï¼Œä½ é€šè¿‡è¯»å–this.propsæˆ–è€…this.stateæ¥å®žçŽ°ï¼Œå› ä¸ºthisæœ¬èº«æ—¶å¯å˜çš„ã€‚Reactæ”¹å˜äº†å®ƒã€‚åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥æ‹¥æœ‰ä¸€ä¸ªåœ¨æ‰€æœ‰çš„ç»„ä»¶æ¸²æŸ“å¸§ä¸­å…±äº«çš„å¯å˜å˜é‡ã€‚å®ƒè¢«æˆä¸ºâ€œrefâ€ï¼š\n```\nfunction MyComponent() {\n  const ref = useRef(null);\n  // You can read or write `ref.current`.\n  // ...\n}\n```\n\nä½†æ˜¯ï¼Œä½ å¿…é¡»è‡ªå·±ç®¡ç†å®ƒã€‚\n\nä¸€ä¸ªrefä¸Žä¸€ä¸ªå®žä¾‹å­—æ®µæ‰®æ¼”åŒæ ·çš„è§’è‰²ã€‚è¿™æ˜¯è¿›å…¥å¯å˜çš„å‘½ä»¤å¼çš„ä¸–ç•Œçš„åŽé—¨ã€‚ä½ å¯èƒ½ç†Ÿæ‚‰â€™DOM refsâ€™ï¼Œä½†æ˜¯refåœ¨æ¦‚å¿µä¸Šæ›´ä¸ºå¹¿æ³›é€šç”¨ã€‚å®ƒåªæ˜¯ä¸€ä¸ªä½ å¯ä»¥æ”¾ä¸œè¥¿è¿›åŽ»çš„ç›’å­ã€‚\n\nç”šè‡³åœ¨è§†è§‰ä¸Šï¼Œthis.somethingå°±åƒæ˜¯something.currentçš„ä¸€ä¸ªé•œåƒã€‚ä»–ä»¬ä»£è¡¨äº†åŒæ ·çš„æ¦‚å¿µã€‚\n\né»˜è®¤æƒ…å†µä¸‹ï¼ŒReactä¸ä¼šåœ¨å‡½æ•°å¼ç»„ä»¶ä¸­ä¸ºæœ€æ–°çš„propså’Œstateåˆ›é€ refsã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä½ å¹¶ä¸éœ€è¦å®ƒä»¬ï¼Œå¹¶ä¸”åˆ†é…å®ƒä»¬å°†æ˜¯ä¸€ç§æµªè´¹ã€‚ä½†æ˜¯ï¼Œå¦‚æžœä½ æ„¿æ„ï¼Œä½ å¯ä»¥è¿™æ ·æ‰‹åŠ¨åœ°æ¥è¿½è¸ªè¿™äº›å€¼ï¼š\n```\nfunction MessageThread() {\n  const [message, setMessage] = useState('');\n  const latestMessage = useRef('');\n\n  const showMessage = () => {\n    alert('You said: ' + latestMessage.current);\n  };\n\n  const handleSendClick = () => {\n    setTimeout(showMessage, 3000);\n  };\n\n  const handleMessageChange = (e) => {\n    setMessage(e.target.value);\n    latestMessage.current = e.target.value;\n  };\n```\n\nå¦‚æžœæˆ‘ä»¬åœ¨showMessageä¸­è¯»å–messageï¼Œæˆ‘ä»¬å°†å¾—åˆ°åœ¨æˆ‘ä»¬æŒ‰ä¸‹å‘é€æŒ‰é’®é‚£ä¸€åˆ»çš„ä¿¡æ¯ã€‚ä½†æ˜¯å½“æˆ‘ä»¬è¯»å–latestMessage.currentï¼Œæˆ‘ä»¬å°†å¾—åˆ°æœ€æ–°çš„å€¼ â€”â€” å³ä½¿æˆ‘ä»¬åœ¨æŒ‰ä¸‹å‘é€æŒ‰é’®åŽç»§ç»­è¾“å…¥ã€‚\n\nä½ å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹è¿™ ä¿©demoæ¥æ¯”è¾ƒå®ƒä»¬ä¹‹é—´çš„ä¸åŒã€‚refæ˜¯ä¸€ç§â€œé€‰æ‹©é€€å‡ºâ€æ¸²æŸ“ä¸€è‡´æ€§çš„æ–¹æ³•ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ä¼šååˆ†æ–¹ä¾¿ã€‚\n\né€šå¸¸æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥é¿å…åœ¨æ¸²æŸ“æœŸé—´è¯»å–æˆ–è€…è®¾ç½®refsï¼Œå› ä¸ºå®ƒä»¬æ˜¯å¯å˜å¾—ã€‚æˆ‘ä»¬å¸Œæœ›ä¿æŒæ¸²æŸ“çš„å¯é¢„æµ‹æ€§ã€‚ç„¶è€Œï¼Œå¦‚æžœæˆ‘ä»¬æƒ³è¦ç‰¹å®špropsæˆ–è€…stateçš„æœ€æ–°å€¼ï¼Œé‚£ä¹ˆæ‰‹åŠ¨æ›´æ–°refä¼šæœ‰äº›çƒ¦äººã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸€ä¸ªeffectæ¥è‡ªåŠ¨åŒ–å®žçŽ°å®ƒï¼š\n```\nfunction MessageThread() {\n  const [message, setMessage] = useState('');\n\n  // ä¿æŒè¿½è¸ªæœ€æ–°çš„å€¼ã€‚\n  const latestMessage = useRef('');\n  useEffect(() => {\n    latestMessage.current = message;\n  });\n\n  const showMessage = () => {\n    alert('You said: ' + latestMessage.current);\n  };\n```\n\n(è¿™æ˜¯[demo](https://codesandbox.io/s/yqmnz7xy8x)ã€‚)\n\næˆ‘ä»¬åœ¨ä¸€ä¸ªeffectå†…éƒ¨æ‰§è¡Œèµ‹å€¼æ“ä½œä»¥ä¾¿è®©refçš„å€¼åªä¼šåœ¨DOMè¢«æ›´æ–°åŽæ‰ä¼šæ”¹å˜ã€‚è¿™ç¡®ä¿äº†æˆ‘ä»¬çš„å˜é‡çªå˜ä¸ä¼šç ´åä¾èµ–äºŽå¯ä¸­æ–­æ¸²æŸ“çš„æ—¶é—´åˆ‡ç‰‡å’Œ Suspenseç­‰ç‰¹æ€§ã€‚\n\né€šå¸¸æ¥è¯´ä½¿ç”¨è¿™æ ·çš„refå¹¶ä¸æ˜¯éžå¸¸åœ°å¿…è¦ã€‚æ•èŽ·propså’Œstateé€šå¸¸æ˜¯æ›´å¥½çš„é»˜è®¤å€¼ã€‚ç„¶è€Œï¼Œåœ¨å¤„ç†ç±»ä¼¼äºŽintervalså’Œè®¢é˜…è¿™æ ·çš„å‘½ä»¤å¼APIæ—¶ï¼Œrefä¼šååˆ†ä¾¿åˆ©ã€‚è®°ä½ï¼Œä½ å¯ä»¥åƒè¿™æ ·è·Ÿè¸ªä»»ä½•å€¼ â€”â€” ä¸€ä¸ªpropï¼Œä¸€ä¸ªstateå˜é‡ï¼Œæ•´ä¸ªpropså¯¹è±¡ï¼Œæˆ–è€…ç”šè‡³ä¸€ä¸ªå‡½æ•°ã€‚\n\nè¿™ç§æ¨¡å¼å¯¹äºŽä¼˜åŒ–æ¥è¯´ä¹Ÿå¾ˆæ–¹ä¾¿ â€”â€” ä¾‹å¦‚å½“useCallbackæœ¬èº«ç»å¸¸æ”¹å˜æ—¶ã€‚ç„¶è€Œï¼Œä½¿ç”¨ä¸€ä¸ªreduceré€šå¸¸æ˜¯ä¸€ä¸ªæ›´å¥½çš„è§£å†³æ–¹å¼ã€‚ï¼ˆæœªæ¥åšå®¢æ–‡ç« çš„ä¸»é¢˜ï¼ï¼‰\n\nåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»çœ‹è¿‡äº†ç±»ç»„ä»¶ä¸­å¸¸è§çš„ç ´ç¢Žæ¨¡å¼ï¼Œä»¥åŠé—­åŒ…å¦‚ä½•å¸®åŠ©æˆ‘ä»¬ä¿®å¤å®ƒã€‚ç„¶è€Œï¼Œä½ å¯èƒ½æ³¨æ„åˆ°ï¼Œå½“ä½ å°è¯•é€šè¿‡æŒ‡å®šä¸€ä¸ªä¾èµ–æ•°ç»„æ¥ä¼˜åŒ–Hooksæ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°å¸¦æœ‰è¿‡æ—¶é—­åŒ…çš„é—®é¢˜ã€‚è¿™æ˜¯å¦æ„å‘³ç€é—­åŒ…æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Ÿæˆ‘ä¸è¿™ä¹ˆè®¤ä¸ºã€‚\n\næ­£å¦‚æˆ‘ä»¬ä¸Šé¢çœ‹åˆ°çš„ï¼Œé—­åŒ…å®žé™…ä¸Šå¸®æˆ‘ä»¬è§£å†³äº†å¾ˆéš¾æ³¨æ„åˆ°çš„ç»†å¾®é—®é¢˜ã€‚åŒæ ·ï¼Œå®ƒä»¬ä¹Ÿä½¿å¾—åœ¨å¹¶å‘æ¨¡å¼ä¸‹èƒ½æ›´è½»æ¾åœ°ç¼–å†™èƒ½å¤Ÿæ­£ç¡®è¿è¡Œçš„ä»£ç ã€‚è¿™æ˜¯å¯è¡Œçš„ï¼Œå› ä¸ºç»„ä»¶å†…éƒ¨çš„é€»è¾‘åœ¨æ¸²æŸ“å®ƒæ—¶æ•èŽ·å¹¶åŒ…å«äº†æ­£ç¡®çš„propså’Œstateã€‚\n\nç›®å‰ä¸ºæ­¢æˆ‘çœ‹åˆ°çš„æ‰€æœ‰æƒ…å†µä¸­ï¼Œæ‰€è°“çš„â€œé™ˆæ—§çš„é—­åŒ…â€é—®é¢˜çš„å‡ºçŽ°å¤šæ˜¯ç”±äºŽé”™è¯¯çš„å‡è®¾äº†â€œå‡½æ•°ä¸ä¼šæ”¹å˜â€æˆ–è€…â€œpropsæ°¸è¿œæ˜¯ä¸€æ ·çš„â€ã€‚äº‹å®žå¹¶éžå¦‚æ­¤ï¼Œè€Œæˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« æœ‰åŠ©äºŽæ¾„æ¸…è¿™ä¸€ç‚¹ã€‚\n\nå‡½æ•°æ•èŽ·äº†ä»–ä»¬çš„propså’Œstate â€”â€” å› æ­¤å®ƒä»¬çš„æ ‡è¯†ä¹ŸåŒæ ·é‡è¦ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªbugï¼Œè€Œæ˜¯ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶çš„ç‰¹æ€§ã€‚ä¾‹å¦‚ï¼Œå¯¹äºŽuseEffectæˆ–è€…useCallbackæ¥è¯´ï¼Œå‡½æ•°ä¸åº”è¯¥è¢«æŽ’é™¤åœ¨â€œä¾èµ–æ•°ç»„â€ä¹‹å¤–ã€‚ï¼ˆæ­£ç¡®çš„è§£å†³æ–¹æ¡ˆé€šå¸¸æ˜¯ä½¿ç”¨ä¸Šé¢è¯´è¿‡çš„useReduceræˆ–è€…useRef â€”â€” æˆ‘ä»¬å°†å¾ˆå¿«ä¼šåœ¨æ–‡æ¡£ä¸­è¯´æ˜Žå¦‚ä½•åœ¨å®ƒä»¬ä¸¤è€…ä¸­è¿›è¡Œé€‰æ‹©ã€‚ï¼‰\n\nå½“æˆ‘ä»¬ç”¨å‡½æ•°æ¥ç¼–å†™å¤§éƒ¨åˆ†çš„Reactä»£ç æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è°ƒæ•´å…³äºŽä¼˜åŒ–ä»£ç å’Œä»€ä¹ˆå˜é‡ä¼šéšç€æ—¶é—´æ”¹å˜çš„è®¤çŸ¥ä¸Žç›´è§‰ã€‚\n\næ­£å¦‚Fredrikæ‰€è¯´ï¼š\n\n**åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘å‘çŽ°çš„æœ‰å…³äºŽhooksçš„æœ€å¥½çš„å¿ƒé‡Œè§„åˆ™æ˜¯â€œå†™ä»£ç æ—¶è¦è®¤ä¸ºä»»ä½•å€¼éƒ½å¯ä»¥éšæ—¶æ›´æ”¹â€ã€‚**\n\nå‡½æ•°ä¹Ÿä¸ä¾‹å¤–ã€‚è¿™éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½æˆä¸ºReactå­¦ä¹ èµ„æ–™ä¸­çš„å¸¸è¯†ã€‚å®ƒéœ€è¦ä¸€äº›ä»Žç±»çš„æ€ç»´æ–¹å¼ä¸­è¿›è¡Œä¸€äº›è°ƒæ•´ã€‚ä½†æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©ä½ ä»¥æ–°çš„çœ¼å…‰æ¥çœ‹å¾…å®ƒã€‚\n\nReactå‡½æ•°æ€»æ˜¯æ•èŽ·ä»–ä»¬çš„å€¼ â€”â€” çŽ°åœ¨æˆ‘ä»¬ä¹ŸçŸ¥é“è¿™æ˜¯ä¸ºä»€ä¹ˆäº†ã€‚\n\n![pikachu](https://overreacted.io/fc3bddf6d4ca14bc77917ac0cfad3608/pikachu.gif)\n\nå®ƒä»¬æ˜¯å®Œå…¨ä¸åŒçš„å®å¯æ¢¦å“¦ã€‚\n\n### å‰ç«¯æ”¶è—å®¶ï¼ˆå¾®ä¿¡å·: fedailyï¼‰\n##### æ”¶é›†å…¨ç½‘ä¼˜ç§€å‰ç«¯æŠ€æœ¯èµ„è®¯ï¼Œä¸Žä½ åˆ†äº«ï¼Œå…±åŒæˆé•¿ã€‚\n","tags":["è½¬è½½","React"]},{"title":"å¦‚ä½•å®žçŽ°ä¸€ä¸ªä¼˜é›…çš„jsBridge","url":"/jsbridge/","content":"\n### ä»€ä¹ˆæ˜¯jsbridge\njsbridgeæ˜¯å®¢æˆ·ç«¯å’ŒH5æ²Ÿé€šçš„æ¡¥æ¢ï¼Œé€šè¿‡å®ƒï¼Œæˆ‘ä»¬å¯ä»¥èŽ·å–éƒ¨åˆ†åŽŸç”Ÿèƒ½åŠ›ï¼ŒåŒæ—¶å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ä½¿ç”¨æˆ‘ä»¬æä¾›çš„ä¸€äº›æ–¹æ³•ã€‚å®žçŽ°åŒå‘é€šä¿¡ã€‚\n\n### jsbridgeåŽŸç†\nå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡webviewé‡Œé¢æ³¨å…¥ä¸€äº›javascriptçš„ä¸Šä¸‹æ–‡ï¼Œå¯ä»¥ç†è§£ä¸ºåœ¨windowå¯¹è±¡ä¸ŠæŒ‚è½½äº†ä¸€äº›æ–¹æ³•ï¼Œç„¶åŽH5é€šè¿‡ç‰¹å®šçš„å¯¹è±¡å¯ä»¥èŽ·å–åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œåè¿‡æ¥ä¹Ÿæ˜¯ä¸€æ ·ï¼ŒjsæŒ‚è½½äº†ä¸€äº›æ–¹æ³•åˆ°windowå¯¹è±¡ä¸Šï¼Œå®¢æˆ·ç«¯ä¹Ÿå°±å¯ä»¥è°ƒç”¨jsçš„æŸäº›æ–¹æ³•ã€‚\n\n### å…·ä½“å®žçŽ°\n\n#### æ–¹æ¡ˆä¸€ï¼šæ³¨å…¥API\n\n##### IOS UIWebView\n\n```\nJSContext *context = [uiWebView valueForKeyPath:@\"documentView.webView.mainFrame.javaScriptContext\"];\n\ncontext[@\"postBridgeMessage\"] = ^(NSArray<NSArray *> *calls) {\n    // Native é€»è¾‘\n};\n```\n\nH5ä½¿ç”¨`window.postBridgeMessage(message)`è°ƒç”¨\n\n##### IOS WKWebView\n```\n@interface WKWebVIewVC ()<WKScriptMessageHandler>\n\n@implementation WKWebVIewVC\n\n- (void)viewDidLoad {\n    [super viewDidLoad];\n\n    WKWebViewConfiguration* configuration = [[WKWebViewConfiguration alloc] init];\n    configuration.userContentController = [[WKUserContentController alloc] init];\n    WKUserContentController *userCC = configuration.userContentController;\n    // æ³¨å…¥å¯¹è±¡ï¼Œå‰ç«¯è°ƒç”¨å…¶æ–¹æ³•æ—¶ï¼ŒNative å¯ä»¥æ•èŽ·åˆ°\n    [userCC addScriptMessageHandler:self name:@\"nativeBridge\"];\n\n    WKWebView wkWebView = [[WKWebView alloc] initWithFrame:self.view.frame configuration:configuration];\n\n    // TODO æ˜¾ç¤º WebView\n}\n\n- (void)userContentController:(WKUserContentController *)userContentController didReceiveScriptMessage:(WKScriptMessage *)message {\n    if ([message.name isEqualToString:@\"nativeBridge\"]) {\n        NSLog(@\"å‰ç«¯ä¼ é€’çš„æ•°æ® %@: \",message.body);\n        // Native é€»è¾‘\n    }\n}\n```\n\nH5ä½¿ç”¨`window.webkit.messageHandlers.nativeBridge.postMessage(message)`æ–¹å¼è°ƒç”¨ã€‚\n\næ¥çœ‹ä¸€ä¸‹H5ç«¯å…·ä½“å®žçŽ°\n\nå‡è®¾æˆ‘ä»¬éœ€è¦ä¸€ä¸ª`getUserInfo`æ–¹æ³•ï¼Œç”¨äºŽH5èŽ·å–å½“å‰APPç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ã€‚\n\né‚£ä¹ˆæˆ‘ä»¬jså¯ä»¥è¿™æ ·ï¼š\n\n```\nimport registerCallback from '../registerCallback';\n\nexport default function getUserInfo() {\n  return new Promise((resolve, reject) => {\n    try {\n      window.webkit.messageHandlers.getUserInfo.postMessage({\n        callback: registerCallback(resolve),\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n```\n\næˆ‘ä»¬å®šä¹‰ä¸€ä¸ª`getUserInfo`æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåŽ»è°ƒç”¨`window.webkit.messageHandlers.getUserInfo.postMessage`æ–¹æ³•ï¼Œè¿™æ˜¯å®¢æˆ·ç«¯å†™å…¥çš„æ–¹æ³•ï¼Œç„¶åŽä¼ å…¥ä¸€ä¸ªcallbackæ–¹æ³•ã€‚å®¢æˆ·ç«¯ä¼šé€šè¿‡callbackæ–¹æ³•æŠŠæˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯è¿”å›žç»™æˆ‘ä»¬ã€‚\n\næˆ‘ä»¬å¯ä»¥å†çœ‹ä¸‹`registerCallback`è¿™ä¸ªæ–¹æ³•æ˜¯ä»€ä¹ˆï¼š\n```\nwindow.knCallbacks = {};\n\nfunction makeRandomId(func) {\n  return `${func.name || 'anonymous'}_${Date.now()}`;\n}\n\nexport default function registerCallback(callback, keepAlive) {\n  if (!callback) {\n    return null;\n  }\n\n  const callbackId = makeRandomId(callback);\n  window.knCallbacks[callbackId] = (data) => {\n    let result;\n    if (typeof data === 'object') {\n      result = data;\n    } else if (typeof data === 'string') {\n      try {\n        result = JSON.parse(data);\n      } catch (e) {\n        result = data;\n      }\n    }\n    callback(result);\n    if (!keepAlive) {\n      delete window.knCallbacks[callbackId];\n    }\n  };\n\n  return `knCallbacks.${callbackId}`;\n}\n```\n\nåœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢ï¼Œæˆ‘ä»¬ä¼šä¸ºpromiseçš„resolveæ–¹æ³•ç”Ÿæˆä¸€ä¸ªéšæœºå‡½æ•°åï¼Œé¿å…å‡ºçŽ°windowå¯èƒ½ä¼šæœ‰åŒåå‡½æ•°å¯¼è‡´å°†å…¶è¦†ç›–çš„é—®é¢˜ã€‚\nç„¶åŽæˆ‘ä»¬æ ¹æ®ç”Ÿæˆçš„å‡½æ•°åé‡å†™ä¸€ä¸ªå‡½æ•°ï¼Œå°†è¿™ä¸ªå‡½æ•°æœ€åŽè¿”å›žç»™å¤–éƒ¨çš„callbackï¼Œä¼ é€’ç»™äº†å®¢æˆ·ç«¯ã€‚\nè¿™é‡Œçš„dataå°±æ˜¯å®¢æˆ·ç«¯è°ƒç”¨callbackä¼ é€’è¿‡æ¥çš„æ•°æ®ã€‚\næˆ‘ä»¬åœ¨è¿™é‡Œå¯¹æ•°æ®åšä¸€äº›å¤„ç†ï¼Œç„¶åŽç»™åˆ°callbackï¼Œä¹Ÿå°±æ˜¯promiseçš„resolveã€‚\n\n##### Android\n\nå®¢æˆ·ç«¯å®žçŽ°ï¼š\n```\npublicclassJavaScriptInterfaceDemoActivityextendsActivity{\n  private WebView Wv;\n\n  @Override\n  publicvoidonCreate(Bundle savedInstanceState){\n    super.onCreate(savedInstanceState);\n    Wv = (WebView)findViewById(R.id.webView);\n    final JavaScriptInterface myJavaScriptInterface = new JavaScriptInterface(this);\n    Wv.getSettings().setJavaScriptEnabled(true);\n    Wv.addJavascriptInterface(myJavaScriptInterface, \"knJSBridge\");\n    // TODO æ˜¾ç¤º WebView\n  }\n\n  publicclassJavaScriptInterface{\n    Context mContext;\n    JavaScriptInterface(Context c) {\n        mContext = c;\n    }\n    publicvoidpostMessage(String webMessage){\n        // Native é€»è¾‘\n    }\n  }\n}\n```\n\nH5å®žçŽ°\n```\nimport registerCallback from '../registerCallback';\n\nexport default function getUserInfo() {\n  return new Promise((resolve, reject) => {\n    try {\n      window.knJSBridge.getUserInfo(JSON.stringify({\n        callback: registerCallback(resolve),\n      }));\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n```\n\nè¿™é‡Œæˆ‘ä»¬å…¶å®žå¯ä»¥çœ‹åˆ°ï¼ŒknJSBridgeå…¶å®žæ˜¯æˆ‘ä»¬å’Œå®¢æˆ·ç«¯çº¦å®šçš„ä¸€ä¸ªå­—æ®µã€‚ç„¶åŽæˆ‘ä»¬é€šè¿‡`window.knJSBridge`å°±å¯ä»¥è°ƒç”¨å®¢æˆ·ç«¯çš„æ–¹æ³•äº†ã€‚\nregisterCallbackå’ŒIOSçš„æ˜¯ä¸€æ ·çš„ã€‚\n\næ ¹æ®ä¸Šé¢æˆ‘ä»¬H5è¿™é‡Œæœ€åŽå¯ä»¥å®žçŽ°è¿™æ ·ä¸€ä¸ªç»“æž„çš„jsbridge\n\n```\njsbridge\n  - index.js\n  - ios/\n    - index.js\n    - getUserInfo.js\n  - android/\n    - index.js\n    - getUserInfo.js\n```\n\n```\n// jsbridge/index.js\nimport iosBridge from './iOs';\nimport androidBridge from './android';\n\nexport default class Bridge {\n  constructor() {\n    super();\n    if (isAndroid) {\n      this.jsbridge = androidBridge;\n    } else {\n      this.jsbridge = iosBridge;\n    }\n  }\n  getUserInfo = (...args) => this.jsbridge.getUserInfo(...args);\n}\n\n// ios/index.js\nimport getUserInfo from './getUserInfo';\n\nexport {\n  getUserInfo\n}\n\n// ios/getUserInfo.js\nimport registerCallback from '../registerCallback';\n\nexport default function getUserInfo() {\n  return new Promise((resolve, reject) => {\n    try {\n      window.webkit.messageHandlers.getUserInfo.postMessage({\n        callback: registerCallback(resolve),\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n\n// android/index.js\nimport getUserInfo from './getUserInfo';\n\nexport {\n  getUserInfo\n}\n\n// android/getUserInfo.js\nimport registerCallback from '../registerCallback';\n\nexport default function getUserInfo() {\n  return new Promise((resolve, reject) => {\n    try {\n      window.webkit.messageHandlers.getUserInfo.postMessage({\n        callback: registerCallback(resolve),\n      });\n    } catch (e) {\n      reject(e);\n    }\n  });\n}\n```\n\n#### æ–¹æ¡ˆäºŒï¼šurlæ‹¦æˆª\nè¿™ç§æ–¹æ¡ˆå°±æ˜¯H5æž„é€ ä¸€ä¸ªiframeï¼Œé€šè¿‡ç»™iframeè®¾ç½®srcå‘èµ·è¯·æ±‚ï¼Œç„¶åŽå®¢æˆ·ç«¯æ‹¦æˆªè¯·æ±‚å®žçŽ°ã€‚\n\nä¸€èˆ¬ä¼šå°†urlè®¾ä¸ºä¸€ä¸ªç‰¹æ®Šçš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚`https://__bridge__`è¿™ä¸ªæ ·å­ï¼Œç„¶åŽåŽé¢è·Ÿä¸Šæˆ‘ä»¬éœ€è¦ä¼ é€’çš„æ•°æ®ï¼ŒåŒ…æ‹¬ä¸€ä¸ªcallbackå‡½æ•°åï¼Œå®¢æˆ·æ‹¦æˆªè¿™ç§è¯·æ±‚ï¼Œç„¶åŽé€šè¿‡callbackå°†æ•°æ®ä¼ é€’å›žæ¥ã€‚\n\n### å‰ç«¯æ”¶è—å®¶ï¼ˆå¾®ä¿¡å·: fedailyï¼‰\n##### æ”¶é›†å…¨ç½‘ä¼˜ç§€å‰ç«¯æŠ€æœ¯èµ„è®¯ï¼Œä¸Žä½ åˆ†äº«ï¼Œå…±åŒæˆé•¿ã€‚\n","tags":["JavaScript"]},{"title":"ç¬¬13æœŸ è…¾è®¯IMWEBå›¢é˜Ÿã€Šæœªæ¥å¯æœŸçš„TypeScriptã€‹& æ‹¼å¤šå¤šå’Œé…·å®¶ä¹é¢è¯•æ€»ç»“(å·²æ‹¿offer)","url":"/hotlink13/","content":"\n[è…¾è®¯IMWEBå›¢é˜Ÿã€Šæœªæ¥å¯æœŸçš„TypeScriptã€‹](https://mp.weixin.qq.com/s?__biz=MzA4Nzg0MDM5Nw==&mid=2247485046&idx=1&sn=1046b23d254bcdba9803e6c76b83ffe8&scene=21#wechat_redirect)\n\næ–‡ç« è®²è¿°äº†è‡ªå·±ä»Žä¸€å TypeScript æŠµåˆ¶è€…è½¬å˜ä¸ºæ”¯æŒè€…çš„å¿ƒè·¯åŽ†ç¨‹ï¼Œä»¥åŠ TypeScript åœ¨åœ¨çº¿æ•™è‚²å›¢é˜Ÿä¸­çš„å®žè·µç»éªŒï¼Œå¹¶å¯¹å›¢é˜Ÿæ–°é¡¹ç›®æ˜¯å¦è¯¥å¼•å…¥ TypeScriptã€å¦‚ä½•å¿«é€Ÿæ­å»ºã€ä»¥åŠçŽ°æœ‰é¡¹ç›®å¦‚ä½•å‘ TypeScript è¿ç§»æä¾›ç­–ç•¥æ€§å»ºè®®ä¸Žæ–¹æ¡ˆã€‚\n\n[å¾®å‰ç«¯åœ¨å°ç±³ CRM ç³»ç»Ÿçš„å®žè·µ](https://mp.weixin.qq.com/s?__biz=MzU3MDAyNDgwNA==&mid=2247485705&idx=1&sn=72485cc83eb607ffeab3b2eb22b49805&scene=21#wechat_redirect)\n\nå¤§åž‹ç»„ç»‡çš„ç»„ç»‡ç»“æž„ã€è½¯ä»¶æž¶æž„åœ¨ä¸æ–­åœ°å‘ç”Ÿå˜åŒ–ã€‚ç§»åŠ¨ä¼˜å…ˆï¼ˆMobile Firstï¼‰ã€Appä¸­å°ï¼ˆOne Appï¼‰ã€ä¸­å°æˆ˜ç•¥ç­‰ï¼Œå„ç§å£å·åœ¨ä¸æ–­çš„æå‡ºã€ä¿®æ”¹å’Œæ¼”è¿›ã€‚åŒæ—¶ï¼Œä¸šåŠ¡ä¹Ÿåœ¨ä¸æ–­åœ°å‘å±•ï¼Œå¯¼è‡´åº”ç”¨ä¸æ–­è†¨èƒ€ï¼Œè¿›ä¸€æ­¥æ˜ å°„åˆ°è½¯ä»¶æž¶æž„ä¸Šã€‚\n\n[å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¹‹è°ˆè°ˆå¸¸è§çš„æ€§èƒ½æŒ‡æ ‡åŠä¸ŠæŠ¥ç­–ç•¥](https://mp.weixin.qq.com/s?__biz=MzA5NzkwNDk3MQ==&mid=2650591715&idx=1&sn=aa8e6d5ed7bba8f4c3af67b889b54a91&scene=21#wechat_redirect)\n\næ€§èƒ½ä¼˜åŒ–æ˜¯æ‰€æœ‰å‰ç«¯äººçš„è¿½æ±‚ï¼Œåœ¨è¿™æ¡è·¯ä¸Šï¼Œæ–¹æ³•å¤šç§å¤šæ ·ã€‚è¿™ç¯‡æ–‡ç« ï¼Œè¯´ä¸€ä¸‹å¯ä»¥æ€Žæ ·å®šä¹‰æ€§èƒ½æŒ‡æ ‡åŠä¸ŠæŠ¥ã€‚\n\n[æ‹¼å¤šå¤šå’Œé…·å®¶ä¹é¢è¯•æ€»ç»“(å·²æ‹¿offer)](https://mp.weixin.qq.com/s?__biz=MzI1ODk2Mjk0Nw==&mid=2247485303&idx=1&sn=c003da72428fcd020af03ea37a586490&scene=21#wechat_redirect)\n\næˆ‘ç›®å‰é¢äº†äº”å®¶å…¬å¸ï¼šæ»´æ»´ã€èš‚èšã€æ‹¼å¤šå¤šã€é…·å®¶ä¹ã€å­—èŠ‚è·³åŠ¨ï¼Œæ‹¼å¤šå¤šå’Œé…·å®¶ä¹åŸºæœ¬å·²æ‹¿åˆ° offerï¼Œèš‚èšäºŒé¢å®Œäº†ï¼Œæ»´æ»´å’Œå­—èŠ‚å³å°†ä¸‰é¢ï¼Œæˆ‘å…ˆæŠŠæˆ‘å·²ç»é¢è¿‡çš„é¢ç»å…ˆæ€»ç»“å‡ºæ¥ï¼Œå…¶ä»–çš„ä¸ç®¡è¿‡æ²¡è¿‡ï¼Œè¿™å‘¨å†…æˆ‘éƒ½ä¼šæ€»ç»“å‡ºæ¥ï¼Œå¸Œæœ›èƒ½ç»™åˆ°æ­£åœ¨æ‰¾å·¥ä½œåŒå­¦çš„å¸®åŠ©ã€‚\n\n### å‰ç«¯æ”¶è—å®¶ï¼ˆå¾®ä¿¡å·: fedailyï¼‰\n##### æ”¶é›†å…¨ç½‘ä¼˜ç§€å‰ç«¯æŠ€æœ¯èµ„è®¯ï¼Œä¸Žä½ åˆ†äº«ï¼Œå…±åŒæˆé•¿ã€‚\n","tags":["ç²¾é€‰"]},{"title":"ç¬¬12æœŸ å‰ç«¯è¶Šç®¡è¶Šå®½ï¼Œè…¾è®¯Nowç›´æ’­å¦‚ä½•æŠŠç›‘æŽ§ä½“ç³»åšåˆ°æžè‡´ & ç”¨Jestæ¥ç»™Reactå®Œæˆä¸€æ¬¡å¦™ä¸å¯è¨€çš„~å•å…ƒæµ‹è¯•","url":"/hotlink12/","content":"\n[å‰ç«¯è¶Šç®¡è¶Šå®½ï¼Œè…¾è®¯Nowç›´æ’­å¦‚ä½•æŠŠç›‘æŽ§ä½“ç³»åšåˆ°æžè‡´ï¼Ÿ](https://mp.weixin.qq.com/s?__biz=MzUxMzcxMzE5Ng==&mid=2247494394&idx=1&sn=94c15aaffb191dfa1f96f6ec00dfb88a&scene=21#wechat_redirect)\n\nåœ¨ GMTC å…¨çƒå¤§å‰ç«¯æŠ€æœ¯å¤§ä¼šï¼ˆæ·±åœ³ç«™ï¼‰2019 ä¸Šï¼Œè…¾è®¯é«˜çº§ Web å‰ç«¯å·¥ç¨‹å¸ˆä½•æ–¹èˆŸä»¥äº§å“é‡åˆ°çš„å®žé™…é—®é¢˜æŒ‘æˆ˜ä¸ºèƒŒæ™¯ï¼Œè¯¦ç»†è®²è§£äº†å®žçŽ°å¤§å‰ç«¯ç›‘æŽ§çš„ä¸€äº›è§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡å³æ ¹æ®ä½•æ–¹èˆŸçš„æ¼”è®²æ•´ç†è€Œæˆã€‚ä»¥ä¸‹ä¸ºæ­£æ–‡ã€‚\n\n[é€šä¿—æ˜“æ‡‚çš„çº¢é»‘æ ‘å›¾è§£(ä¸‹)](https://mp.weixin.qq.com/s?__biz=MzI0NTE5NzYyMw==&mid=2247484070&idx=1&sn=0e838c5acb07aabefcaee87cb2aabe09&scene=21#wechat_redirect)\n\nå›žé¡¾ä¸€ä¸‹ é€šä¿—æ˜“æ‡‚çš„çº¢é»‘æ ‘å›¾è§£(ä¸Š)ï¼Œä¸Šç¯‡é¦–å…ˆä»‹ç»äº†äºŒå‰æ ‘çš„å®šä¹‰ä»¥åŠäºŒå‰æ ‘çš„æŸ¥æ‰¾ï¼Œç„¶åŽä»‹ç»äº†çº¢é»‘æ ‘çš„äº”ç‚¹æ€§è´¨ä»¥åŠçº¢é»‘æ ‘çš„å˜è‰²ã€å·¦æ—‹ä»¥åŠå³æ—‹ç­‰æ“ä½œï¼Œæœ€åŽç»“åˆå˜è‰²ã€å·¦æ—‹åŠå³æ—‹è¯¦ç»†è®²è§£äº†æ’å…¥èŠ‚ç‚¹çš„äº”ç§åœºæ™¯ã€‚è€Œæœ¬ç¯‡é€šä¿—æ˜“æ‡‚çš„çº¢é»‘æ ‘å›¾è§£(ä¸‹)æ˜¯åœ¨ä¸Šç¯‡çš„åŸºç¡€ä¸Šè®²è§£çº¢é»‘æ ‘æœ€åŽä¸€ç§æ“ä½œ-åˆ é™¤èŠ‚ç‚¹ï¼Œåˆ é™¤èŠ‚ç‚¹ç›¸å¯¹æ’å…¥èŠ‚ç‚¹ä¼šå¤æ‚ä¸€ç‚¹ï¼Œä½†é€šè¿‡åˆ†ç±»å½’çº³å‡ºä¸åŒçš„åœºæ™¯ï¼Œèƒ½æ›´å®¹æ˜“ç†è§£å’Œè®°å¿†ã€‚\n\n[ç”¨Jestæ¥ç»™Reactå®Œæˆä¸€æ¬¡å¦™ä¸å¯è¨€çš„~å•å…ƒæµ‹è¯•](https://mp.weixin.qq.com/s?__biz=MzIwNTc4OTU2NA==&mid=2247484818&idx=1&sn=dc2f5c2c8df7672387f81fa95b1575ef&scene=21#wechat_redirect)\n\nåœ¨2020çš„ä»Šå¤©ï¼Œæž„å»ºä¸€ä¸ª web åº”ç”¨å¯¹äºŽæˆ‘ä»¬æ¥è¯´ï¼Œå¹¶éžä»€ä¹ˆéš¾äº‹ã€‚å› ä¸ºæœ‰å¾ˆå¤šè¶³å¤Ÿå¤šä¼˜ç§€çš„çš„å‰ç«¯æ¡†æž¶ï¼ˆæ¯”å¦‚ Reactï¼ŒVue å’Œ Angularï¼‰ï¼›ä»¥åŠä¸€äº›æ˜“ç”¨ä¸”å¼ºå¤§çš„UIåº“ï¼ˆæ¯”å¦‚ Ant Designï¼‰ä¸ºæˆ‘ä»¬ä¿é©¾æŠ¤èˆªï¼Œæžå¤§åœ°ç¼©çŸ­äº†åº”ç”¨æž„å»ºçš„å‘¨æœŸã€‚\n\n[ç®€å•å‡ æ­¥è®©ä½ çš„ JS å†™å¾—æ›´æ¼‚äº®](https://mp.weixin.qq.com/s?__biz=Mzg5ODA5NTM1Mw==&mid=2247485519&idx=1&sn=d261a4ebd2cbfcc092bb30d54af833e8&scene=21#wechat_redirect)\n\nç½‘ä¸Šæœ‰ä¸å°‘å…³äºŽ JS ç¼–å†™ä¼˜åŒ–å»ºè®®ï¼Œè¿™é‡Œæˆ‘æ ¹æ®è‡ªå·±çš„ç»éªŒæå‡ºä¸€äº›æ¯”è¾ƒæœ‰ç”¨çš„æ„è§ã€‚\n\n[ä¸ºä»€ä¹ˆä½ çš„ç½‘é¡µéœ€è¦ CSP?](https://mp.weixin.qq.com/s?__biz=MzI0MzIyMDM5Ng==&mid=2649826826&idx=2&sn=bc707e702f63c6a7ec79ada43f9308a2&scene=21#wechat_redirect)\n\nå†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰æ˜¯ä¸€ä¸ª HTTP Headerï¼ŒCSP é€šè¿‡å‘Šè¯‰æµè§ˆå™¨ä¸€ç³»åˆ—è§„åˆ™ï¼Œä¸¥æ ¼è§„å®šé¡µé¢ä¸­å“ªäº›èµ„æºå…è®¸æœ‰å“ªäº›æ¥æºï¼Œ ä¸åœ¨æŒ‡å®šèŒƒå›´å†…çš„ç»Ÿç»Ÿæ‹’ç»ã€‚\nä½¿ç”¨å®ƒæ˜¯é˜²æ­¢è·¨ç«™ç‚¹è„šæœ¬ï¼ˆXSSï¼‰æ¼æ´žçš„æœ€ä½³æ–¹æ³•ã€‚ç”±äºŽéš¾ä»¥ä½¿ç”¨ CSP å¯¹çŽ°æœ‰ç½‘ç«™è¿›è¡Œæ”¹é€ ï¼ˆå¯é€šè¿‡æ¸è¿›å¼çš„æ–¹æ³•ï¼‰ï¼Œå› æ­¤ CSP å¯¹äºŽæ‰€æœ‰æ–°ç½‘ç«™éƒ½æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œå¼ºçƒˆå»ºè®®å¯¹æ‰€æœ‰çŽ°æœ‰é«˜é£Žé™©ç«™ç‚¹è¿›è¡Œ CSP ç­–ç•¥é…ç½®ã€‚\n\n[ä»ŽURLè¾“å…¥åˆ°é¡µé¢å±•çŽ°åˆ°åº•å‘ç”Ÿä»€ä¹ˆï¼Ÿ](http://mp.weixin.qq.com/s?__biz=Mzg5ODA5NTM1Mw==&mid=2247483803&idx=1&sn=460597ae3bd3ec10ad3426b7db605074&chksm=c066800df711091b2b6e005a922fff4a6a8e4b7930928a1c60fc0ac657c3ea5061cf1b51563d&scene=21#wechat_redirect)\n\næ‰“å¼€æµè§ˆå™¨ä»Žè¾“å…¥ç½‘å€åˆ°ç½‘é¡µå‘ˆçŽ°åœ¨å¤§å®¶é¢å‰ï¼ŒèƒŒåŽåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿç»åŽ†æ€Žä¹ˆæ ·çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Ÿå…ˆç»™å¤§å®¶æ¥å¼ æ€»ä½“æµç¨‹å›¾ï¼Œå…·ä½“æ­¥éª¤è¯·çœ‹ä¸‹æ–‡åˆ†è§£ï¼\n\n[é«˜çº§å‰ç«¯å¿…çŸ¥å¿…ä¼šï¼šç”¨Koa2 + MySQLæ­å»ºå…¨æ ˆé¡¹ç›®](https://mp.weixin.qq.com/s?__biz=MzIwNTc4OTU2NA==&mid=2247484831&idx=1&sn=0059ba356ff36111cf7cc254acc7661f&scene=21#wechat_redirect)\n\nä½œä¸ºä¸€åå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œæˆ‘ä»¬å¹³å¸¸å’ŒåŽç«¯æŽ¥è§¦æœ€å¤šçš„å°±æ˜¯æŽ¥å£çš„å¯¹æŽ¥ã€‚é‚£ä¹ˆåŽç«¯åŒäº‹æ˜¯æ€Žä¹ˆå†™ä¸€ä¸ªæŽ¥å£æ¥ç»™åˆ°æˆ‘ä»¬å‰ç«¯çš„åŒå­¦åŽ»èŽ·å–æ•°æ®åº“æ•°æ®å¹¶åšä¸€äº›èŠ±é‡Œèƒ¡å“¨çš„åŠŸèƒ½å‘¢ï¼Ÿä»Šå¤©æˆ‘ä»¬å°±ç”¨Koa2 & mySqlæ¥æ­å»ºä¸€ä¸ªåŽç«¯æœåŠ¡å™¨ï¼Œå®žçŽ°è‡ªå·±å†™apiçš„ä¸­å›½æ¢¦ï¼\n\n### å‰ç«¯æ”¶è—å®¶ï¼ˆå¾®ä¿¡å·: fedailyï¼‰\n##### æ”¶é›†å…¨ç½‘ä¼˜ç§€å‰ç«¯æŠ€æœ¯èµ„è®¯ï¼Œä¸Žä½ åˆ†äº«ï¼Œå…±åŒæˆé•¿ã€‚\n","tags":["ç²¾é€‰"]},{"title":"å¦‚ä½•è¿ˆå‘TypeScript - å·¥ç¨‹é…ç½®ç¯‡","url":"/how-go-to-ts/","content":"\n> æœ¬æ–‡ä¸»è¦ä»‹ç»å¦‚ä½•å°†ä½ çŽ°æœ‰çš„é¡¹ç›®å¹³æ»‘çš„è¿ç§»è‡³TypeScriptã€‚\n\næˆ‘ä»¬è¿™é‡Œä»¥React + Webpack + Babelé¡¹ç›®ä¸ºä¾‹ã€‚å…¶ä»–ç±»ä¼¼çš„é¡¹ç›®å…¶å®žä¹Ÿéƒ½å¤§åŒå°å¼‚ï¼Œå¯ä»¥å‚è€ƒè¿›è¡Œé…ç½®ã€‚\n\n### ç¬¬ä¸€æ­¥ï¼šæ”¯æŒç¼–è¯‘.ts, .tsxæ–‡ä»¶\n\né¦–å…ˆæˆ‘ä»¬å®‰è£…ç›¸å…³npmåŒ…ï¼š\n`npm i typescript @types/react @types/react-dom -D`\n\nç„¶åŽä½¿ç”¨`tsc --init`å‘½ä»¤ç”Ÿæˆ`tsconfig.json`æ–‡ä»¶ã€‚\n\næˆ‘ä»¬å°†`tsconfig.json`é‡Œé¢çš„:\n```\n{\n  \"jsx\": \"react\", // æ”¹ä¸ºreact\n  \"noEmit\": true,\n}\n```\n\næŽ¥ä¸‹æ¥æˆ‘ä»¬å†å®‰è£…`npm i @babel/preset-typescript -D`\n\nç„¶åŽä¿®æ”¹`babel`é…ç½®æ–‡ä»¶ï¼Œå¢žåŠ è¿™ä¸ªpreset:\n```\n{\n  \"presets\": [\n    \"@babel/preset-typescript\"\n  ],\n}\n```\n\nåŒæ—¶æˆ‘ä»¬è¿˜éœ€è¦è°ƒæ•´ä¸€ä¸‹`webpack.config.js`æ–‡ä»¶ï¼š\n```\n{\n  resolve: {\n    extensions: ['.js', '.jsx', '.ts', '.tsx']  // å¢žåŠ .ts, .tsx\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.(jsx|tsx)?$/, // æ”¯æŒts, tsx\n        use: ['babel-loader'],\n      }\n    ]\n  }\n}\n```\n\nåˆ°è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥å°†.ts, .tsxæ–‡ä»¶è½¬æ¢ä¸º.js, .jsxæ–‡ä»¶äº†ï¼Œä½†æ˜¯æ˜¯æ²¡æœ‰tsæ ¡éªŒçš„ã€‚\n\n### ç¬¬äºŒæ­¥ï¼šå¢žåŠ ç±»åž‹æ ¡éªŒ\n\næˆ‘ä»¬éœ€è¦é€šè¿‡`tsc`è¿›è¡Œæ ¡éªŒ\n\nåœ¨`package.json`é‡Œé¢æˆ‘ä»¬å¢žåŠ ä¸€ä¸ªæ ¡éªŒè„šæœ¬ï¼š\n```\n{\n  \"scripts\": {\n    \"ts-check\": \"tsc --watch\"\n  }\n}\n```\n\nè¿™æ ·ï¼Œæ‰§è¡Œ`npm run ts-check`çš„æ—¶å€™ï¼Œå°±å¯ä»¥å¯¹.ts, .tsxç±»åž‹æ–‡ä»¶è¿›è¡Œæ ¡éªŒäº†ã€‚\n\nè¿™ä¸ªæ—¶å€™ï¼Œå³ä½¿ts-checkæœ‰æŠ¥é”™ï¼Œä¹Ÿä¸ä¼šå½±å“é¡¹ç›®æœ¬èº«çš„æž„å»ºã€‚\n\nè¿™æ ·ï¼Œä½ å°±å¯ä»¥å®žçŽ°é¡¹ç›®ä¸­æ–°å¢žå†…å®¹çš„tsæ ¡éªŒäº†ã€‚\n\n\nå¦‚æžœä½ æƒ³æ›´è¿›ä¸€æ­¥ï¼ŒæŠŠåŽŸæœ‰çš„ä»£ç ä¹Ÿæ”¹é€ æˆtsï¼Œéœ€è¦æ€Žä¹ˆåšå‘¢ï¼Œå¾ˆç®€å•ï¼Œå°†.js, .jsxçš„æ–‡ä»¶æ”¹æˆ.ts, .tsxç±»åž‹å³å¯ã€‚\nç„¶åŽæ ¹æ®tsçš„æŠ¥é”™åŽ»ä¿®æ”¹çš„ä»£ç ã€‚\n\n### ç¬¬ä¸‰æ­¥ï¼šå…¨é¢æ”¹é€ \n\næˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰.js, .jsxæ–‡ä»¶éƒ½æ”¹æˆ.ts, .tsxåŽç¼€ï¼Œä½†æ˜¯å¯¹äºŽä¸€ä¸ªå¤§çš„é¡¹ç›®æ¥è¯´ï¼Œå¯èƒ½ä¼šäº§ç”Ÿå¤§é‡çš„æŠ¥é”™ï¼Œéœ€è¦èŠ±è´¹å¾ˆå¤§ç²¾åŠ›åŽ»ä¿®æ”¹ï¼Œå»ºè®®æ˜¯æŒ‰æ¨¡å—æ¥åˆ†æ­¥éª¤æ”¹é€ ã€‚\n\nå¦‚æžœä½ æƒ³æ‰¹é‡å¤„ç†.js, .jsxæ–‡ä»¶ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨`shelljs`æ‰¹é‡ä¿®æ”¹æ–‡ä»¶åŽç¼€å\n\né¦–å…ˆæˆ‘ä»¬å®‰è£…ç›¸å…³npmåŒ…ï¼š\n```\nnpm i shelljs @types/shelljs ts-node -D\n```\n\nç„¶åŽæ–°å»ºä¸€ä¸ªrenameJS.tsæ–‡ä»¶\n\n```\n// renameJS.ts\nimport * as shelljs from 'shelljs'\nshelljs.find('src')\n.filter(file => file.match(/\\.jsx?$/))\n.forEach(file => {\n  const newName = file.replace(/.j(sx?$)/, '.t$1')\n  shelljs.mv(file, newname);\n})\n\n// package.json å¢žåŠ script\n{\n  \"rename-js\": \"ts-node renameJS.ts\",\n}\n\n// æœ€åŽæ‰§è¡Œnpm run rename-jså³å¯\n```\n","tags":["typescript"]},{"title":"ç¬¬11æœŸ å°ç™½å¿…çœ‹ï¼ŒJSBridge åˆæŽ¢ & é€šä¿—æ˜“æ‡‚çš„çº¢é»‘æ ‘å›¾è§£(ä¸Š) & WebGLå·¥ä½œæµç¨‹è§£è¯»ï¼Œä¸€ä¸ªä¸‰è§’å½¢çš„è¯žç”Ÿ","url":"/hotlink11/","content":"\n[å°ç™½å¿…çœ‹ï¼ŒJSBridge åˆæŽ¢](https://mp.weixin.qq.com/s?__biz=MzI0NTE5NzYyMw==&mid=2247484005&idx=1&sn=43b97435aa13b4427c82bf87a9165c05&scene=21#wechat_redirect)\n\nè¿‘äº›å¹´ï¼Œç§»åŠ¨ç«¯æ™®åŠåŒ–è¶Šæ¥è¶Šé«˜ï¼Œå¼€å‘è¿‡ç¨‹ä¸­é€‰ç”¨ Native è¿˜æ˜¯ H5 ä¸€ç›´æ˜¯çƒ­é—¨è¯é¢˜ã€‚Native å’Œ H5 éƒ½æœ‰ç€å„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œä¸ºäº†æ»¡è¶³ä¸šåŠ¡çš„éœ€è¦ï¼Œå…¬å¸å®žé™…é¡¹ç›®çš„å¼€å‘è¿‡ç¨‹ä¸­å¾€å¾€ä¼šèžåˆä¸¤è€…è¿›è¡Œ Hybrid å¼€å‘ã€‚Native å’Œ H5 åˆ†å¤„ä¸¤åœ°ï¼Œçœ‹èµ·æ¥æ— æ³•è”ç³»ï¼Œé‚£ä¹ˆå¦‚ä½•æ‰èƒ½è®©åŒæ–¹ååŒå®žçŽ°åŠŸèƒ½å‘¢ï¼Ÿ\n\n[é€šä¿—æ˜“æ‡‚çš„çº¢é»‘æ ‘å›¾è§£(ä¸Š)](https://mp.weixin.qq.com/s?__biz=MzI0NTE5NzYyMw==&mid=2247483899&idx=1&sn=fb11e2854e11c04763a8e26a9f53d241&scene=21#wechat_redirect)\n\nçº¢é»‘æ ‘æœ¬è´¨ä¸Šæ˜¯ä¸€é¢—äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå®ƒæ˜¯åœ¨äºŒå‰æŸ¥æ‰¾æ ‘çš„åŸºç¡€ä¸Šç»™èŠ‚ç‚¹å¢žåŠ çº¢é»‘é¢œè‰²å±žæ€§ä»¥åŠäº”æ¡çº¦æŸçš„æ€§è´¨ã€‚æ‰€ä»¥å­¦ä¹ çº¢é»‘æ ‘ä¹‹å‰ï¼Œéœ€è¦å…ˆäº†è§£ä¸€ä¸‹äºŒå‰æŸ¥æ‰¾æ ‘çš„çŸ¥è¯†ï¼›çº¢é»‘æ ‘ä¸ŽäºŒå‰æŸ¥æ‰¾æ ‘çš„æŸ¥æ‰¾æ“ä½œæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œæ‰€ä»¥æŽŒæ¡äº†äºŒå‰æŸ¥æ‰¾æ ‘ä¹‹åŽï¼Œå­¦ä¹ çº¢é»‘æ ‘å°±åªå‰©ä¸‹å¢žåŠ åŠåˆ é™¤èŠ‚ç‚¹äº†ï¼ˆæ³¨æ„ï¼šçº¢é»‘æ ‘æ²¡æœ‰æ›´æ–°èŠ‚ç‚¹æ“ä½œï¼‰ã€‚\n\n[webpack-dev-middleware æºç è§£è¯»](https://mp.weixin.qq.com/s?__biz=MzI0NTE5NzYyMw==&mid=2247484052&idx=1&sn=93842fa46cfe1b0cc86f554caff06d0b&scene=21#wechat_redirect)\n\nWebpack çš„ä½¿ç”¨ç›®å‰å·²ç»æ˜¯å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆå¿…å¤‡æŠ€èƒ½ä¹‹ä¸€ã€‚è‹¥æ˜¯æƒ³åœ¨æœ¬åœ°çŽ¯å¢ƒå¯åŠ¨ä¸€ä¸ªå¼€å‘æœåŠ¡ï¼Œå¤§å®¶åªéœ€åœ¨ Webpack çš„é…ç½®ä¸­ï¼Œå¢žåŠ  devServer(https://www.webpackjs.com/configuration/dev-server/) çš„é…ç½®æ¥å¯åŠ¨ã€‚devServer é…ç½®çš„æœ¬è´¨æ˜¯ webpack-dev-server è¿™ä¸ªåŒ…æä¾›çš„åŠŸèƒ½ï¼Œè€Œ webpack-dev-middleware åˆ™æ˜¯è¿™ä¸ªåŒ…çš„åº•å±‚ä¾èµ–ã€‚\n\n[äº”åˆ†é’Ÿçœ‹æ‡‚ Nginx è´Ÿè½½å‡è¡¡](https://mp.weixin.qq.com/s?__biz=MzI0NTE5NzYyMw==&mid=2247484065&idx=1&sn=bdcd7acb8d3ff150764e5106bc795df2&scene=21#wechat_redirect)\n\nå¯¹äºŽç”µå•†å¹³å°è€Œè¨€ï¼Œéšç€ä¸šåŠ¡çš„ä¸æ–­å‘å±•å£®å¤§ï¼Œç½‘ç«™è®¿é—®é‡å’Œæ•°æ®é‡ä¹Ÿéšä¹‹æ€¥å‰§å¢žé•¿ï¼Œè¯¥æƒ…å†µçš„äº§ç”Ÿç»™æœåŠ¡å™¨å¸¦æ¥äº†ä¸€å®šçš„è´Ÿæ‹…ã€‚ä»Žç”¨æˆ·ä½“éªŒå±‚é¢è€Œè¨€ï¼Œç”±äºŽæœåŠ¡å™¨ç«¯æ•°æ®å¤„ç†å¸¦æ¥çš„æ—¶å»¶ï¼Œå¾€å¾€å¯¼è‡´é¡µé¢çš„å“åº”é€Ÿåº¦è¿‡æ…¢ã€æ“ä½œæµç•…æ€§å—é˜»ç­‰é—®é¢˜ã€‚è¿™åœ¨æŸç§ç¨‹åº¦ä¸Šç”šè‡³ä¼šæ½œåœ¨å½±å“å¹³å°çš„æˆäº¤é‡ã€‚æä¾›é«˜æ•ˆçŽ‡ï¼Œé«˜è´¨é‡çš„æœåŠ¡æˆä¸ºäºŸå¾…è§£å†³çš„é—®é¢˜ã€‚è´Ÿè½½å‡è¡¡ç­–ç•¥çš„å‡ºçŽ°å’Œå‘å±•æˆä¸ºç¼“è§£ä¸Šè¿°é—®é¢˜çš„æœ‰æ•ˆé€”å¾„ã€‚æœ¬æ–‡å°†å¸¦ä½ äº†è§£åŸºäºŽ Nginx å®žçŽ°çš„è´Ÿè½½å‡è¡¡ã€‚\n\n[ä¸€ç¯‡æžå®šç§»åŠ¨ç«¯é€‚é…](https://mp.weixin.qq.com/s?__biz=MzA5NzkwNDk3MQ==&mid=2650591397&idx=1&sn=118faca487e657e8c946a69fe1decc47&scene=21#wechat_redirect)\n\næ‰‹æœºå¸‚åœºæ—¥æ¸ä¸°å¯Œçš„åŒæ—¶ï¼Œç»™æˆ‘ä»¬å‰ç«¯å¼€å‘äººå‘˜å¸¦æ¥çš„ â€œç½‘é¡µå†…å®¹è‡ªé€‚åº”å±å¹•å°ºå¯¸è¿›è¡Œæ˜¾ç¤ºçš„é—®é¢˜â€ ä¹Ÿæ—¥æ¸å‡¸æ˜¾å‡ºæ¥ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦ç»†è¯´ç§»åŠ¨ç«¯é€‚é…çš„å‰ä¸–ä»Šç”ŸåŠæ–¹æ¡ˆã€‚\n\n[WebGLå·¥ä½œæµç¨‹è§£è¯»ï¼Œä¸€ä¸ªä¸‰è§’å½¢çš„è¯žç”Ÿ](https://mp.weixin.qq.com/s?__biz=MzA5NzkwNDk3MQ==&mid=2650591583&idx=1&sn=2b8e38bf31fbdbc3956e170d56676b80&scene=21#wechat_redirect)\n\næœ¬æ–‡ä¼šæŠŠWebGLå·¥ä½œçš„å…·ä½“æµç¨‹æ¢³ç†ä¸€éï¼ŒWebGLåˆ°åº•æ˜¯å¦‚ä½•æ¸²æŸ“å‡ºä¸€ä¸ªä¸‰è§’å½¢çš„ã€‚æˆ‘ä»¬å¸¸è¯´æŠŠå¤§è±¡è£…è¿›å†°ç®±éœ€è¦ä¸‰æ­¥ï¼Œé‚£ä¹ˆå†™ä¸€ä¸ªWebGLç¨‹åºåº”è¯¥ä¹Ÿåªéœ€è¦ä¸‰æ­¥ï¼š1ã€æŠŠæ•°æ®æ”¾å…¥ç¼“å†²åŒºï¼Œ2ã€æŠŠç¼“å†²åŒºçš„æ•°æ®ç»™ç€è‰²å™¨ï¼Œ3ã€ç€è‰²å™¨æŠŠæ•°æ®ç»™GPUã€‚\n\n[å½“æµè§ˆå™¨å…¨é¢ç¦ç”¨ä¸‰æ–¹ Cookie](https://mp.weixin.qq.com/s?__biz=MzI1ODk2Mjk0Nw==&mid=2247485264&idx=2&sn=6e6d0911649f3e24141be25fca19cb2b&scene=21#wechat_redirect)\n\nè‹¹æžœå…¬å¸å‰ä¸ä¹…å¯¹ Safari æµè§ˆå™¨è¿›è¡Œä¸€æ¬¡é‡å¤§æ›´æ–°ï¼Œè¿™æ¬¡æ›´æ–°å®Œå…¨ç¦ç”¨äº†ç¬¬ä¸‰æ–¹  Cookieï¼Œè¿™æ„å‘³ç€ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå„å¤§å¹¿å‘Šå•†æˆ–ç½‘ç«™å°†æ— æ³•å¯¹ä½ çš„ä¸ªäººéšç§è¿›è¡Œè¿½è¸ªã€‚è€Œå¾®è½¯å’Œ Mozilla ç­‰ä¹Ÿçº·çº·é‡‡å–äº†æŽªæ–½ç¦ç”¨ç¬¬ä¸‰æ–¹ Cookieï¼Œä½†æ˜¯ç”±äºŽè¿™äº›æµè§ˆå™¨å¸‚åœºä»½é¢è¾ƒå°ï¼Œå¹¶æ²¡æœ‰ç»™å¸‚åœºå¸¦æ¥å·¨å¤§çš„å†²å‡»ã€‚\n\n### å‰ç«¯æ”¶è—å®¶ï¼ˆå¾®ä¿¡å·: fedailyï¼‰\n##### æ”¶é›†å…¨ç½‘ä¼˜ç§€å‰ç«¯æŠ€æœ¯èµ„è®¯ï¼Œä¸Žä½ åˆ†äº«ï¼Œå…±åŒæˆé•¿ã€‚\n","tags":["ç²¾é€‰"]},{"title":"ç¬¬10æœŸ Nginx ä»Žå…¥é—¨åˆ°å®žè·µï¼Œä¸‡å­—è¯¦è§£ & JavaScript ES2020å¿…çŸ¥å¿…ä¼šæ–°ç‰¹æ€§","url":"/hotlink10/","content":"\n### å‰ç«¯æ”¶è—å®¶ï¼ˆå¾®ä¿¡å·: fedailyï¼‰\n##### æ”¶é›†å…¨ç½‘ä¼˜ç§€å‰ç«¯æŠ€æœ¯èµ„è®¯ï¼Œä¸Žä½ åˆ†äº«ï¼Œå…±åŒæˆé•¿ã€‚\n\n[2020å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ¸…å•ï¼ˆäº”ï¼‰](https://mp.weixin.qq.com/s?__biz=MzI5NjIzNjA1Nw==&mid=2247484186&idx=1&sn=f81d7a5e27422dfd253483ff29174bdb&scene=21#wechat_redirect)\nä¸€ä»½å…¨é¢çš„æ€§èƒ½ä¼˜åŒ–æŒ‡å—\n\n[2020å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ¸…å•ï¼ˆå…­ï¼‰](https://mp.weixin.qq.com/s?__biz=MzI5NjIzNjA1Nw==&mid=2247484187&idx=1&sn=f647d770ed17df9f29e7b2859b980250&scene=21#wechat_redirect)\nä¸€ä»½å…¨é¢çš„æ€§èƒ½ä¼˜åŒ–æŒ‡å—\n\n[Nginx ä»Žå…¥é—¨åˆ°å®žè·µï¼Œä¸‡å­—è¯¦è§£ï¼](https://mp.weixin.qq.com/s?__biz=Mzg5ODA5MzQ2Mw==&mid=2247484653&idx=1&sn=3d384389337950a9f2391f2464bc4d9c&scene=21#wechat_redirect)\næœ€è¿‘è¶Šæ¥è¶Šé¢‘ç¹åœ°é‡åˆ°éœ€è¦é…ç½®åå‘ä»£ç†çš„åœºæ™¯ï¼Œåœ¨è‡ªå·±æ­å»ºåšå®¢çš„æ—¶å€™ï¼Œä¹Ÿä¸å¯é¿å…è¦ç”¨åˆ° Nginxï¼Œæ‰€ä»¥è¿™æ®µæ—¶é—´é›†ä¸­å­¦ä¹ äº†ä¸€ä¸‹ Nginxï¼ŒåŒæ—¶åšäº†ä¸€äº›ç¬”è®°ï¼Œå¸Œæœ›ä¹Ÿå¯ä»¥å¸®åŠ©åˆ°å¤§å®¶ï½ž ðŸ˜œ\n\n[å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¹‹è°ˆè°ˆå¸¸è§çš„æ€§èƒ½æŒ‡æ ‡åŠä¸ŠæŠ¥ç­–ç•¥](https://mp.weixin.qq.com/s?__biz=MzI0MzIyMDM5Ng==&mid=2649826819&idx=1&sn=825a07b6372143b353dcc3fb2208ac1e&scene=21#wechat_redirect)\næ€§èƒ½ä¼˜åŒ–æ˜¯æ‰€æœ‰å‰ç«¯äººçš„è¿½æ±‚ï¼Œåœ¨è¿™æ¡è·¯ä¸Šï¼Œæ–¹æ³•å¤šç§å¤šæ ·ã€‚è¿™ç¯‡æ–‡ç« ï¼Œè¯´ä¸€ä¸‹å¯ä»¥æ€Žæ ·å®šä¹‰æ€§èƒ½æŒ‡æ ‡åŠä¸ŠæŠ¥ã€‚\n\n[JavaScript ES2020å¿…çŸ¥å¿…ä¼šæ–°ç‰¹æ€§](https://mp.weixin.qq.com/s?__biz=MzA5NzkwNDk3MQ==&mid=2650591668&idx=1&sn=e67882ac4055e531ba0ee5cb67670b4b&scene=21#wechat_redirect)\næ¥çœ‹ç‚¹æ–°é²œçš„\n\n[ç¬¬ä¸‰é¢˜ï¼šæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² ã€leetcodeã€‘](https://mp.weixin.qq.com/s?__biz=MzI5NDY1MTk3Mg==&mid=2247485571&idx=1&sn=f07a0ee70b0e5eb67886ffc2074380b3&scene=21#wechat_redirect)\næœ‰é¢è¯•çš„å°ä¼™ä¼´å¯ä»¥é€Ÿè§ˆä¸€æ³¢å“Ÿ\n","tags":["ç²¾é€‰"]},{"title":"ç¬¬9æœŸ æ¥è‡ªé˜¿é‡Œå¤§ä½¬çš„å…³äºŽç§»åŠ¨ç«¯ä½“éªŒä¼˜åŒ–ç»éªŒæ€»ç»“ & ä½ è¿ž HTTPS åŽŸç†éƒ½ä¸æ‡‚ï¼Œè¿˜è®²â€œä¸­é—´äººæ”»å‡»â€ï¼Ÿ","url":"/hotlink9/","content":"\n### å‰ç«¯æ”¶è—å®¶ï¼ˆå¾®ä¿¡å·: fedailyï¼‰\n##### æ”¶é›†å…¨ç½‘ä¼˜ç§€å‰ç«¯æŠ€æœ¯èµ„è®¯ï¼Œä¸Žä½ åˆ†äº«ï¼Œå…±åŒæˆé•¿ã€‚\n\n[2020å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ¸…å•ï¼ˆå››ï¼‰](https://mp.weixin.qq.com/s?__biz=MzI5NjIzNjA1Nw==&mid=2247484178&idx=1&sn=db9ce805b7eff5eec7cd93a259adfd88&scene=21#wechat_redirect)\nä¸€ä»½å…¨é¢çš„æ€§èƒ½ä¼˜åŒ–æŒ‡å—\n\n[ç®€æž Node.js ç‰¹ç‚¹ä¸Žåº”ç”¨åœºæ™¯](https://mp.weixin.qq.com/s?__biz=Mzg5ODA5NTM1Mw==&mid=2247485486&idx=2&sn=e2dffdc06cadeebcbf6b60aeaf146677&scene=21#wechat_redirect)\nå¦‚æžœä½ æœ‰ä¸€å®šçš„å‰ç«¯åŸºç¡€ï¼Œæ¯”å¦‚ HTMLã€CSSã€JavaScriptã€jQueryï¼›é‚£ä¹ˆï¼ŒNode.js èƒ½è®©ä½ ä»¥æœ€ä½Žçš„æˆæœ¬å¿«é€Ÿè¿‡æ¸¡æˆä¸ºä¸€ä¸ªå…¨æ ˆå·¥ç¨‹å¸ˆ(æˆ‘ç§°è¿™ä¸ªå…¨æ ˆä¸ºä¼ªå…¨æ ˆï¼Œæˆ‘è®¤ä¸ºçš„å…¨æ ˆä¹Ÿè¦ç²¾é€šæ•°æ®åº“ï¼Œä¸å–œå‹¿å–·)ï¼Œä»Žè€Œè§¦åŠåŽç«¯å’Œç§»åŠ¨ç«¯çš„å¼€å‘ã€‚å½“ç„¶ï¼ŒNode.jsä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ã€ä¹Ÿä¸æ˜¯è¯´å­¦äº†å®ƒå°±å¯ä»¥å®Œå…¨å–ä»£åŽç«¯çš„å…¶ä»–å¼€å‘è¯­è¨€ï¼Œå®ƒæœ‰è‡ªå·±çš„ä½¿å‘½å’Œæ“…é•¿çš„åº”ç”¨é¢†åŸŸã€‚\n\n[ä½ è¿ž HTTPS åŽŸç†éƒ½ä¸æ‡‚ï¼Œè¿˜è®²â€œä¸­é—´äººæ”»å‡»â€ï¼Ÿ](https://mp.weixin.qq.com/s?__biz=MzI0MzIyMDM5Ng==&mid=2649826808&idx=1&sn=091d9139f0400245eca5b37681812843&scene=21#wechat_redirect)\néšç€ HTTPS å»ºç«™çš„æˆæœ¬ä¸‹é™ï¼ŒçŽ°åœ¨å¤§éƒ¨åˆ†çš„ç½‘ç«™éƒ½å·²ç»å¼€å§‹ç”¨ä¸Š HTTPS åè®®ã€‚å¤§å®¶éƒ½çŸ¥é“ HTTPS æ¯” HTTP å®‰å…¨ï¼Œä¹Ÿå¬è¯´è¿‡ä¸Ž HTTPS åè®®ç›¸å…³çš„æ¦‚å¿µæœ‰ SSL ã€éžå¯¹ç§°åŠ å¯†ã€ CAè¯ä¹¦ç­‰ï¼Œä½†å¯¹äºŽä»¥ä¸‹çµé­‚ä¸‰æ‹·é—®å¯èƒ½å°±ç­”ä¸ä¸Šäº†ï¼š\n\n[é«˜æ•ˆçš„ç¼–ç ï¼šæˆ‘çš„VS Codeè®¾ç½®](https://mp.weixin.qq.com/s?__biz=MzA4Nzg0MDM5Nw==&mid=2247485008&idx=1&sn=6e58bc74803d5d69b8979874de71864e&scene=21#wechat_redirect)\nä»£ç ç¼–è¾‘å™¨å¾ˆå¤šï¼Œæœ‰äº›æ˜¯å…è´¹çš„ï¼Œæœ‰äº›æ˜¯ä»˜è´¹çš„ã€‚å…¶ä¸­æœ€å–œæ¬¢çš„ä»£ç ç¼–è¾‘å™¨æ˜¯ Visual Studio Codeã€‚å®ƒæ˜¯å…è´¹çš„ï¼Œå¹¶å…·æœ‰å¼ºå¤§çš„åŠŸèƒ½ï¼Œæˆ‘é™†ç»­æŠ›å¼ƒäº†Atomã€Sublime Textä»¥åŠä¹Ÿå¾ˆå¼ºå¤§çš„WebStormã€‚\n\n[æ¥è‡ªé˜¿é‡Œå¤§ä½¬çš„å…³äºŽç§»åŠ¨ç«¯ä½“éªŒä¼˜åŒ–ç»éªŒæ€»ç»“](https://mp.weixin.qq.com/s?__biz=MzU3MDAyNDgwNA==&mid=2247485677&idx=1&sn=c5a013ce5d4c0b30816e014727978025&scene=21#wechat_redirect)\nå¾ˆå¤šä¼ä¸šéƒ½ä¼šç‰¹åˆ«æ³¨é‡è‡ªå·±äº§å“çš„ä½“éªŒï¼Œå°¤å…¶æ˜¯ç§»åŠ¨ç«¯ï¼Œé‚£ç§»åŠ¨ç«¯çš„ä½“éªŒä¸ºä»€ä¹ˆè¿™ä¹ˆé‡è¦ï¼Ÿé¦–å…ˆä½“éªŒæœ¬èº«å°±å¾ˆé‡è¦ï¼Œå¥½çš„ä½“éªŒå¸¦ç»™ç”¨æˆ·çš„æ„Ÿå—æ˜¯æˆªç„¶ä¸åŒçš„ï¼Œç”¨æˆ·é€‰æ‹©ä½¿ç”¨ä¸€ä¸ªäº§å“é™¤äº†äº§å“æœ¬èº«åŠŸèƒ½æ»¡è¶³éœ€æ±‚ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ›´é‡è¦çš„åŽŸå› å°±æ˜¯äº§å“ç”¨èµ·æ¥â€œçˆ½â€ï¼Œäº§å“æ•´ä¸ªä½¿ç”¨æµç¨‹å¿…ç„¶æ˜¯èˆ’é€‚è‡ªç„¶ï¼Œæ‰èƒ½å—åˆ°å¤§ä¼—å–œçˆ±ï¼›æ­¤å¤–ï¼Œäº§å“ä½“éªŒå·²æˆä¸ºå¸‚åœºç«žäº‰åŠ›ä¹‹ä¸€ï¼Œå€Ÿç”¨äººäººéƒ½æ˜¯äº§å“ç»ç†ä¸Šé¢å¯¹ä½“éªŒçš„è®ºè¿°ï¼š\n","tags":["ç²¾é€‰"]},{"title":"ç¬¬8æœŸ 2020å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ¸…å•ï¼ˆä¸‰ï¼‰& è°ˆè°ˆJS çš„å›¾ç‰‡åŽ‹ç¼©","url":"/hotlink8/","content":"\n### å‰ç«¯æ”¶è—å®¶ï¼ˆå¾®ä¿¡å·: fedailyï¼‰\n##### æ”¶é›†å…¨ç½‘ä¼˜ç§€å‰ç«¯æŠ€æœ¯èµ„è®¯ï¼Œä¸Žä½ åˆ†äº«ï¼Œå…±åŒæˆé•¿ã€‚\n\n[2020å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ¸…å•ï¼ˆä¸‰ï¼‰](https://mp.weixin.qq.com/s?__biz=MzI5NjIzNjA1Nw==&mid=2247484177&idx=1&sn=bbc61b91a180bd2670233bf958afb9fc&scene=21#wechat_redirect)\n\nä¸€ä»½å…¨é¢çš„æ€§èƒ½ä¼˜åŒ–æ¸…å•\n\n[æŽ¢ç´¢ Serverless ä¸­çš„å‰ç«¯å¼€å‘æ¨¡å¼](https://mp.weixin.qq.com/s?__biz=MzA4Nzg0MDM5Nw==&mid=2247485006&idx=1&sn=cf2f367ef206c7432722bb949fae8184&scene=21#wechat_redirect)\n\næœ€è¿‘å…³äºŽ Serverless çš„è®¨è®ºè¶Šæ¥è¶Šå¤šã€‚çœ‹ä¼¼ä¸Žå‰ç«¯å…³ç³»ä¸å¤§çš„ Serverlessï¼Œå…¶å®žæ—©å·²å’Œå‰ç«¯æœ‰äº†æ¸Šæºï¼Œå¹¶ä¸”å°†å¯¹å‰ç«¯å¼€å‘æ¨¡å¼äº§ç”Ÿå˜é©æ€§çš„å½±å“ã€‚æœ¬æ–‡ä¸»è¦å°±æ ¹æ®ä¸ªäººç†è§£å’Œæ€»ç»“ï¼Œä»Žå‰ç«¯å¼€å‘æ¨¡å¼çš„æ¼”è¿›ã€åŸºäºŽ Serverless çš„å‰ç«¯å¼€å‘æ¡ˆä¾‹ä»¥åŠ Serverless å¼€å‘æœ€ä½³å®žè·µç­‰æ–¹é¢ï¼Œä¸Žå¤§å®¶æŽ¢è®¨ Serverless ä¸­çš„å‰ç«¯å¼€å‘æ¨¡å¼ã€‚æœ¬äººä¹Ÿæœ‰å¹¸åœ¨ QCon2019 åˆ†äº«äº†è¿™ä¸€ä¸»é¢˜ã€‚\n\n[ä¸€ä½é˜¿é‡ŒP7çš„é¢è¯•ç»éªŒåˆ†äº«](https://mp.weixin.qq.com/s?__biz=MzI4NDYxNTM0OQ==&mid=2247484840&idx=1&sn=cb511d3fbebaafc38a0a1edb9b268514&scene=21#wechat_redirect)\n\nä»Šå¹´äºŒæœˆä»¥æ¥ï¼Œæˆ‘çš„é¢è¯•é™¤äº†ä¸€ä¸ªç”¨å‹çš„ï¼ŒåŸºæœ¬å…¶ä»–éƒ½è¢«æ¯™äº†ï¼Œå¯ä»¥è¯´æ˜¯éžå¸¸æ®‹é…·çš„ã€‚å…¶ä¸­æœ‰å¾ˆå¤šè‡ªå·±è§‰å¾—è¿˜é¢çš„ä¸é”™çš„å²—ä½ï¼Œæ¯”å¦‚ç™¾åº¦ã€è·Ÿè°å­¦ã€å¥½æœªæ¥ç­‰å…¬å¸ã€‚è¯´å®žè¯ï¼Œæ‰“å‡»æ¯”è¾ƒå¤§ã€‚\n\n[è°ˆè°ˆJS çš„å›¾ç‰‡åŽ‹ç¼©](https://mp.weixin.qq.com/s?__biz=MzI0MzIyMDM5Ng==&mid=2649826806&idx=1&sn=c5e316f70abde478222a1e97972d9972&scene=21#wechat_redirect)\n\nè¯´èµ·å›¾ç‰‡åŽ‹ç¼©ï¼Œå¤§å®¶æƒ³åˆ°çš„æˆ–è€…å¹³æ—¶ç”¨åˆ°çš„å¾ˆå¤šå·¥å…·éƒ½å¯ä»¥å®žçŽ°ï¼Œä¾‹å¦‚ï¼Œå®¢æˆ·ç«¯ç±»çš„æœ‰å›¾ç‰‡åŽ‹ç¼©å·¥å…· PPDuck3ï¼Œ JS å®žçŽ°ç±»çš„æœ‰æ’ä»¶ compression.js ï¼Œäº¦æˆ–æ˜¯åœ¨çº¿å¤„ç†ç±»çš„ OSS ä¸Šä¼ ï¼Œæ–‡ä»¶ä¸Šä¼ åŽï¼Œåœ¨è®¿é—®æ–‡ä»¶æ—¶ä¸­ä¹Ÿæœ‰å›¾ç‰‡çš„åŽ‹ç¼©é…ç½®é€‰é¡¹ï¼Œä¸è¿‡ï¼Œèƒ½ä¸èƒ½è‡ªå·±æ’¸ä¸€å¥—  JS å®žçŽ°çš„å›¾ç‰‡åŽ‹ç¼©ä»£ç å‘¢ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œé‚£æˆ‘ä»¬å…ˆæ¥ç†ä¸€ä¸‹æ€è·¯ã€‚\n","tags":["ç²¾é€‰"]},{"title":"ç¬¬7æœŸ å‰ç«¯æœ€ä½³å®žè·µä¹‹å¯ç»´æŠ¤æ€§ & Flutter 2020æ˜¥å­£æ›´æ–° & Webä¸Šçš„å›¾ç‰‡æŠ€å·§","url":"/hotlink7/","content":"\n### å‰ç«¯æ”¶è—å®¶ï¼ˆå¾®ä¿¡å·: fedailyï¼‰\n##### æ”¶é›†å…¨ç½‘ä¼˜ç§€å‰ç«¯æŠ€æœ¯èµ„è®¯ï¼Œä¸Žä½ åˆ†äº«ï¼Œå…±åŒæˆé•¿ã€‚\n\n[å‰ç«¯æœ€ä½³å®žè·µä¹‹å¯ç»´æŠ¤æ€§](https://mp.weixin.qq.com/s?__biz=MzA5NzkwNDk3MQ==&mid=2650591656&idx=1&sn=4e9bc80efcbd6415a28e48e9db77a930&scene=21#wechat_redirect)\n\nç¼–å†™å¯ç»´æŠ¤çš„ä»£ç ååˆ†é‡è¦ï¼Œå› ä¸ºå¾ˆå¤šå¼€å‘è€…éƒ½ä¼šèŠ±å¤§é‡æ—¶é—´åŽ»ç»´æŠ¤åˆ«äººå†™çš„ä»£ç ã€‚å®žé™…å¼€å‘ä¸­ï¼Œä»Žç¬¬ä¸€è¡Œä»£ç å¼€å§‹å†™èµ·çš„æƒ…å†µæ˜¯éžå¸¸å°‘è§çš„ã€‚é€šå¸¸éƒ½æ˜¯è¦åœ¨åˆ«äººçš„ä»£ç ä¹‹ä¸Šæ¥æž„å»ºè‡ªå·±çš„å·¥ä½œã€‚è®©è‡ªå·±çš„ä»£ç å®¹æ˜“ç»´æŠ¤ï¼Œå¯ä»¥ä¿è¯å…¶ä»–å¼€å‘è€…æ›´å¥½åœ°å®Œæˆè‡ªå·±çš„å·¥ä½œã€‚\n\n[ã€PPTã€‘é˜¿é‡Œ@ç”‘å­ï¼šã€Šå‰ç«¯æ™ºèƒ½åŒ–å®žè·µã€‹â€”â€”é€»è¾‘ä»£ç ç”Ÿæˆ](https://mp.weixin.qq.com/s?__biz=MzIxNjgwMDIzMA==&mid=2247485422&idx=1&sn=d981f6cb327f70b17e1538c30828c367&scene=21#wechat_redirect)\n\nåœ¨ç¬¬åå››å±ŠD2å‰ç«¯æŠ€æœ¯è®ºå›é˜¿é‡Œé«˜çº§å‰ç«¯æŠ€æœ¯ä¸“å®¶@ç”„å­åšäº†ã€Šå‰ç«¯æ™ºèƒ½åŒ–å®žè·µã€‹â€”é€»è¾‘ä»£ç ç”Ÿæˆçš„åˆ†äº«ã€‚\n\n[ä»Ž React åŽ†å²çš„é•¿æ²³é‡ŒèŠè™šæ‹Ÿ DOM åŠå…¶ä»·å€¼](https://mp.weixin.qq.com/s?__biz=Mzg5NDEyMzA2NQ==&mid=2247485053&idx=1&sn=4c280d05cbe2857a1f74833b0515dd2a&scene=21#wechat_redirect)\n\næœ€è¿‘æˆ‘å‘çŽ°å¾ˆå¤šé¢è¯•é¢˜é‡Œé¢éƒ½æœ‰ã€Œå¦‚ä½•ç†è§£è™šæ‹Ÿ DOMã€è¿™ä¸ªé¢˜ï¼Œæˆ‘è§‰å¾—è¿™ä¸ªé¢˜åº”è¯¥æ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆå¥½ç­”ï¼Œå› ä¸ºå¾ˆå¤šäººæ²¡æœ‰çœŸæ­£ç†è§£è™šæ‹Ÿ DOM å®ƒçš„ä»·å€¼æ‰€åœ¨ï¼Œæˆ‘è¿™ç¯‡ä»Žè™šæ‹Ÿ DOM çš„è¯žç”Ÿè¿‡ç¨‹æ¥å¼•å‡ºå®ƒçš„ä»·å€¼ä»¥åŠåŽ†å²åœ°ä½ï¼Œå¸®åŠ©ä½ æ·±å…¥çš„ç†è§£å®ƒã€‚\n\n[é˜¿é‡Œç›’é©¬å‰ç«¯é¢è¯•ï¼Œä½ è¦çš„ç­”æ¡ˆæ¥äº†](https://mp.weixin.qq.com/s?__biz=Mzg5ODA5NTM1Mw==&mid=2247485475&idx=2&sn=8811928dc30b988e3e2c7f24604bb52e&scene=21#wechat_redirect)\n\næœ€è¿‘æœ‰ä¸€ç¯‡é˜¿é‡Œç›’é©¬å‰ç«¯é¢è¯•é¢˜è¢«å„å¤§ç¤¾åŒºè½¬è½½ï¼Œè€Œä¸”æ®ç§°è¿™æ˜¯é˜¿é‡Œæ ¡æ‹›é¢è¯•é¢˜ï¼Œæˆ‘çœ‹å®Œä»¥åŽï¼Œç®€ç›´æƒŠå‘†äº†ï¼Œæ‰“æ­»éƒ½ä¸ä¿¡ã€‚ä»Šå¤©ç‰¹æ„é’ˆå¯¹ä»–ä»¬å‘çš„ä¸€é¢ï¼ŒæŠŠå¯¹åº”çš„ç­”æ¡ˆæ•´ç†äº†ä¸€äº›ã€‚\n\n[Webä¸Šçš„å›¾ç‰‡æŠ€å·§](https://mp.weixin.qq.com/s?__biz=MjM5MTA1MjAxMQ==&mid=2651236377&idx=1&sn=4f6c04a5873d0f57fa2081b48c5e3f49&scene=21#wechat_redirect)\n\nåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å„ç§å›¾ç‰‡æ·»åŠ æ–¹å¼ï¼Œä»¥åŠæ¯ç§æ–¹å¼çš„ä¼˜ç¼ºç‚¹ï¼Œä»¥åŠä»€ä¹ˆæ—¶å€™å’Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ¯ç§æ–¹å¼çš„ä¸Šä¸‹æ–‡ã€‚\n\n[Flutter 2020æ˜¥å­£æ›´æ–°](https://mp.weixin.qq.com/s?__biz=MzUxMzcxMzE5Ng==&mid=2247494345&idx=1&sn=e8d5a9516e721eb03e209f87df2b1f04&scene=21#wechat_redirect)\n\nè°·æ­Œ Flutter é¡¹ç›®çš„å·¥ç¨‹å¸ˆã€äº§å“ç»ç†ã€UX ç ”ç©¶äººå‘˜ã€æŠ€æœ¯æ’°ç¨¿äººå’Œå¼€å‘å…³ç³»å·¥ç¨‹å¸ˆåœ¨è¿‡åŽ»å‡ ä¸ªæœˆä¸ºè¿™ä¸ªé¡¹ç›®ä»˜å‡ºäº†å¤§é‡æ±—æ°´å’ŒåŠªåŠ›ã€‚ä»–ä»¬åœ¨å„ç§é™åˆ¶æ¡ä»¶çš„åˆ¶çº¦ä¸‹ï¼Œä½¿ç”¨å„ç§å…¬å¼€å¯ç”¨çš„å·¥å…·ç»§ç»­å¼€å‘ 2020 å¹´çš„ Flutter æ˜¥å­£æ›´æ–°ã€‚å¦‚ä»Šï¼Œè¿™ä¸€å­£åº¦çš„æ›´æ–°å·²ç»å‡†å¤‡å°±ç»ªäº†ã€‚\n\n[åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ä½¿ç”¨è‡ªå®šä¹‰React Hooks](https://mp.weixin.qq.com/s?__biz=MzUxMzcxMzE5Ng==&mid=2247494345&idx=2&sn=ec8882169c0de5c2a00e64c4da79bde0&scene=21#wechat_redirect)\n\nåœ¨æœ¬æ–‡ä¸­æˆ‘å†³å®šèµ°æŠ€æœ¯è·¯çº¿ï¼Œåˆ†äº«æˆ‘ç¼–å†™è‡ªå®šä¹‰ hooks å’Œé›†æˆæŸäº›å‡½æ•°å¼ç¼–ç¨‹ç­–ç•¥çš„ç»éªŒã€‚æœ¬æ–‡ä»‹ç»äº†ä¸€ä¸ªè‡ªå®šä¹‰ hookï¼šuseRecorder()ã€‚\n","tags":["ç²¾é€‰"]},{"title":"JavaScript åŽŸåž‹ã€åŽŸåž‹é“¾æ¦‚å¿µç†è§£","url":"/js-prototype/","content":"\n![](https://github.com/u9646/assets/blob/master/public/WeChatee3b7f703390054a53e5e450712f665f.png?raw=true)\n\n## åŽŸåž‹\nè®©æˆ‘ä»¬ä»Žä¸€å¼ å›¾å¼€å§‹ã€‚\n\né¦–å…ˆï¼Œæˆ‘ä»¬çœ‹`Person`è¿™ä¸ªæž„é€ å‡½æ•°ã€‚å®ƒå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°ï¼š\n```\nfunction Person () {}\n```\n\nç„¶åŽé€šè¿‡`new`æ“ä½œç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆä¸€ä¸ªå®žä¾‹ï¼š\n```\nvar person = new Person()\n```\n\nåœ¨æˆ‘ä»¬å®šä¹‰äº†`Person`è¿™ä¸ªæž„é€ å‡½æ•°çš„æ—¶å€™ï¼Œå…¶å®žè¿˜ç”Ÿæˆäº†ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯åŽŸåž‹å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯å›¾ä¸­çš„`Person.prototype`ã€‚å®ƒå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ã€‚å¦‚æžœæˆ‘ä»¬åœ¨æŽ§åˆ¶å°æ‰“å°å‡ºæ¥æ˜¯è¿™æ ·çš„ï¼š\n```\n{\n  constructor: Æ’ Person()\n  __proto__: Object\n}\n```\n\nå®ƒæœ‰ä¸€ä¸ª`constructor`æ‰§è¡Œå…¶æž„é€ å‡½æ•°ã€‚æž„é€ å‡½æ•°å¯ä»¥é€šè¿‡prototypeå±žæ€§è®¿é—®åŽŸåž‹ã€‚\n\nå½“æˆ‘ä»¬ä½¿ç”¨`new`æ“ä½œç¬¦åˆ›å»ºäº†ä¸€ä¸ªå®žä¾‹`person`çš„æ—¶å€™ï¼Œé€šè¿‡è¿˜å°†è¿™ä¸ªå®žä¾‹åŒå…¶æž„é€ å‡½æ•°çš„åŽŸåž‹é€šè¿‡`__proto__`å…³è”èµ·æ¥äº†ã€‚\n\nè¿™å°±æ˜¯æž„é€ å‡½æ•°ã€åŽŸåž‹ã€å®žä¾‹ä¸‰è€…çš„å…³ç³»ã€‚ä¹Ÿå°±æ˜¯åŽŸåž‹çš„æ¦‚å¿µã€‚\n\n## åŽŸåž‹é“¾\n\nä»Žä¸Šé¢æˆ‘ä»¬å¤§æ¦‚äº†è§£äº†åŽŸåž‹çš„æ¦‚å¿µã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯åŽŸåž‹é“¾å‘¢ï¼Ÿ\n\næˆ‘ä»¬çœ‹`Person.prototype`ã€‚ä¸Šé¢æˆ‘ä»¬è®²åˆ°ï¼ŒåŽŸåž‹å¯¹è±¡å…¶å®žå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œå®ƒæœ‰ä¸€ä¸ª`constructor`å±žæ€§æŒ‡å‘å…¶æž„é€ å‡½æ•°ã€‚å®ƒè¿˜æœ‰ä¸€ä¸ªå±žæ€§`__proto__`æŒ‡å‘çš„æ˜¯è¿™ä¸ªå¯¹è±¡çš„åŽŸåž‹ã€‚\n\næˆ‘ä»¬çŸ¥é“å¯¹è±¡å¯ä»¥é€šè¿‡`Object`æž„é€ å‡½æ•°ç”Ÿæˆã€‚å°±å¦‚åŒé€šè¿‡`Person`newä¸€ä¸ª`person`çš„å®žä¾‹ï¼Œè¿™ä¸ªå®žä¾‹æœ‰ä¸€ä¸ªå±žæ€§`__proto__`æŒ‡å‘`Person.prototype`ä¸€æ ·ã€‚\n\nåŽŸåž‹å¯¹è±¡ä¹Ÿæ˜¯é€šè¿‡æž„é€ å‡½æ•°ç”Ÿæˆçš„ã€‚å³`Object`ã€‚æ‰€ä»¥å®ƒä¹Ÿæœ‰ä¸€ä¸ª`__proto__`å±žæ€§æŒ‡å‘å…¶æž„é€ å‡½æ•°çš„åŽŸåž‹ï¼Œä¹Ÿå°±æ˜¯`Object.prototype`ã€‚\n\nç„¶åŽ`Object.prototype`å…¶å®žä¹Ÿæ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œåªæ˜¯å®ƒç›¸æ¯”`Person.prototype`ã€‚å®ƒä¸Šé¢è¿˜æœ‰ä¸€äº›å…¶ä»–å±žæ€§ï¼Œæˆ‘ä»¬æ‰“å°ä¸€ä¸‹çœ‹çœ‹ï¼š\n```\n{\n  constructor: Æ’ Object()\n  __defineGetter__: Æ’ __defineGetter__()\n  __defineSetter__: Æ’ __defineSetter__()\n  hasOwnProperty: Æ’ hasOwnProperty()\n  __lookupGetter__: Æ’ __lookupGetter__()\n  __lookupSetter__: Æ’ __lookupSetter__()\n  isPrototypeOf: Æ’ isPrototypeOf()\n  propertyIsEnumerable: Æ’ propertyIsEnumerable()\n  toString: Æ’ toString()\n  valueOf: Æ’ valueOf()\n  toLocaleString: Æ’ toLocaleString()\n  get __proto__: Æ’ __proto__()\n  set __proto__: Æ’ __proto__()\n}\n```\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå®ƒè¿™é‡Œå®šä¹‰äº†`__proto__`å±žæ€§çš„`getter/setter`ã€‚\n\né‚£ä¹ˆ`Object.prototype.__proto__`æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿé€šè¿‡æŽ§åˆ¶å°æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿”å›žçš„æ˜¯ï¼š`null`ã€‚\n\nåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å…¶å®žä»¥åŠå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬é€šè¿‡`Person`æž„é€ å‡ºæ¥çš„`person`å®žä¾‹å¯¹è±¡ï¼Œé€šè¿‡`__proto__`å±žæ€§ï¼Œå…¶å®žå’Œ`Object`å…³è”äº†èµ·æ¥ã€‚\n\nè€Œè¿™æ ·ä¸€ä¸ªé“¾æ¡æˆ‘ä»¬å°±ç§°ä¹‹ä¸ºåŽŸåž‹é“¾ã€‚å°±æ˜¯å›¾ä¸­è“è‰²çš„çº¿ã€‚\n\né‚£ä¹ˆåŽŸåž‹é“¾çš„ä½œç”¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n\næˆ‘ä»¬è¿˜æ˜¯é€šè¿‡ä¸Šé¢çš„`person`å®žä¾‹æ¥è¯´æ˜Žã€‚å¦‚æžœæˆ‘ä»¬åœ¨æŽ§åˆ¶å°å°è¯•`person.toString()`ã€‚æˆ‘ä»¬ä¼šå‘çŽ°ä¼šè¿”å›ž`[object Object]`ã€‚è¿™é‡Œå§‘ä¸”å…ˆä¸è¯´ä¸ºä»€ä¹ˆè¿”å›žè¿™ä¸ªï¼Œæˆ‘ä»¬å…¶å®žå¹¶æ²¡æœ‰å®šä¹‰`toString`æ–¹æ³•ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå¯ä»¥è°ƒç”¨å‘¢ï¼Ÿ\n\nå…¶å®žè¿™é‡Œå°±æ˜¯åˆ©ç”¨åŽŸåž‹é“¾çš„æœºåˆ¶ã€‚å½“jsåœ¨æ‰§è¡Œè¿™å¥ä»£ç çš„æ—¶å€™ï¼Œå®ƒä¼šå°è¯•åœ¨`person`ä¸Šçœ‹æœ‰æ²¡æœ‰`toString`æ–¹æ³•ï¼Œå¦‚æžœæ²¡æ‰¾åˆ°ä¼šåŽ»`Person.prototype`ä¸ŠæŸ¥æ‰¾ã€‚å¦‚æžœè¿˜æ˜¯æ²¡æ‰¾åˆ°ï¼Œä¼šåŽ»`Object.prototype`ä¸ŠæŸ¥æ‰¾ï¼Œä¸Šé¢æˆ‘ä»¬ä¹Ÿæ‰“å°å‡ºæ¥ï¼Œè¿™ä¸Šé¢æ˜¯æœ‰`toString`æ–¹æ³•çš„ã€‚æ‰€ä»¥`person.toString()`æ‰§è¡ŒæˆåŠŸäº†ï¼Œè€Œä¸æ˜¯æŠ¥é”™ï¼Œæç¤ºæ²¡æœ‰`toString`æ–¹æ³•ã€‚\n\né€šè¿‡åŽŸåž‹é“¾æˆ‘ä»¬å¯ä»¥å®žçŽ°å…¶ä»–é¢å‘å¯¹è±¡è¯­è¨€çš„ç»§æ‰¿çš„æ¦‚å¿µã€‚\n\n## Functionçš„åŽŸåž‹æ˜¯ä»€ä¹ˆï¼Ÿ\né€šè¿‡æŽ§åˆ¶å°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š\n```\nfunction anonymous() {}\narguments: (...)\ncaller: (...)\nlength: 0\nname: \"\"\nconstructor: Æ’ Function()\napply: Æ’ apply()\nbind: Æ’ bind()\ncall: Æ’ call()\ntoString: Æ’ toString()\nSymbol(Symbol.hasInstance): Æ’ [Symbol.hasInstance]()\nget arguments: Æ’ ()\nset arguments: Æ’ ()\nget caller: Æ’ ()\nset caller: Æ’ ()\n__proto__: Object\n[[FunctionLocation]]: <unknown>\n[[Scopes]]: Scopes[0]\n```\n\nå®ƒå…¶å®žæ˜¯ä¸€ä¸ª`anonymous`å‡½æ•°ã€‚å¹¶ä¸æ˜¯å¯¹ä¸€ä¸ªæ™®é€šå¯¹è±¡ã€‚ä½†æ˜¯å®ƒåŒæ ·æœ‰ä¸€ä¸ª`__proto__`å±žæ€§ï¼ŒæŒ‡å‘äº†å…¶åŽŸåž‹ï¼Œä¹Ÿå°±æ˜¯`Object.prototype`ã€‚\n\næ‰€æœ‰æž„é€ å‡½æ•°ï¼ˆé™¤äº†é€šè¿‡bind,callè¿”å›žçš„å‡½æ•°ï¼Œä»¥åŠç®­å¤´å‡½æ•°ï¼‰éƒ½æœ‰ä¸€ä¸ª`__proto__`å±žæ€§æŒ‡å‘`Function.prototype`ã€‚\n\nçœ‹å¼€å§‹çš„å›¾ï¼Œä¹Ÿå°±æ˜¯`Person.__proto === Function.prototype`ã€‚`Object.__proto === Function.prototype`ï¼›\n\nåŒ…æ‹¬å…¶ä»–çš„å†…ç½®æž„é€ å‡½æ•°ï¼Œæ¯”å¦‚`Number`, `String`ç­‰ã€‚\n\næ‰€ä»¥ä¹Ÿå°±æœ‰äº†`Function.__proto__ === Function.prototype`ä¸º`true`ã€‚è¿™æ ·çš„æƒ…å†µã€‚æˆ‘ç†è§£æ˜¯è¿™äº›å…¶å®žæ˜¯jsè¯­è¨€å†…ç½®çš„åŽŸåž‹å¯¹è±¡ã€‚å’Œ`Object.prototype`ä¸€æ ·ã€‚é¦–å…ˆæ˜¯æœ‰äº†å‡½æ•°çš„åŽŸåž‹ï¼Œå³`Function.prototype`ã€‚ç„¶åŽä¸ºäº†`Function`æž„é€ å‡½æ•°èƒ½å¤Ÿç›´æŽ¥è®¿é—®åŽŸåž‹ä¸Šçš„æ–¹æ³•ï¼Œæ‰€ä»¥å°†å…¶`__proto__`å±žæ€§æŒ‡å‘äº†å‡½æ•°çš„åŽŸåž‹ã€‚\n\nå¦‚æžœä½ æ‰§è¡Œ`console.log(Number.prototype)`, `console.log(Date.prototype)`ã€‚ä½ ä¼šå‘çŽ°éƒ½æœ‰ä¸€äº›åŒºåˆ«ï¼ŒNumberåŽŸåž‹æœ‰ä¸€äº›ç‰¹æœ‰å‡½æ•°çš„å®žçŽ°ï¼ŒDateä¹Ÿæ˜¯å¦‚æ­¤ã€‚\n\nè¿™äº›éƒ½æ˜¯jså†…éƒ¨å®žçŽ°çš„ä¸€äº›åŸºç¡€åŽŸåž‹å¯¹è±¡ã€‚\n","tags":["JavaScript"]},{"title":"CSP frame-ancestors å¯¹æ¯” X-Frame-Options","url":"/csp-frame-ancestors-vs-x-frame-options/","content":"\n> è¿™ä¸¤ä¸ªå­—æ®µéƒ½æ˜¯ç”¨äºŽæŽ§åˆ¶åˆ«çš„ç½‘ç«™ä½¿ç”¨iframeæˆ–è€…frameåŠ è½½ä½ çš„ç½‘ç«™çš„è¡Œä¸º\n\n### X-Frame-Options\nè¯¥å­—æ®µæœ‰ä¸‰ä¸ªå¯èƒ½çš„å€¼ï¼Œåˆ†åˆ«ä¸º`deny`,  `sameorigin`, `allow-from https://example.com/`ï¼›\n\n#### deny\n`deny`è¡¨ç¤ºç¦æ­¢ä»»ä½•ä½¿ç”¨iframeæˆ–è€…frameåŠ è½½ä½ çš„ç½‘ç«™ã€‚\n\n#### sameorigin\n`sameorigin`è¡¨ç¤ºåªå…è®¸åŒæºçš„ç½‘ç«™ä½¿ç”¨iframeæˆ–è€…frameåŠ è½½ä½ çš„ç½‘ç«™\n\n#### allow-from\n`allow-from`è¡¨ç¤ºåªå…è®¸è¯¥ç½‘ç«™ä½¿ç”¨iframeæˆ–è€…frameåŠ è½½ä½ çš„ç½‘ç«™ã€‚\n\næ³¨æ„ï¼šå¼ºçƒˆå»ºè®®ä¸è¦ä½¿ç”¨è¯¥å±žæ€§ï¼Œæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š\n\n1. æµè§ˆå™¨å…¼å®¹æ€§å¾ˆå·®ï¼Œå…·ä½“å¯å‚è€ƒ [MDN X-Frame-Options](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/X-Frame-Options)\n2. åªèƒ½å¡«å†™ä¸€ä¸ªç™½åå•åœ°å€\n\nä»¥chrome v80 ä¸ºä¾‹ï¼š\n![](https://github.com/u9646/u9646.github.io/blob/master/csp-frame-ancestors-vs-x-frame-options/allow-from-test.png?raw=true)\nè™½ç„¶allow-fromå†™æˆäº†3100ç«¯å£ï¼Œä½†æ˜¯é¡µé¢ä¾ç„¶åŠ è½½å‡ºæ¥äº†ã€‚ç»è¿‡æµ‹è¯•ï¼Œsafari, firefoxï¼ˆå’Œä¸‹é¢ç‰ˆæœ¬ç›¸åŒï¼‰éƒ½å¯ä»¥æ­£å¸¸åŠ è½½ï¼Œè¯´æ˜Žå®ƒä»¬éƒ½ä¸æ”¯æŒè¯¥å±žæ€§ã€‚\n\n#### å¦‚ä½•ä½¿ç”¨ï¼Ÿ\n\n> ***è®¾ç½® meta æ ‡ç­¾æ˜¯æ— æ•ˆçš„ï¼ä¾‹å¦‚ `<meta http-equiv=\"X-Frame-Options\" content=\"deny\">` æ²¡æœ‰ä»»ä½•æ•ˆæžœã€‚ä¸è¦è¿™æ ·ç”¨ï¼åªæœ‰å½“åƒä¸‹é¢ç¤ºä¾‹é‚£æ ·è®¾ç½® HTTP å¤´ X-Frame-Options æ‰ä¼šç”Ÿæ•ˆã€‚***\n\nåœ¨è¯·æ±‚å¤´ä¸­å¢žåŠ `X-Frame-Options`ä¾‹å¦‚ï¼š`X-Frame-Options: sameorigin`\n\n### CSP frame-ancestors\nCSPæ˜¯æŒ‡[Content-Security-Policy](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Security-Policy)ã€‚\n\n`frame-ancestors`æ˜¯å…¶ä¸­ä¸€ä¸ªæŒ‡ä»¤ã€‚æŒ‡å®šäº†ä¸€ä¸ªå¯ä»¥åŒ…å«`<frame>`ï¼Œ`<iframe>`ï¼Œ`<object>`ï¼Œ`<embed>`ï¼Œor `<applet>`ç­‰å…ƒç´ çš„æœ‰æ•ˆçˆ¶çº§ã€‚\n\n> ***è¯¥æŒ‡ä»¤ä¸æ”¯æŒé€šè¿‡<meta> å…ƒç´ æˆ–é€šè¿‡ `Content-Security-policy-Report-Only` å¤´åŸŸæ‰€æŒ‡å®š.***\n\nå½“`frame-ancestors`è®¾ä¸º`none`æ—¶ï¼Œä½œç”¨ç±»ä¼¼äºŽ`X-Frame-Options: deny`ã€‚\n\n`frame-ancestors`ç­–ç•¥å¯ä»¥è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ªæº`<source>`ï¼š\n\n#### `<host-source>`\nä¸»æœºçš„åç§°æˆ–IPåœ°å€ï¼Œä»¥åŠä¸€ä¸ªå¯é€‰çš„URL schemeå’Œï¼æˆ–ç«¯å£å·\n\nä¾‹å¦‚ï¼š\n* http://*.example.com: åŒ¹é…æ‰€æœ‰ä½¿ç”¨http:URL schemeå¹¶æ¥å¯¹äºŽexample.comåŠå…¶å­åŸŸåçš„åŠ è½½æ„å›¾ã€‚\n* mail.example.com:443: åŒ¹é…æ‰€æœ‰å¯¹äºŽmail.example.comåœ¨443ç«¯å£çš„è®¿é—®æ„å›¾ã€‚\n* https://store.example.com: åŒ¹é…æ‰€æœ‰ä½¿ç”¨https:è®¿é—®store.example.comçš„æ„å›¾ã€‚\n\n#### `<scheme-source>`\nä¸€ä¸ªschemaé…ç½®ï¼Œæ¯”å¦‚'http:'æˆ–'https:'ã€‚æ³¨æ„ï¼Œå†’å·æ˜¯å¿…è¦çš„ã€‚ä½ åŒæ ·ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªdata schemaï¼ˆä½†å¹¶ä¸æŽ¨èï¼‰ã€‚\n\nä¾‹å¦‚ï¼š\n* 'data:' å…è®¸ data: URIs ä½œä¸ºå†…å®¹æºã€‚ è¿™æ˜¯ä¸å®‰å…¨çš„ï¼Œæ”»å‡»è€…å¯ä»¥ç”¨æ­¤æ¥æ³¨å…¥æ¶æ„ä»£ç ã€‚è¯·è°¨æ…Žä½¿ç”¨ï¼Œå¹¶ä¸è¦ä»¤å…¶ä½œç”¨äºŽè„šæœ¬ã€‚\n* 'mediastream:' å…è®¸ mediastream: URIs ä½œä¸ºå†…å®¹æº.\n* 'blob:' å…è®¸ blob: URIs ä½œä¸ºå†…å®¹æº.\n* 'filesystem:' å…è®¸ filesystem: URIs ä½œä¸ºå†…å®¹æº.\n\n#### self\næŒ‡å‘ä¸€ä¸ªè¯¥å—ä¿æŠ¤æ–‡æ¡£æ‰€åœ¨çš„æºï¼ŒåŒ…å«åŒæ ·çš„URL schemaå’Œç«¯å£å·ã€‚å¿…é¡»ç”¨å•å¼•å·è®¾ç½®ã€‚æœ‰äº›æµè§ˆå™¨ä¼šä»ŽæºæŒ‡ä»¤ä¸­æŽ’é™¤blobå’Œfilesystemã€‚éœ€è¦å…è®¸è¿™äº›å†…å®¹ç±»åž‹çš„ç«™ç‚¹å¯ä»¥é€šè¿‡Dataå±žæ€§æŒ‡å®šå®ƒä»¬ã€‚\n\nä¾‹å¦‚ï¼š`Content-Security-Policy: frame-ancestors 'self'`\n\n#### none\næŒ‡å‘ä¸€ä¸ªç©ºé›†ï¼Œæ„å‘³ç€æ²¡æœ‰URLä¼šè¢«åŒ¹é…ã€‚ä¹Ÿéœ€è¦å•å¼•å·åŒ…è£¹è®¾ç½®ã€‚\nä¾‹å¦‚ï¼š`Content-Security-Policy: frame-ancestors 'none'`\n\nå¯ä»¥åŒæ—¶é…ç½®å¤šä¸ªè§„åˆ™ï¼š\n`Content-Security-Policy: frame-ancestors 'self' https://example.com`\n\n\n### ç»“è®º\nå½“ä½ åªéœ€è¦é…ç½®ä¸å…è®¸åˆ«äººä½¿ç”¨iframeåŠ è½½ä½ çš„ç½‘ç«™æˆ–è€…åªå…è®¸åŒæºç½‘ç«™çš„æ—¶å€™ï¼Œä½¿ç”¨X-Frame-Optionså³å¯ã€‚å¦‚æžœä½ éœ€è¦ä½¿ç”¨ç™½åå•çš„æ–¹å¼æŽ§åˆ¶å…¶è¡Œä¸ºï¼Œé‚£ä¹ˆä½ åº”è¯¥ä½¿ç”¨`Content-Security-Policy: frame-ancestors`ï¼Œå®ƒæ”¯æŒé…ç½®å¤šä¸ªç™½åå•è€Œä¸”å…·æœ‰æ›´å¥½çš„æµè§ˆå™¨å…¼å®¹æ€§ã€‚\n\nå½“ä»–ä»¬åŒæ—¶è®¾ç½®çš„æ—¶å€™ï¼ŒæŒ‰è§„èŒƒ`Content-Security-Policy: frame-ancestors`å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚ä½†æ˜¯çŽ°å®žå¾€å¾€ä¸æ˜¯å¦‚æ­¤ï¼Œå¾ˆå¤šæµè§ˆå™¨å¯¹æ­¤è¡Œä¸ºæ¯”ä¸ä¸€è‡´ã€‚å»ºè®®åªè®¾ç½®ä¸€ä¸ªé…ç½®ã€‚\n\n#### æµ‹è¯•ï¼š\n> è¿™é‡Œä»¥macä¸Šé¢çš„å‡ ä¸ªå¸¸ç”¨æµè§ˆå™¨ä¸ºä¾‹ï¼Œéœ€è¦çš„å°ä¼™ä¼´å¯ä»¥ä½¿ç”¨expressè‡ªå·±åœ¨æœ¬åœ°è¿›è¡Œæµ‹è¯•ã€‚\n\næ¯”å¦‚è¯·æ±‚å¤´åŒæ—¶æœ‰ä»¥ä¸‹ä¸¤ä¸ªé…ç½®:\n`Content-Security-Policy: frame-ancestors 'self' https://example.com`\n`X-Frame-Options: sameorigin`\n##### chrome v80\n![](https://github.com/u9646/u9646.github.io/blob/master/csp-frame-ancestors-vs-x-frame-options/both-csp-xframe.png?raw=true)\nå¯ä»¥çœ‹åˆ°chromeæ˜¯å¯ä»¥æ­£å¸¸åŠ è½½çš„\n\n##### safari v12\n![](https://github.com/u9646/u9646.github.io/blob/master/csp-frame-ancestors-vs-x-frame-options/both-csp-xframe-safari.png?raw=true)\nå¯ä»¥çœ‹åˆ°safariå…ˆåˆ¤æ–­äº†x-frame-optionsï¼Œç„¶åŽå°±é˜»æ­¢äº†é¡µé¢åŠ è½½ã€‚\n\n##### firefox v73\n![](https://github.com/u9646/u9646.github.io/blob/master/csp-frame-ancestors-vs-x-frame-options/both-csp-xframe-firefox.png?raw=true)\nå¯ä»¥çœ‹åˆ°ç«ç‹ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸åŠ è½½äº†\n","tags":["å®‰å…¨"]},{"title":"æŠ€æœ¯ç²¾é€‰ - ç¬¬3æœŸ","url":"/hotlink-3/","content":"\n[æœ€å¸¸è§çš„6ç§Webåº”ç”¨æ¼æ´žåŠè§£å†³æ–¹æ¡ˆ](https://mp.weixin.qq.com/s/M-O_Yv1-2Rfcw0scjxoRLQ)\nWebåº”ç”¨åŸºäºŽC/Sï¼ˆClient/Serverï¼‰æœåŠ¡æ¨¡åž‹æ­å»ºï¼šå®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼ŒæœåŠ¡ç«¯è´Ÿè´£å“åº”ã€‚ä¸€èˆ¬å®¢æˆ·ç«¯å°±æ˜¯æµè§ˆå™¨ï¼Œä½†å¯ä»¥å‘æœåŠ¡å™¨å‘é€è¯·æ±‚çš„è½¯ä»¶åˆ™è¿œè¿œä¸é™äºŽæµè§ˆå™¨ã€‚WebæœåŠ¡å™¨é€šå¸¸ä»¥å…¬å¼€çš„åŸŸåæŽ¥æ”¶è¯·æ±‚å¹¶æä¾›æœåŠ¡ï¼Œéœ€è¦åº”å¯¹ä»»ä½•æ¥æºçš„è¯·æ±‚ã€‚\n\n[ARIA å®žè·µæŒ‡å—](https://mp.weixin.qq.com/s/s9xVdhfswKk8x3qVXik3Hw)\nARIA å±žäºŽå¯è®¿é—®æ€§è¯­ä¹‰çš„èŒƒç•´ã€‚ä»ŽåŠŸèƒ½ä¸Šæ¥è¯´ï¼ŒARIA çš„ rolesã€states å’Œ properties ç±»ä¼¼äºŽè¾…åŠ©æŠ€æœ¯çš„ CSSã€‚å¯¹å±å¹•é˜…è¯»å™¨è€Œè¨€ï¼ŒARIA æŽ§åˆ¶ç€å®ƒä»¬çš„éžè§†è§‰ä½“éªŒçš„æ¸²æŸ“ã€‚\n\n[çº¯å‰ç«¯JS zipæ‰“åŒ…æ–‡ä»¶å¹¶ä¸‹è½½](https://www.zhangxinxu.com/wordpress/2019/08/js-zip-download/?utm_medium=hao.caibaojian.com&utm_source=hao.caibaojian.com)\nå¦‚ä½•å®žçŽ°ZIPæ‰“åŒ…ä¸‹è½½\n\n[æµ…è°ˆReactæ€§èƒ½ä¼˜åŒ–çš„æ–¹å‘](https://mp.weixin.qq.com/s/WwKwX6HzT5HHxsGyx1YM1Q)\nReact æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–çš„ä¸‰ä¸ªæ–¹å‘ï¼Œå…¶å®žä¹Ÿé€‚ç”¨äºŽå…¶ä»–è½¯ä»¶å¼€å‘é¢†åŸŸï¼Œè¿™ä¸‰ä¸ªæ–¹å‘åˆ†åˆ«æ˜¯:å‡å°‘è®¡ç®—çš„é‡,åˆ©ç”¨ç¼“å­˜,ç²¾ç¡®é‡æ–°è®¡ç®—çš„èŒƒå›´\n\n[æµ…è°ˆ Webpack èƒŒåŽçš„è¿è¡Œæœºåˆ¶](https://mp.weixin.qq.com/s/GQ4hJm7UPv2kcyh9-tW2aQ)\nåœ¨å¹³æ—¶å¼€å‘ä¸­æˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ° Webpackè¿™ä¸ªæ—¶ä¸‹æœ€æµè¡Œçš„å‰ç«¯æ‰“åŒ…å·¥å…·ã€‚å®ƒæ‰“åŒ…å¼€å‘ä»£ç ï¼Œè¾“å‡ºèƒ½åœ¨å„ç§æµè§ˆå™¨è¿è¡Œçš„ä»£ç ï¼Œæå‡äº†å¼€å‘è‡³å‘å¸ƒè¿‡ç¨‹çš„æ•ˆçŽ‡ã€‚\n\n[ä½ æ‰€ä¸çŸ¥é“çš„ CSS è´Ÿå€¼æŠ€å·§ä¸Žç»†èŠ‚](https://mp.weixin.qq.com/s/GpcuCf9qZfJaotGluR-zXQ)\nå†™æœ¬æ–‡çš„èµ·å› æ˜¯ï¼Œä¸€å¤©åœ¨ç¾¤é‡Œæœ‰åŒå­¦è¯´è¯¯æ‰“è¯¯æ’žä¸‹ï¼Œä½¿ç”¨è´Ÿçš„ outline-offset å®žçŽ°äº†åŠ å·ã€‚å—¯ï¼Ÿå¥½å¥‡çš„æˆ‘é©¬ä¸Šä¹ŸåŠ¨æ‰‹å°è¯•äº†ä¸‹ï¼Œåˆ°åº•æ˜¯å¦‚ä½•ä½¿ç”¨è´Ÿçš„ outline-offset å®žçŽ°åŠ å·å‘¢ï¼Ÿ\n\n[æ·±åº¦ç†è§£ React Suspense](https://mp.weixin.qq.com/s/ygVL3y-ElcNQosXbhs-k2w)\nåœ¨ 16.6 ç‰ˆæœ¬ä¹‹å‰ï¼Œcode-spliting é€šå¸¸æ˜¯ç”±ç¬¬ä¸‰æ–¹åº“æ¥å®Œæˆçš„ï¼Œæ¯”å¦‚ react-loadble(æ ¸å¿ƒæ€è·¯ä¸º: é«˜é˜¶ç»„ä»¶ + webpack dynamic import), åœ¨ 16.6 ç‰ˆæœ¬ä¸­æä¾›äº† Suspense å’Œ lazy è¿™ä¸¤ä¸ªé’©å­, å› æ­¤åœ¨ä¹‹åŽçš„ç‰ˆæœ¬ä¸­ä¾¿å¯ä»¥ä½¿ç”¨å…¶æ¥å®žçŽ° Code Splitingã€‚\n\n[Node.js é«˜çº§è¿›é˜¶ä¹‹ fs æ–‡ä»¶æ¨¡å—å­¦ä¹ ](https://mp.weixin.qq.com/s/vYWdALZ8DGpa9HNPOKkjTg)\næ–‡ä»¶æ“ä½œæ˜¯å¼€å‘è¿‡ç¨‹ä¸­å¹¶ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†ï¼Œä½œä¸ºä¸€å Node.js å¼€å‘å·¥ç¨‹å¸ˆæ›´åº”è¯¥ç†Ÿç»ƒæŽŒæ¡fsæ¨¡å—çš„ç›¸å…³æŠ€å·§ã€‚Node.js ä¸­çš„ fs æ¨¡å—æ˜¯æ–‡ä»¶æ“ä½œçš„å°è£…ï¼Œå®ƒæä¾›äº†æ–‡ä»¶è¯»å–ã€å†™å…¥ã€æ›´åã€åˆ é™¤ã€éåŽ†ç›®å½•ã€é“¾æŽ¥ç­‰ POSIX æ–‡ä»¶ç³»ç»Ÿæ“ä½œã€‚ä¸Žå…¶å®ƒæ¨¡å—ä¸åŒçš„æ˜¯ï¼Œfs æ¨¡å—ä¸­æ‰€æœ‰çš„æ“ä½œéƒ½æä¾›äº†å¼‚æ­¥å’ŒåŒæ­¥çš„ä¸¤ä¸ªç‰ˆæœ¬,å…·æœ‰ sync åŽç¼€çš„æ–¹æ³•ä¸ºåŒæ­¥æ–¹æ³•ï¼Œä¸å…·æœ‰ sync åŽç¼€çš„æ–¹æ³•ä¸ºå¼‚æ­¥æ–¹æ³•\n","tags":["ç²¾é€‰"]},{"title":"HTTPä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹","url":"/http-three-way-handshake-and-wave-four-times/","content":"\n## ä¸‰æ¬¡æ¡æ‰‹\n> ä¸‰æ¬¡æ¡æ‰‹æ˜¯æŒ‡å®¢æˆ·ç«¯åœ¨å’ŒæœåŠ¡ç«¯å»ºç«‹tcpè¿žæŽ¥çš„æ—¶å€™éœ€è¦è¿›è¡Œä¸‰æ¬¡é€šä¿¡ï¼Œç„¶åŽæ‰èƒ½å®Œæˆè¿žæŽ¥ã€‚\n\n![image](https://upload-images.jianshu.io/upload_images/2179059-169363549c8e9f57.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nè¿™ä¸‰æ¬¡é€šä¿¡åˆ†åˆ«æ˜¯:\n\n1. å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¸€ä¸ªæ•°æ®åŒ…ï¼Œå‘Šè¯‰æœåŠ¡ç«¯éœ€è¦å»ºç«‹è¿žæŽ¥;\n2. æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„æ•°æ®åŒ…ä¹‹åŽï¼Œä¼šè¿”å›žä¸€ä¸ªæ•°æ®åŒ…ï¼Œé€šçŸ¥å®¢æˆ·ç«¯ï¼Œæˆ‘å·²ç»æ”¶åˆ°ä½ çš„è¿žæŽ¥è¯·æ±‚;\n3. å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯è¿”å›žçš„ä¿¡æ¯åŽï¼ŒçŸ¥é“æœåŠ¡ç«¯å·²ç»å‡†å¤‡å¥½å»ºç«‹è¿žæŽ¥ï¼Œä½†æ˜¯è¿˜éœ€è¦å†å‘é€ä¸€ä¸ªæ•°æ®åŒ…ç»™æœåŠ¡ç«¯ï¼Œç”¨äºŽå‘Šè¯‰æœåŠ¡ç«¯æˆ‘å·²ç»æ”¶åˆ°ä½ çš„å›žå¤äº†ã€‚\n\nè¿™ä¸ªæ—¶å€™ï¼Œè¿žæŽ¥å°±å·²ç»å»ºç«‹äº†ã€‚åŒæ–¹å¯ä»¥è¿›è¡Œæ•°æ®ä¼ è¾“äº†ã€‚\n\n### ä¸ºä»€ä¹ˆä¸€å®šéœ€è¦ä¸‰æ¬¡è¿žæŽ¥å‘¢?\nä¸»è¦è¿˜æ˜¯å› ä¸ºå­˜åœ¨æ•°æ®å¯èƒ½ä¸¢å¤±çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ç®¡æ˜¯å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡ç«¯ï¼Œéƒ½ä¸èƒ½ç¡®å®šè‡ªå·±å‘å‡ºçš„ä¿¡æ¯å¯¹æ–¹æœ‰æ²¡æœ‰æ­£å¸¸æŽ¥æ”¶åˆ°ï¼Œæ‰€ä»¥éœ€è¦å¯¹æ–¹å‘é€ä¸€ä¸ªå›žå¤ä¿¡æ¯ã€‚ç”¨äºŽç¡®å®šè‡ªå·±å‘å‡ºçš„ä¿¡æ¯å·²ç»è¢«å¯¹æ–¹æ­£å¸¸æŽ¥æ”¶ã€‚\n\n### åŒæ–¹æ˜¯å¦‚ä½•ç¡®è®¤å¯¹æ–¹çš„å‘¢?\næ¯”å¦‚æœåŠ¡ç«¯å¯èƒ½ä¼šåŒæ—¶æŽ¥æ”¶å¤šä¸ªå®¢æˆ·ç«¯çš„è¿žæŽ¥è¯·æ±‚ï¼Œå®ƒæ˜¯å¦‚ä½•åŒºåˆ†ä¸åŒå®¢æˆ·ç«¯çš„å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯éšæœºå€¼ã€‚\n\nå®¢æˆ·ç«¯åœ¨ç¬¬ä¸€æ¬¡æ¡æ‰‹çš„æ—¶å€™ï¼Œä¼šç”Ÿæˆä¸€ä¸ªéšæœºæ•°(j)ï¼Œå’Œæ•°æ®åŒ…ä¸€èµ·å‘é€ç»™æœåŠ¡ç«¯;\n\nç¬¬äºŒæ¬¡æ¡æ‰‹çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯ä¼šå°†è¿™ä¸ªéšæœºå€¼+1(j+1)ï¼ŒåŒæ—¶æœåŠ¡ç«¯ä¹Ÿç”Ÿæˆä¸€ä¸ªéšæœºå€¼(k)ä¸€èµ·å†è¿”å›žç»™å®¢æˆ·ç«¯;\n\nç¬¬ä¸‰æ¬¡æ¡æ‰‹çš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯ä¼šæ£€éªŒj+1çš„å€¼ï¼Œå¦‚æžœæ£€éªŒé€šè¿‡ï¼Œä¼šå°†k+1ï¼Œç„¶åŽå‘é€ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯æ£€éªŒk+1çš„å€¼ï¼Œæ£€éªŒé€šè¿‡ä»¥åŽï¼Œè¿žæŽ¥å°±å»ºç«‹äº†ã€‚\n\nå½“ç„¶ï¼Œå®žé™…çš„tcpè¿žæŽ¥ä¸­ï¼Œæ•°æ®åŒ…ä¸åªæ˜¯åŒ…å«éšæœºå€¼ï¼ŒåŒæ—¶è¿˜æœ‰å„ç§æ ‡å¿—ä½ç”¨äºŽç¡®è®¤è¯·æ±‚ã€‚\n\n### SYNæ”»å‡»\nåœ¨ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­ï¼Œå½“æœåŠ¡ç«¯å‘é€SYN-ACKä¹‹åŽæ”¶åˆ°å®¢æˆ·ç«¯çš„ACKä¹‹å‰çš„çŠ¶æ€ç§°ä¸ºåŠè¿žæŽ¥çŠ¶æ€ï¼Œå¦‚æžœæœåŠ¡ç«¯ä¸€ç›´æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯çš„ACKåŒ…ï¼ŒæœåŠ¡ç«¯éœ€è¦ä¸æ–­é‡å‘ç›´åˆ°è¶…æ—¶ã€‚SYNæ”»å‡»å°±æ˜¯å®¢æˆ·ç«¯åœ¨çŸ­æ—¶é—´å†…å¤§é‡ä¼ªé€ ä¸å­˜åœ¨çš„ipåœ°å€ï¼Œå‘æœåŠ¡ç«¯å‘èµ·è¿žæŽ¥è¯·æ±‚ï¼Œç”±äºŽæºåœ°å€ä¸å­˜åœ¨ï¼ŒæœåŠ¡ç«¯ä¸€ç›´ä¸èƒ½æ”¶åˆ°å®¢æˆ·ç«¯è¿”å›žçš„ACKåŒ…ï¼Œå¯¼è‡´ç½‘ç»œå µå¡žç”šè‡³ç³»ç»Ÿç˜«ç—ªã€‚SYNæ”»å‡»æ˜¯ä¸€ç§å…¸åž‹çš„DDOSæ”»å‡»ï¼Œå¦‚æžœæœåŠ¡ç«¯æœ‰å¤§é‡åŠè¿žæŽ¥çŠ¶æ€ä¸”æºipåœ°å€æ˜¯éšæœºçš„ï¼Œåˆ™å¯ä»¥åˆ¤æ–­é­åˆ°SYNæ”»å‡»ã€‚å¯ä»¥ä½¿ç”¨ï¼š\n\n```shell\n#netstat -nap | grep SYN_RECV\n```\n\n\n## å››æ¬¡æŒ¥æ‰‹\n> å››æ¬¡æŒ¥æ‰‹æ˜¯æŒ‡æ–­å¼€TCPè¿žæŽ¥æ—¶ï¼Œéœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ€»å…±å‘é€4æ¬¡æ•°æ®åŒ…ä»¥ç¡®è®¤è¿žæŽ¥çš„æ–­å¼€\n\n![image.png](https://upload-images.jianshu.io/upload_images/2179059-9b09667fe6b27de1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)\n\nç”±äºŽTCPè¿žæŽ¥æ˜¯å…¨åŒå·¥çš„ï¼Œå› æ­¤ï¼Œæ¯ä¸ªæ–¹å‘éƒ½éœ€è¦å•ç‹¬è¿›è¡Œå…³é—­ã€‚è¿™ä¸€åŽŸåˆ™æ˜¯æŒ‡å½“ä¸€æ–¹å®Œæˆæ•°æ®ä¼ è¾“ä»»åŠ¡åŽï¼Œå‘é€ä¸€ä¸ªFINæ¥ç»ˆæ­¢è¿™ä¸€æ–¹å‘çš„è¿žæŽ¥ï¼Œæ”¶åˆ°ä¸€ä¸ªFINåªæ„å‘³ç€è¿™ä¸€æ–¹å‘ä¸Šæ²¡æœ‰æ•°æ®ä¼ è¾“ï¼Œä½†åœ¨è¿™ä¸ªTCPè¿žæŽ¥ä¸Šä»ç„¶èƒ½å¤Ÿå‘é€æ•°æ®ï¼Œç›´åˆ°è¿™ä¸€æ–¹å‘ä¹Ÿå‘é€FINæ¥ã€‚\n\né¦–å…ˆè¿›è¡Œå…³é—­çš„ä¸€æ–¹å°†æ‰§è¡Œä¸»åŠ¨å…³é—­ï¼Œè€Œå¦ä¸€æ–¹åˆ™æ‰§è¡Œè¢«åŠ¨å…³é—­ã€‚\n\n1. ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šclientå‘é€ä¸€ä¸ªFINï¼Œç”¨æ¥å…³é—­clientåˆ°serverçš„æ•°æ®ä¼ è¾“ï¼Œclientè¿›å…¥FIN_WAIT_1çŠ¶æ€ï¼›\n2. ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šserveræ”¶åˆ°FINåŽï¼Œå‘é€ä¸€ä¸ªACKç»™clientï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·+1ï¼Œserverè¿›å…¥CLOSE_WAITçŠ¶æ€ï¼›\n3. ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šserverå‘é€ä¸€ä¸ªFINï¼Œç”¨æ¥å…³é—­serveråˆ°clientçš„æ•°æ®ä¼ è¾“ï¼Œserverè¿›å…¥LAST_ACKçŠ¶æ€ï¼›\n4. ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šclientæ”¶åˆ°FINåŽï¼Œclientè¿›å…¥TIME_WAITçŠ¶æ€ï¼ŒæŽ¥ç€å‘é€ä¸€ä¸ªACKç»™serverï¼Œç¡®è®¤åºå·ä¸ºæ”¶åˆ°åºå·+1ï¼Œserverè¿›å…¥CLOSEçŠ¶æ€ã€‚\n\nå®Œæˆå››æ¬¡æŒ¥æ‰‹ã€‚\n\n### ä¸ºä»€ä¹ˆå…³é—­è¿žæŽ¥éœ€è¦å››æ¬¡æŒ¥æ‰‹å‘¢ï¼Ÿ\nè¿™æ˜¯å› ä¸ºå½“æ”¶åˆ°å¯¹æ–¹çš„FINæŠ¥æ–‡æ—¶ï¼Œä»…ä»…è¡¨ç¤ºå¯¹æ–¹ä¸å†å‘é€æ•°æ®äº†ï¼Œä½†æ˜¯è¿˜èƒ½æŽ¥æ”¶æ•°æ®ã€‚å·±æ–¹ä¹Ÿæœªå¿…å…¨éƒ¨å°†æ•°æ®éƒ½å‘é€ç»™å¯¹æ–¹äº†ï¼Œæ‰€ä»¥å·±æ–¹å¯ä»¥ç«‹å³CLOSEï¼Œä¹Ÿå¯ä»¥å‘é€ä¸€ä¸ªæ•°æ®ç»™å¯¹æ–¹åŽï¼Œå†å‘é€FINæŠ¥æ–‡ç»™å¯¹æ–¹è¡¨ç¤ºåŒæ„çŽ°åœ¨å…³é—­è¿žæŽ¥ï¼Œå› æ­¤ï¼Œå·±æ–¹ACKå’ŒFINä¸€èˆ¬éƒ½ä¼šåˆ†å¼€å‘é€ã€‚\n\n### ä¸ºä»€ä¹ˆTIME_WAITçŠ¶æ€éœ€è¦ç»è¿‡2MSLï¼ˆæœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´ï¼‰æ‰èƒ½è¿”å›žåˆ°CLOSEçŠ¶æ€ï¼Ÿ\n\nåŽŸå› æœ‰äºŒï¼š\n\n1. ä¿è¯TCPåè®®çš„å…¨åŒå·¥è¿žæŽ¥èƒ½å¤Ÿå¯é å…³é—­ï¼›\n2. ä¿è¯è¿™æ¬¡è¿žæŽ¥çš„é‡å¤æ•°æ®æ®µä»Žç½‘ç»œä¸­æ¶ˆå¤±ã€‚\n\nå…ˆè¯´ç¬¬ä¸€ç‚¹ï¼Œå¦‚æžœclientç›´æŽ¥CLOSEDäº†ï¼Œé‚£ä¹ˆç”±äºŽIPåè®®çš„ä¸å¯é æ€§æˆ–è€…æ˜¯å…¶å®ƒç½‘ç»œåŽŸå› ï¼Œå¯¼è‡´serveræ²¡æœ‰æ”¶åˆ°clientæœ€åŽå›žå¤çš„ACKã€‚é‚£ä¹ˆserverå°±ä¼šåœ¨è¶…æ—¶ä¹‹åŽç»§ç»­å‘é€FINï¼Œæ­¤æ—¶ç”±äºŽclientå·²ç»CLOSEDäº†ï¼Œå°±æ‰¾ä¸åˆ°ä¸Žé‡å‘çš„FINå¯¹åº”çš„è¿žæŽ¥ï¼Œæœ€åŽserverå°±ä¼šæ”¶åˆ°RSTè€Œä¸æ˜¯ACKï¼Œserverå°±ä¼šä»¥ä¸ºæ˜¯è¿žæŽ¥é”™è¯¯æŠŠé—®é¢˜æŠ¥å‘Šç»™é«˜å±‚ã€‚è¿™æ ·çš„æƒ…å†µè™½ç„¶ä¸ä¼šé€ æˆæ•°æ®ä¸¢å¤±ï¼Œä½†æ˜¯å´å¯¼è‡´TCPåè®®ä¸ç¬¦åˆå¯é è¿žæŽ¥çš„è¦æ±‚ã€‚æ‰€ä»¥ï¼ŒClientä¸æ˜¯ç›´æŽ¥è¿›å…¥CLOSEDï¼Œè€Œæ˜¯è¦ä¿æŒTIME_WAITï¼Œå½“å†æ¬¡æ”¶åˆ°FINçš„æ—¶å€™ï¼Œèƒ½å¤Ÿä¿è¯å¯¹æ–¹æ”¶åˆ°ACKï¼Œæœ€åŽæ­£ç¡®çš„å…³é—­è¿žæŽ¥ã€‚\n\nå†è¯´ç¬¬äºŒç‚¹ï¼Œå¦‚æžœclientç›´æŽ¥CLOSEDï¼Œç„¶åŽåˆå†å‘serverå‘èµ·ä¸€ä¸ªæ–°è¿žæŽ¥ï¼Œæˆ‘ä»¬ä¸èƒ½ä¿è¯è¿™ä¸ªæ–°è¿žæŽ¥ä¸Žåˆšå…³é—­çš„è¿žæŽ¥çš„ç«¯å£å·æ˜¯ä¸åŒçš„ã€‚ä¹Ÿå°±æ˜¯è¯´æœ‰å¯èƒ½æ–°è¿žæŽ¥å’Œè€è¿žæŽ¥çš„ç«¯å£å·æ˜¯ç›¸åŒçš„ã€‚ä¸€èˆ¬æ¥è¯´ä¸ä¼šå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ç‰¹æ®Šæƒ…å†µå‡ºçŽ°ï¼šå‡è®¾æ–°è¿žæŽ¥å’Œå·²ç»å…³é—­çš„è€è¿žæŽ¥ç«¯å£å·æ˜¯ä¸€æ ·çš„ï¼Œå¦‚æžœå‰ä¸€æ¬¡è¿žæŽ¥çš„æŸäº›æ•°æ®ä»ç„¶æ»žç•™åœ¨ç½‘ç»œä¸­ï¼Œè¿™äº›å»¶è¿Ÿæ•°æ®åœ¨å»ºç«‹æ–°è¿žæŽ¥ä¹‹åŽæ‰åˆ°è¾¾Serverï¼Œç”±äºŽæ–°è¿žæŽ¥å’Œè€è¿žæŽ¥çš„ç«¯å£å·æ˜¯ä¸€æ ·çš„ï¼Œåˆå› ä¸ºTCPåè®®åˆ¤æ–­ä¸åŒè¿žæŽ¥çš„ä¾æ®æ˜¯socket pairï¼ŒäºŽæ˜¯ï¼ŒTCPåè®®å°±è®¤ä¸ºé‚£ä¸ªå»¶è¿Ÿçš„æ•°æ®æ˜¯å±žäºŽæ–°è¿žæŽ¥çš„ï¼Œè¿™æ ·å°±å’ŒçœŸæ­£çš„æ–°è¿žæŽ¥çš„æ•°æ®åŒ…å‘ç”Ÿæ··æ·†äº†ã€‚æ‰€ä»¥TCPè¿žæŽ¥è¿˜è¦åœ¨TIME_WAITçŠ¶æ€ç­‰å¾…2å€MSLï¼Œè¿™æ ·å¯ä»¥ä¿è¯æœ¬æ¬¡è¿žæŽ¥çš„æ‰€æœ‰æ•°æ®éƒ½ä»Žç½‘ç»œä¸­æ¶ˆå¤±ã€‚\n","tags":["HTTP"]},{"title":"HTTPç¼“å­˜ä¹‹åå•†ç¼“å­˜å’Œå¼ºåˆ¶ç¼“å­˜","url":"/http-cache/","content":"\né€šå¸¸æ ¹æ®æ˜¯å¦éœ€è¦å‘æœåŠ¡å™¨é‡æ–°å‘èµ·HTTPè¯·æ±‚åŽ»ç¡®è®¤ç¼“å­˜æ˜¯å¦æœ‰æ•ˆå°†ç¼“å­˜åˆ†ä¸ºå¼ºåˆ¶ç¼“å­˜å’Œåå•†ç¼“å­˜\n\n## å¼ºåˆ¶ç¼“å­˜\n`å¼ºåˆ¶ç¼“å­˜`å°±æ˜¯ç›´æŽ¥ä»Žæµè§ˆå™¨ç¼“å­˜æŸ¥æ‰¾è¯¥ç»“æžœï¼Œå¹¶æ ¹æ®ç»“æžœçš„ç¼“å­˜è§„åˆ™æ¥å†³å®šæ˜¯å¦ä½¿ç”¨è¯¥ç¼“å­˜çš„è¿‡ç¨‹ã€‚\n\n* ä¸å­˜åœ¨è¯¥ç¼“å­˜ç»“æžœå’Œæ ‡è¯†ï¼Œå¼ºåˆ¶ç¼“å­˜å¤±æ•ˆï¼Œåˆ™ç›´æŽ¥å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼ˆè·Ÿç¬¬ä¸€æ¬¡å‘èµ·è¯·æ±‚ä¸€è‡´ï¼‰\n* å­˜åœ¨ç¼“å­˜ç»“æžœå’Œæ ‡è¯†ï¼Œä½†ç»“æžœå·²å¤±æ•ˆï¼Œå¼ºåˆ¶ç¼“å­˜å¤±æ•ˆï¼Œåˆ™ä½¿ç”¨åå•†ç¼“å­˜\n* å­˜åœ¨ç¼“å­˜ç»“æžœå’Œæ ‡è¯†ï¼Œå¹¶ä¸”ç»“æžœæœªå¤±æ•ˆï¼Œå¼ºåˆ¶ç¼“å­˜ç”Ÿæ•ˆï¼Œç›´æŽ¥è¿”å›žè¯¥ç»“æžœ\n\næŽ§åˆ¶å¼ºåˆ¶ç¼“å­˜çš„å­—æ®µåˆ†åˆ«æ˜¯`Expires`å’Œ`Cache-Control`ï¼Œå…¶ä¸­`Cache-Control`ä¼˜å…ˆçº§æ¯”`Expires`é«˜ã€‚\n\n### Expires\n\n`Expires`æ˜¯HTTP/1.0æŽ§åˆ¶ç½‘é¡µç¼“å­˜çš„å­—æ®µï¼Œå…¶å€¼ä¸ºæœåŠ¡å™¨è¿”å›žè¯¥è¯·æ±‚ç»“æžœç¼“å­˜çš„åˆ°æœŸæ—¶é—´ï¼Œå³å†æ¬¡å‘èµ·è¯¥è¯·æ±‚æ—¶ï¼Œå¦‚æžœå®¢æˆ·ç«¯çš„æ—¶é—´å°äºŽ`Expires`çš„å€¼æ—¶ï¼Œç›´æŽ¥ä½¿ç”¨ç¼“å­˜ç»“æžœã€‚\n\n#### `Expires`æ˜¯HTTP/1.0çš„å­—æ®µï¼Œä½†çŽ°åœ¨æµè§ˆå™¨é»˜è®¤ä½¿ç”¨HTTP/1.1ï¼Œé‚£ä¹ˆHTTP/1.1ä¸­ç½‘é¡µç¼“å­˜æ˜¯å¦è¿˜æ˜¯ç”±`Expires`æŽ§åˆ¶ï¼Ÿ\n\nåˆ°äº†HTTP/1.1ï¼Œ`Expires`å·²ç»è¢«`Cache-Control`æ›¿ä»£ï¼ŒåŽŸå› åœ¨äºŽ`Expires`æŽ§åˆ¶ç¼“å­˜çš„åŽŸç†æ˜¯ä½¿ç”¨å®¢æˆ·ç«¯çš„æ—¶é—´å’ŒæœåŠ¡ç«¯è¿”å›žçš„æ—¶é—´åšå¯¹æ¯”ï¼Œé‚£ä¹ˆå¦‚æžœå®¢æˆ·ç«¯ä¸ŽæœåŠ¡ç«¯çš„æ—¶é—´å› ä¸ºæŸäº›åŽŸå› ï¼ˆä¾‹å¦‚æ—¶åŒºï¼‰å‘é€è¯¯å·®ï¼Œé‚£ä¹ˆå¼ºåˆ¶ç¼“å­˜åˆ™ä¼šç›´æŽ¥å¤±æ•ˆã€‚\n\n### Cache-Control\nåœ¨HTTP/1.1ä¸­ï¼Œ`Cache-Control`æ˜¯æœ€é‡è¦çš„è§„åˆ™ï¼Œä¸»è¦ç”¨äºŽæŽ§åˆ¶ç½‘é¡µç¼“å­˜ï¼Œä¸»è¦å–å€¼ä¸ºï¼š\n\n* `public`ï¼šæ‰€æœ‰å†…å®¹éƒ½å°†è¢«ç¼“å­˜ï¼ˆå®¢æˆ·ç«¯/ä»£ç†æœåŠ¡å™¨/CDNç­‰ï¼‰\n* `private`ï¼šåªæœ‰å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ï¼Œ`Cache-Control`é»˜è®¤å€¼\n* `no-cache`ï¼šå®¢æˆ·ç«¯ç¼“å­˜å†…å®¹ï¼Œä½†æ˜¯æ˜¯å¦ä½¿ç”¨ç¼“å­˜åˆ™éœ€è¦ç»è¿‡åå•†ç¼“å­˜æ¥éªŒè¯å†³å®š\n* `no-store`ï¼šæ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šè¢«ç¼“å­˜ï¼Œå³ä¸ä½¿ç”¨å¼ºåˆ¶ç¼“å­˜ï¼Œä¹Ÿä¸ä½¿ç”¨åå•†ç¼“å­˜\n* `max-age=xxx`ï¼šç¼“å­˜å°†åœ¨xxxç§’åŽå¤±æ•ˆ\n\n> `Cache-Control/Expires`åŒæ—¶å­˜åœ¨æ—¶ï¼Œåªæœ‰`Cache-Control`ç”Ÿæ•ˆ\n\n## åå•†ç¼“å­˜\n`åå•†ç¼“å­˜`å°±æ˜¯å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆåŽï¼Œæµè§ˆå™¨æºå¸¦ç¼“å­˜æ ‡è¯†å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œæœ‰æœåŠ¡å™¨æ ¹æ®ç¼“å­˜æ ‡è¯†å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜çš„è¿‡ç¨‹ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š\n\n1. åå•†ç¼“å­˜ç”Ÿæ•ˆï¼Œè¿”å›ž304ï¼ŒæœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨èµ„æºæœªæ›´æ–°ï¼Œåˆ™å†åŽ»æµè§ˆå™¨ç¼“å­˜ä¸­è®¿é—®èµ„\næº\n2. åå•†ç¼“å­˜å¤±æ•ˆï¼Œè¿”å›ž200å’Œè¯·æ±‚ç»“æžœ\n\nåŒæ ·ï¼Œåå•†ç¼“å­˜çš„æ ‡è¯†ä¹Ÿæ˜¯åœ¨å“åº”æŠ¥æ–‡çš„HTTPå¤´å’Œè¯·æ±‚ç»“æžœä¸€èµ·è¿”å›žç»™æµè§ˆå™¨çš„ï¼ŒæŽ§åˆ¶åå•†ç¼“å­˜çš„å­—æ®µåˆ†åˆ«æœ‰ï¼š\n\n* `Last-Modified/If-Modified-Since`\n* `Etag/If-None-Match`\n\nå…¶ä¸­`Etag/If-None-Match`ä¼˜å…ˆçº§æ¯”`Last-Modified/If-Modified-Since`é«˜\n\n### Last-Modified/If-Modified-Since\n`Last-Modified`æ˜¯æœåŠ¡å™¨å“åº”è¯·æ±‚æ—¶ï¼Œè¿”å›žè¯¥èµ„æºæ–‡ä»¶åœ¨æœåŠ¡å™¨æœ€åŽè¢«ä¿®æ”¹çš„æ—¶é—´ã€‚\n\n`If-Modified-Since`åˆ™æ˜¯å®¢æˆ·ç«¯å†æ¬¡å‘èµ·è¯¥è¯·æ±‚æ—¶ï¼Œæºå¸¦ä¸Šæ¬¡è¯·æ±‚è¿”å›žçš„`Last-Modified`å€¼ï¼Œé€šè¿‡æ­¤å­—æ®µå‘Šè¯‰æœåŠ¡å™¨è¯¥èµ„æºä¸Šæ¬¡è¯·æ±‚è¿”å›žçš„æœ€åŽè¢«ä¿®æ”¹æ—¶é—´ã€‚æœåŠ¡å™¨æ”¶åˆ°è¯¥è¯·æ±‚ï¼Œå‘çŽ°è¯·æ±‚å¤´å«æœ‰`If-Modified-Since`å­—æ®µï¼Œåˆ™ä¼šæ ¹æ®`If-Modified-Since`çš„å­—æ®µå€¼ä¸Žè¯¥èµ„æºåœ¨æœåŠ¡å™¨çš„æœ€åŽè¢«ä¿®æ”¹æ—¶é—´åšå¯¹æ¯”ï¼Œè‹¥æœåŠ¡å™¨çš„èµ„æºæœ€åŽä¿®æ”¹æ—¶é—´å¤§äºŽ`If-Modified-Since`çš„å­—æ®µå€¼ï¼Œåˆ™é‡æ–°è¿”å›žèµ„æºï¼ŒçŠ¶æ€ç ä¸º200ï¼›å¦åˆ™è¿”å›ž304ï¼Œä»£è¡¨èµ„æºæ— æ›´æ–°ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜æ–‡ä»¶ã€‚\n\n### Etag/If-None-Match\n`Etag`æ˜¯æœåŠ¡å™¨å“åº”è¯·æ±‚æ—¶ï¼Œè¿”å›žå½“å‰èµ„æºæ–‡ä»¶çš„ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼ˆç”±æœåŠ¡å™¨ç”Ÿæˆï¼‰ã€‚\n\n`If-None-Match`æ˜¯å®¢æˆ·ç«¯å†æ¬¡å‘èµ·è¯·æ±‚æ—¶ï¼Œæºå¸¦ä¸Šæ¬¡è¯·æ±‚è¿”å›žçš„å”¯ä¸€æ ‡è¯†Etagå€¼ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°è¯¥è¯·æ±‚åŽï¼Œå‘çŽ°è¯¥è¯·æ±‚å«æœ‰`If-None-Match`ï¼Œåˆ™ä¼šæ ¹æ®`If-None-Match`çš„å­—æ®µå€¼ä¸Žè¯¥èµ„æºåœ¨æœåŠ¡å™¨çš„Etagå€¼åšå¯¹æ¯”ï¼Œä¸€è‡´åˆ™è¿”å›ž304ï¼Œä»£è¡¨èµ„æºæ— æ›´æ–°ï¼Œç»§ç»­ä½¿ç”¨ç¼“å­˜æ–‡ä»¶ï¼Œå¦åˆ™é‡æ–°è¿”å›žèµ„æºï¼ŒçŠ¶æ€ç ä¸º200.\n\n## æ€»ç»“\n`å¼ºåˆ¶ç¼“å­˜`ä¼˜å…ˆäºŽ`åå•†ç¼“å­˜`ï¼Œè‹¥å¼ºåˆ¶ç¼“å­˜ç”Ÿæ•ˆåˆ™ç›´æŽ¥ä½¿ç”¨ç¼“å­˜ï¼Œè‹¥ä¸ç”Ÿæ•ˆåˆ™è¿›è¡Œåå•†ç¼“å­˜ï¼Œåå•†ç¼“å­˜ç”±æœåŠ¡å™¨å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜ï¼Œè‹¥åå•†ç¼“å­˜å¤±æ•ˆï¼Œé‚£ä¹ˆä»£è¡¨è¯¥è¯·æ±‚çš„ç¼“å­˜å¤±æ•ˆï¼Œé‡æ–°èŽ·å–è¯·æ±‚ç»“æžœï¼Œå†å­˜å…¥æµè§ˆå™¨ç¼“å­˜ä¸­ï¼›ç”Ÿæ•ˆåˆ™è¿”å›ž304ï¼Œç»§ç»­ä½¿ç”¨ç¼“å­˜ã€‚\n","tags":["HTTP"]},{"title":"æŠ€æœ¯ç²¾é€‰ - ç¬¬2æœŸ","url":"/hotlink-2/","content":"\n[å…·æœ‰â€œè„šæœ¬é­”åŠ›â€çš„å±žæ€§ä»¬](https://mp.weixin.qq.com/s/8znEKWxCahJE1zSf9Zky_Q)\nå±žæ€§çš„â€œè„šæœ¬é­”åŠ›â€ï¼Œæ˜¯æŒ‡ä»…ä»…é€šè¿‡ä¸€è¡Œç®€å•çš„å±žæ€§è®¾ç½®ï¼Œå°±èƒ½å®žçŽ°çœ‹èµ·æ¥è¦ JS æ‰èƒ½å®Œæˆçš„äº¤äº’åŠŸèƒ½ã€‚åŒ…æ‹¬ä½†ä¸é™äºŽ\n\n[å®Œå…¨ç†è§£ reduxï¼ˆä»Žé›¶å®žçŽ°ä¸€ä¸ª reduxï¼‰](https://mp.weixin.qq.com/s/jfDrhX6jMr36dRaFCH9Xbw)\nè®°å¾—å¼€å§‹æŽ¥è§¦ react æŠ€æœ¯æ ˆçš„æ—¶å€™ï¼Œæœ€éš¾ç†è§£çš„åœ°æ–¹å°±æ˜¯ reduxã€‚å…¨æ˜¯æ–°åè¯ï¼šreducerã€storeã€dispatchã€middleware ç­‰ç­‰ï¼Œæˆ‘å°±ç†è§£ state ä¸€ä¸ªåè¯ã€‚\n\n[ç”¨ Service Worker å®žçŽ°å‰ç«¯æ€§èƒ½ä¼˜åŒ–](https://mp.weixin.qq.com/s/SLG_cDxDo7BaoQqAyLGa-Q)\nè¯´èµ·å‰ç«¯æ€§èƒ½ä¼˜åŒ–, æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„å¯èƒ½å°±æ˜¯ç”¨ Gulp ã€Webpack ä¹‹ç±»çš„è‡ªåŠ¨åŒ–æž„å»ºå·¥å…·å¯¹ HTMLã€CSS ã€JS ä»£ç è¿›è¡ŒåŽ‹ç¼©ï¼ŒåŒæ—¶ä¼˜åŒ–å›¾ç‰‡èµ„æºã€‚å†è€…å°±æ˜¯ä½¿ç”¨ CSS Sprite æˆ–è€…å¯¹äºŽè¾ƒå°çš„å›¾ç‰‡ç”¨ base64 ç›´æŽ¥ç¼–ç æ¥è¿›è¡Œä¼˜åŒ–ã€‚å½“ç„¶è¿˜æœ‰å¾ˆå¤šå¯ä»¥ä¼˜åŒ–çš„æ–¹å‘ï¼Œä¾‹å¦‚è€ƒè™‘æµè§ˆå™¨ç¼“å­˜ã€é¡µé¢æ¸²æŸ“æ€§èƒ½ ( å‡å°‘é‡æŽ’ä¸Žé‡ç»˜ä¸Ž GPU ç¡¬ä»¶åŠ é€Ÿ ) ã€JSé˜»å¡žæ€§èƒ½ç­‰ç­‰ã€‚ä½†æˆ‘ä»¬ä»Šå¤©è®²çš„æ˜¯å¦‚ä½•åˆ©ç”¨ç¼“å­˜ç­–ç•¥åœ¨é€‚å®œçš„æƒ…å†µä¸‹ç›´æŽ¥å‡å°‘å¯¹å‰ç«¯æ•°æ®çš„è¯·æ±‚é‡ä»Žè€Œè¾¾åˆ°å‰ç«¯æ€§èƒ½çš„ä¼˜åŒ–ã€‚å› æ­¤ Service Worker ä»¥åŠå…¶ç›¸å…³çš„ API å°±æˆä¸ºäº†æˆ‘ä»¬ä»Šå¤©çš„ä¸»è§’ã€‚\n\n[TypeScript æŠ€å·§æ‹¾é—](https://mp.weixin.qq.com/s/pMGOecpnploICBqoAAg9fQ)\nå¾ˆæ—©ä»¥å‰å°±å°è¯•è¿‡ä½¿ç”¨ TypeScript æ¥è¿›è¡Œæ—¥å¸¸ç¼–ç ï¼Œä½†è‡ªå·±å¯¹é™æ€ç±»åž‹è¯­è¨€çš„äº†è§£å¹¶ä¸æ·±å…¥ï¼Œå†åŠ ä¸Š TypeScript çš„ç±»åž‹ç³»ç»Ÿæœ‰ç€ä¸€å®šçš„å¤æ‚åº¦ï¼Œå› æ­¤æ„Ÿè§‰è‡ªå·±å¹¶æ²¡æœ‰å‘æŒ¥å¥½è¿™é—¨è¯­è¨€çš„ä¼˜åŠ¿ï¼Œä½¿ä»£ç å˜å¾—æ›´å…·å¯è¯»æ€§ä¸Žå¯ç»´æŠ¤æ€§ã€‚äºŽæ˜¯è¿™å‡ å¤©ä¾¿æƒ³ç€å¥½å¥½ç ”ç©¶ä¸‹è¿™é—¨è¯­è¨€ï¼Œå¸Œæœ›èƒ½å¤Ÿæ€»ç»“å‡ºä¸€äº›ç‰¹åˆ«çš„è¯­è¨€ç‰¹æ€§ä¸Žå®žç”¨æŠ€å·§ã€‚\n\n[ä»Žé›¶å¼€å§‹å†™ä¸€ä¸ªç¬¦åˆPromises/A+è§„èŒƒçš„promise](https://mp.weixin.qq.com/s/JMnJUCVLMX15mTkIe4U6lQ)\næœ¬ç¯‡ä¸»è¦è®²è§£å¦‚ä½•ä»Žé›¶å¼€å§‹ä¸€æ­¥æ­¥çš„å®žçŽ°promiseå„é¡¹ç‰¹æ€§åŠåŠŸèƒ½ï¼Œæœ€ç»ˆä½¿å…¶ç¬¦åˆPromises/A+è§„èŒƒï¼Œå› ä¸ºè®²è§£è¾ƒç»†ï¼Œæ‰€ä»¥æ–‡ç« ç•¥é•¿ã€‚å¦å¤–ï¼Œæ¯ä¸€æ­¥çš„é¡¹ç›®æºç éƒ½åœ¨githubä¸Šï¼Œå¯ä»¥å¯¹ç…§å‚è€ƒï¼Œæ¯ä¸€æ­¥éƒ½æœ‰å¯¹åº”çš„é¡¹ç›®ä»£ç åŠæµ‹è¯•ä»£ç ï¼Œå–œæ¬¢çš„è¯ï¼Œæ¬¢è¿Žç»™ä¸ªstar~\n\n[ã€Œæ‰‹æ‘¸æ‰‹è®¾è®¡æ¨¡å¼ç³»åˆ—ã€äº«å…ƒæ¨¡å¼ä¸Žèµ„æºæ± ](https://mp.weixin.qq.com/s/sPVuiUTOvu1KsRwEOhMQ2g)\näº«å…ƒæ¨¡å¼ ï¼ˆFlyweight Patternï¼‰è¿ç”¨å…±äº«æŠ€æœ¯æ¥æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦å¯¹è±¡çš„å¤ç”¨ï¼Œä»¥å‡å°‘åˆ›å»ºçš„å¯¹è±¡çš„æ•°é‡ã€‚\n\n[å‰ç«¯ä¸­çš„ç¼–è¯‘åŽŸç† - ä»Žé›¶æ‰“é€ ä¸€ä¸ªå®žç”¨çš„ Babel æ’ä»¶](https://mp.weixin.qq.com/s/XSzQ5nkLI369CDhMZtF-MQ)\nè¯´èµ·ç¼–è¯‘åŽŸç†ï¼Œå¯èƒ½æˆ‘ä»¬è„‘æµ·ä¸­é¦–å…ˆæµ®çŽ°çš„å°±æ˜¯ â€œç¼–è¯‘å™¨â€ è¿™ä¸ªè¯æ±‡ã€‚ç»´åŸºç™¾ç§‘ä¸Šå¯¹ç¼–è¯‘å™¨çš„å®šä¹‰æ˜¯ï¼šç¼–è¯‘å™¨æ˜¯ä¸€ç§è®¡ç®—æœºç¨‹åºï¼Œå®ƒä¼šå°†æŸç§ç¼–ç¨‹è¯­è¨€å†™æˆçš„æºä»£ç ï¼ˆåŽŸå§‹è¯­è¨€ï¼‰è½¬æ¢æˆå¦ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼ˆç›®æ ‡è¯­è¨€ï¼‰ã€‚ é€šå¸¸ä¸€ä¸ªç¼–è¯‘å™¨çš„ç¼–è¯‘è¿‡ç¨‹ä¼šç»è¿‡è¯æ³•åˆ†æžã€è¯­æ³•åˆ†æžã€è¯­ä¹‰åˆ†æžã€ç”Ÿæˆä¸­é—´ä»£ç ã€ä¼˜åŒ–ã€ç”Ÿæˆç›®æ ‡ä»£ç è¿™å‡ ä¸ªé˜¶æ®µã€‚å¦‚æžœå°†å…¶ç®€è¦æ¦‚æ‹¬ï¼Œåˆ™åªåŒ…å« è§£æž ( parse ) ã€è½¬æ¢ ( transform ) ã€ç”Ÿæˆ ( generate ) è¿™ä¸‰ä¸ªé˜¶æ®µã€‚\n\n[å‰ç«¯å·¥ç¨‹å¸ˆéœ€è¦äº†è§£çš„ Babel çŸ¥è¯†](https://mp.weixin.qq.com/s/zQ5kCgoUbTOTqARI5o2cBQ)\nåœ¨å‰ç«¯åœˆå­é‡Œï¼Œå¯¹äºŽ Babelï¼Œå¤§å®¶è‚¯å®šéƒ½æ¯”è¾ƒç†Ÿæ‚‰äº†ã€‚å¦‚æžœå“ªå¤©å°‘äº†å®ƒï¼Œå¯¹äºŽå‰ç«¯å·¥ç¨‹å¸ˆæ¥è¯´è‚¯å®šæ˜¯ä¸ªå™©æ¢¦ã€‚Babel çš„å·¥ä½œåŽŸç†æ˜¯æ€Žæ ·çš„å¯èƒ½äº†è§£çš„äººå°±ä¸å¤ªå¤šäº†ã€‚\n","tags":["ç²¾é€‰"]},{"title":"mongodb Query å’Œ Projection å¸¸ç”¨æ“ä½œç¬¦","url":"/mongodb-query-and-projection-operators/","content":"\n> [æ–‡æ¡£é“¾æŽ¥](https://docs.mongodb.com/manual/reference/operator/query/)\n\n## æ¯”è¾ƒè¿ç®—ç¬¦\n\n### $eq\n`{ <field>: { $eq: <value> } }`\né€‰æ‹©ï¼šç­‰äºŽæŸä¸ªå€¼\n\n### $gt\n`{field: {$gt: value} }`\né€‰æ‹©ï¼šå¤§äºŽæŸä¸ªå€¼\n\n### $gte\n`{field: {$gte: value} }`\né€‰æ‹©ï¼šå¤§äºŽç­‰äºŽæŸä¸ªå€¼\n\n### $in\n`{ field: { $in: [<value1>, <value2>, ... <valueN> ] } }`\né€‰æ‹©ï¼š\n1. filedæ˜¯ä¸€ä¸ªå€¼ï¼Œå¹¶ä¸”ç­‰äºŽvalue1 or value2 ...\n1. fieldæ˜¯ä¸ªæ•°ç»„ï¼Œå¹¶ä¸”filedä¸­è‡³å°‘å­˜åœ¨æŸä¸ªå€¼ç­‰äºŽvalue1 or value2 ...\n\n### $lt\n`{field: {$lt: value} }`\né€‰æ‹©ï¼šå°äºŽæŸä¸ªå€¼\n\n### $lte\n`{ field: { $lte: value} }`\né€‰æ‹©ï¼šå°äºŽç­‰äºŽæŸä¸ªå€¼\n\n### $ne\n`{field: {$ne: value} }`\n\né€‰æ‹©ï¼š\n1. fieldä¸ç­‰äºŽæŸä¸ªå€¼\n2. fieldä¸å­˜åœ¨\n\n### $nin\n`{ field: { $nin: [ <value1>, <value2> ... <valueN> ]} }`\n\né€‰æ‹©ï¼š\n1. fieldå€¼ä¸å­˜åœ¨äºŽæ•°ç»„ä¸­\n2. fieldä¸å­˜åœ¨\n\n## é€»è¾‘è¿ç®—ç¬¦\n### $and\n`{ $and: [ { <expression1> }, { <expression2> } , ... , { <expressionN> } ] }`\n\né€‰æ‹©åŒæ—¶åŒ¹é…æ‰€æœ‰expressionçš„æ•°æ®\n\n> å¦‚æžœexpression1ä¸ºfalseï¼Œåˆ™mongodbä¸ä¼šç»§ç»­åŽç»­çš„åˆ¤æ–­\n\n### $not\n`{ field: { $not: { <operator-expression> } } }`\n\né€‰æ‹©æ‰€æœ‰ä¸ç¬¦åˆoperator-expressionçš„æ•°æ®ã€‚\n\n```\n// é€‰æ‹©æ‰€æœ‰priceå°äºŽç­‰äºŽ1.99æˆ–è€…priceå­—æ®µä¸å­˜åœ¨çš„æ•°æ®\ndb.inventory.find( { price: { $not: { $gt: 1.99 } } } )\n```\n\n### $nor\n`{ $nor: [ { <expression1> }, { <expression2> }, ...  { <expressionN> } ] }`\n\né€‰æ‹©åŒæ—¶ä¸æ»¡è¶³æ‰€æœ‰expressionçš„æ•°æ®\n\n### $or\n`{ $or: [ { <expression1> }, { <expression2> }, ... , { <expressionN> } ] }`\n\né€‰æ‹©è‡³å°‘æ»¡è¶³ä¸€ä¸ªexpressionçš„æ•°æ®\n\n## å…ƒç´ è¿ç®—ç¬¦\n### $exists\n`{ field: { $exists: <boolean> } }`\n\né€‰æ‹©filedæ˜¯å¦å­˜åœ¨çš„æ•°æ®ï¼Œ$exists: trueä»£è¡¨å­˜åœ¨ï¼Œfalseä»£è¡¨ä¸å­˜åœ¨\n\n### $type\n`{ field: { $type: <BSON type> } }`\né€‰æ‹©filedæ˜¯æŸä¸ªå…·ä½“ç±»åž‹çš„å®žä¾‹çš„æ•°æ®ï¼Œå¯ä»¥å†™å…·ä½“typeæˆ–è€…å¯¹åº”æ•°å­—\n\nå…·ä½“BSON typeå¯ä»¥çœ‹æ–‡æ¡£ï¼šhttps://docs.mongodb.com/manual/reference/operator/query/type/#document-type-available-types\n\n## æ•°ç»„è¿ç®—ç¬¦\n### $all\n`{ <field>: { $all: [ <value1> , <value2> ... ] } }`\n\né€‰æ‹©filedæ˜¯ä¸ªæ•°ç»„ï¼Œå¹¶ä¸”åŒ…å«æ‰€æœ‰value1 and value2 ...\n\n### $elemMatch\n`{ <field>: { $elemMatch: { <query1>, <query2>, ... } } }`\n\né€‰æ‹©filedæ˜¯ä¸ªæ•°ç»„å¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ æ»¡è¶³query1 or query2 ...\n\n> å¦‚æžœqueryåªæœ‰ä¸€ä¸ªï¼Œé‚£ä¹ˆä½ ä¸éœ€è¦ä½¿ç”¨$elemMatch\n\n### $size\n`db.collection.find( { field: { $size: 2 } } );`\n\né€‰æ‹©filedæ•°ç»„é•¿åº¦ç­‰äºŽæŸä¸ªå€¼çš„æ•°æ®\n\n## projectionè¿ç®—ç¬¦\n\n### $\n```\n// ç¤ºä¾‹æ•°æ®\n{ \"_id\" : 1, \"semester\" : 1, \"grades\" : [ 70, 87, 90 ] }\n{ \"_id\" : 2, \"semester\" : 1, \"grades\" : [ 90, 88, 92 ] }\n{ \"_id\" : 3, \"semester\" : 1, \"grades\" : [ 85, 100, 90 ] }\n{ \"_id\" : 4, \"semester\" : 2, \"grades\" : [ 79, 85, 80 ] }\n{ \"_id\" : 5, \"semester\" : 2, \"grades\" : [ 88, 88, 92 ] }\n{ \"_id\" : 6, \"semester\" : 2, \"grades\" : [ 95, 90, 96 ] }\n\n// åªè¿”å›žgradesæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ \ndb.students.find( { semester: 1, grades: { $gte: 85 } },\n                  { \"grades.$\": 1 } )\n// ç»“æžœä¸ºï¼š\n{ \"_id\" : 1, \"grades\" : [ 87 ] }\n{ \"_id\" : 2, \"grades\" : [ 90 ] }\n{ \"_id\" : 3, \"grades\" : [ 85 ] }\n\n// { \"grades.$\": 1 } è¿™é‡Œçš„1åªæ˜¯ä»£è¡¨æ˜¾ç¤ºgradeså­—æ®µ\n```\n\n### $elemMatch\nç”¨äºŽæŽ§åˆ¶æ•°æ®è¿”å›žå€¼ï¼Œåªä¼šæ˜¾ç¤ºæŸä¸ªå­—æ®µç¬¬ä¸€ä¸ªæ»¡è¶³$elemMatchçš„å…ƒç´ \n\n```\n// ç¤ºä¾‹æ•°æ®\n{\n _id: 1,\n zipcode: \"63109\",\n students: [\n              { name: \"john\", school: 102, age: 10 },\n              { name: \"jess\", school: 102, age: 11 },\n              { name: \"jeff\", school: 108, age: 15 }\n           ]\n}\n{\n _id: 2,\n zipcode: \"63110\",\n students: [\n              { name: \"ajax\", school: 100, age: 7 },\n              { name: \"achilles\", school: 100, age: 8 },\n           ]\n}\n{\n _id: 3,\n zipcode: \"63109\",\n students: [\n              { name: \"ajax\", school: 100, age: 7 },\n              { name: \"achilles\", school: 100, age: 8 },\n           ]\n}\n{\n _id: 4,\n zipcode: \"63109\",\n students: [\n              { name: \"barney\", school: 102, age: 7 },\n              { name: \"ruth\", school: 102, age: 16 },\n           ]\n}\n\ndb.schools.find( { zipcode: \"63109\" },\n                 { students: { $elemMatch: { school: 102 } } } )\n// ç»“æžœä¸ºï¼š\n{ \"_id\" : 1, \"students\" : [ { \"name\" : \"john\", \"school\" : 102, \"age\" : 10 } ] }\n{ \"_id\" : 3 }\n{ \"_id\" : 4, \"students\" : [ { \"name\" : \"barney\", \"school\" : 102, \"age\" : 7 } ] }\n\n\n\ndb.schools.find( { zipcode: \"63109\" },\n                 { students: { $elemMatch: { school: 102, age: { $gt: 10} } } } )\n// ç»“æžœä¸ºï¼š\n{ \"_id\" : 1, \"students\" : [ { \"name\" : \"jess\", \"school\" : 102, \"age\" : 11 } ] }\n{ \"_id\" : 3 }\n{ \"_id\" : 4, \"students\" : [ { \"name\" : \"ruth\", \"school\" : 102, \"age\" : 16 } ] }\n```\n\n### $slice\n`db.collection.find( { field: value }, { array: {$slice: count } } )`\n\nç”¨äºŽæŽ§åˆ¶æŸä¸ªæ•°ç»„å­—æ®µè¿”å›žå¤šå°‘ä¸ªå…ƒç´ \n\n```\n// è¿”å›žcommentså‰5ä¸ªå…ƒç´ \ndb.posts.find( {}, { comments: { $slice: 5 } } )\n\n// è¿”å›žæœ€åŽ5ä¸ªå…ƒç´ \n//db.posts.find( {}, { comments: { $slice: -5 } } )\n```\n\n$sliceè¿˜å¯ä»¥æ˜¯ä¸ªæ•°ç»„ï¼Œå³[skip, limit]ï¼Œè¡¨æ˜Žè·³åˆ°ç¬¬skipä¸ªå…ƒç´ ï¼Œä»Žè¿™é‡Œé€‰æ‹©limitä¸ªã€‚\n\n```\n// è·³è¿‡å‰20ä¸ªå…ƒç´ ï¼Œç„¶åŽå¼€å§‹å¾€åŽé€‰æ‹©10ä¸ª\ndb.posts.find( {}, { comments: { $slice: [ 20, 10 ] } } )\n\n// ä»Žå€’æ•°ç¬¬20ä¸ªå…ƒç´ å¼€å§‹ï¼Œå¾€åŽé€‰æ‹©10ä¸ªå…ƒç´ \ndb.posts.find( {}, { comments: { $slice: [ -20, 10 ] } } )\n```\n\nè¿˜æœ‰ä¸€äº›å…¶ä»–æ“ä½œç¬¦ï¼Œå¯ä»¥å‚è€ƒæ–‡æ¡£ã€‚\n","tags":["mongodb"]},{"title":"æŠ€æœ¯ç²¾é€‰ - ç¬¬1æœŸ","url":"/hotlink-1/","content":"\n[ç½‘ç«™æ€§èƒ½æŒ‡æ ‡è¿™ä¹ˆå¤šï¼Œä½ åˆ°åº•é€‰å¯¹äº†å—](https://mp.weixin.qq.com/s/ITb0IWzLPj715NUgL7C4HA)\nä»Žç”¨æˆ·ä½“éªŒè§’åº¦æ¥çœ‹ä¸€ä¸ªç½‘å€æˆ–è€…appæ˜¯å¦æœ‰å¸å¼•åŠ›ï¼Œ75%çš„äººæ˜¯è®¤ä¸ºé¡µé¢åŠ è½½æ—¶é•¿æ˜¯ä¸€ä¸ªæ ¸å¿ƒå› ç´ ï¼Œè¿œè¿œé«˜äºŽå…¶ä»–å½±å“ç”¨æˆ·ä½“éªŒçš„é—®é¢˜ï¼Œä¾‹å¦‚ï¼šç®€æ´æ˜“ç”¨ã€å±å¹•é€‚é…ã€è®¾è®¡å¸å¼•åŠ›ç­‰ç­‰ã€‚\n\n[npm install åŽŸç†åˆ†æž](https://mp.weixin.qq.com/s/byX6V6fL9O1SuEdppZO2CA)\nå¼€é—¨è§å±±ï¼Œnpm install å¤§æ¦‚ä¼šç»è¿‡ä¸Šé¢çš„å‡ ä¸ªæµç¨‹ï¼Œæœ¬ç¯‡æ–‡ç« æ¥è®²ä¸€è®²å„ä¸ªæµç¨‹çš„å®žçŽ°ç»†èŠ‚ã€å‘å±•ä»¥åŠä¸ºä½•è¦è¿™æ ·å®žçŽ°ã€‚\n\n[Webpack æ’ä»¶å¼€å‘å¦‚æ­¤ç®€å•ï¼](https://mp.weixin.qq.com/s/nimOuftziXCWHV61FfjWog)\næœ¬æ–‡å°†å¸¦ä½ ä¸€èµ·å¼€å‘ç¬¬ä¸€ä¸ª Webpack æ’ä»¶ï¼Œä»Ž Webpack é…ç½®å·¥ç¨‹å¸ˆï¼Œè¿ˆå‘ Webpack å¼€å‘å·¥ç¨‹å¸ˆï¼\n\n[è®©ä½ ç‰›BåŠ èº«çš„å‰ç«¯å¿…ä¼šLinuxå‘½ä»¤](https://mp.weixin.qq.com/s/80UEbeEfPBV2LMmRqJFT7w)\næœ¬æ–‡ä¸»è¦é’ˆå¯¹äºŽ FEer ä»¬ã€‚ä½œä¸ºå‰ç«¯ï¼Œä¸€å¼€å§‹æˆ‘ä»¬æ€»æ˜¯å’Œ HTML/JavaScript/CSS ä¸‰å¤§å—æ‰“äº¤é“ï¼Œä½†æ˜¯ä¹…è€Œä¹…ä¹‹ï¼Œæˆ‘ä»¬å°±ä¼šæŽ¥è§¦æ›´å¤šçš„å†…å®¹ï¼Œæ¯”å¦‚æœåŠ¡çš„éƒ¨ç½²ã€‚è€Œè¿™ä¸€å—å¯¹äºŽæˆ‘ä»¬çš„è¦æ±‚ä¼šæ›´å…¨é¢ï¼Œå…¶ä¸­å¯¹ Linux æŒ‡ä»¤å°±æœ‰å¾ˆå¤šè¦æ±‚ã€‚å¦‚æžœä½ æƒ³è¦éƒ¨ç½²æœåŠ¡ï¼Œè€Œåˆæ²¡æœ‰æˆç†Ÿçš„å·¥å…·æˆ–å¹³å°å¯ä»¥å€ŸåŠ©ï¼Œéœ€è¦å®Œå…¨è‡ªå·±æ¥æ“ä½œçš„è¯ï¼Œä½ å°±éœ€è¦å‡†å¤‡å¥½éƒ¨ç½²æœåŠ¡éœ€è¦çš„æ‰€æœ‰æ–‡ä»¶ã€ç™»å½•æŒ‡å®šçš„æœåŠ¡å™¨ã€å‘å¸ƒæŒ‡å®šæ–‡ä»¶ã€å¯åŠ¨æœåŠ¡ã€æœåŠ¡å™¨å¯åŠ¨ä¸æˆåŠŸæ—¶å€™è¿›è¡Œè°ƒè¯•ä»¥åŠæœåŠ¡ç»´æŠ¤è¿‡ç¨‹ä¸­è¿›è¡Œé—®é¢˜çš„æŽ’æŸ¥ã€‚æœ¬æ–‡å°±å°†ä»Žè¿™ä¸€æ¡çº¿è®²èµ·ï¼Œåˆ†äº«æ­ªé©¬åœ¨å·¥ä½œä¸­æ‰€ç§¯ç´¯çš„ä¸€äº›å®žç”¨æŒ‡ä»¤ã€‚\n\n[ç»™ä½ æ¢³ç†äº† 44 ä¸ª CSS ç²¾é€‰çŸ¥è¯†ç‚¹](https://mp.weixin.qq.com/s/Pw3VgFpijTYRkJyYPvlJgA)\nä¸€ä¸ªå‘¨äº”çš„æ™šä¸Šï¼Œé—²æ¥æ— äº‹æ•´ç†ä¸‹è‡ªå·±çš„ githubï¼ˆç»å¸¸åšæ”¶è—å…šï¼‰ï¼Œä»Šå¤©æ‰“ç®—éƒ½è¿‡ä¸€éï¼Œå‘çŽ°ä¸€ä¸ª starå¾ˆé«˜çš„é¡¹ç›®ï¼Œé‡Œé¢æœ‰å¤§é‡çš„ CSS ç‰‡æ®µï¼Œè€Œä¸”æ ‡é¢˜å¾ˆè¯±äººï¼Œç„¶åŽåˆèŠ±äº†å°†è¿‘1ä¸ªå°æ—¶ä»Žå¤´åˆ°å°¾è¿‡äº†ä¸€éï¼Œå…¶ä¸­ä¸€äº›æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œå¦å¤–ä¹ŸåŒ…å«ä¸€äº›æ¯”è¾ƒæ–°çš„å±žæ€§çš„åº”ç”¨ï¼ŒçŸ¥è¯†ç‚¹æŒºå¤šçš„ï¼Œä¸ºäº†è®©å¤§å®¶çœ‹èµ·æ¥æ›´æ–¹ä¾¿äº›ï¼Œç„¶åŽåˆèŠ±äº†ç‚¹ï¼ˆå¾ˆé•¿å¾ˆé•¿ï¼‰æ—¶é—´ç¿»è¯‘æˆä¸­æ–‡ã€‚\n\n[ä½ å¿…é¡»æ‡‚çš„å‰ç«¯æ€§èƒ½ä¼˜åŒ–](https://mp.weixin.qq.com/s/DdbaiuZd4RbqUod0jhn_vg)\nä»Žè¾“å…¥ URL åˆ°é¡µé¢åŠ è½½å®Œæˆçš„è¿‡ç¨‹ï¼š\n\né¦–å…ˆåš DNS æŸ¥è¯¢ï¼Œå¦‚æžœè¿™ä¸€æ­¥åšäº†æ™ºèƒ½ DNS è§£æžçš„è¯ï¼Œä¼šæä¾›è®¿é—®é€Ÿåº¦æœ€å¿«çš„ IP åœ°å€å›žæ¥\n æŽ¥ä¸‹æ¥æ˜¯ TCP æ¡æ‰‹ï¼Œåº”ç”¨å±‚ä¼šä¸‹å‘æ•°æ®ç»™ä¼ è¾“å±‚ï¼Œè¿™é‡Œ TCP åè®®ä¼šæŒ‡æ˜Žä¸¤ç«¯çš„ç«¯å£å·ï¼Œç„¶åŽä¸‹å‘ç»™ç½‘ç»œå±‚ã€‚ç½‘ç»œå±‚ä¸­çš„ IP åè®®ä¼šç¡®å®š IP åœ°å€ï¼Œå¹¶ä¸”æŒ‡ç¤ºäº†æ•°æ®ä¼ è¾“ä¸­å¦‚ä½•è·³è½¬è·¯ç”±å™¨ã€‚ç„¶åŽåŒ…ä¼šå†è¢«å°è£…åˆ°æ•°æ®é“¾è·¯å±‚çš„æ•°æ®å¸§ç»“æž„ä¸­ï¼Œæœ€åŽå°±æ˜¯ç‰©ç†å±‚é¢çš„ä¼ è¾“äº†\n\n[æ·±å…¥ç†è§£ JavaScript åŽŸåž‹](https://mp.weixin.qq.com/s/qg9LNm3awHBao1Du5n6KMQ)\nPrototype æ˜¯ JavaScript é‡Œçš„ä¸€ä¸ªåŸºç¡€æ¦‚å¿µï¼ŒåŽŸæœ¬åº”è¯¥å¾ˆå®¹æ˜“ç†è§£ã€‚ç„¶è€Œï¼Œå‡ºäºŽå„ç§åŽŸå› ï¼Œå¤§éƒ¨åˆ†å‰ç«¯å¼€å‘è€…ï¼ˆåŒ…æ‹¬æˆ‘ï¼‰ï¼Œåœ¨åˆšå¼€å§‹å­¦ä¹  JS æ—¶ï¼ŒåŽŸåž‹å’ŒåŽŸåž‹é“¾éƒ½æ˜¯ä¸€ä¸ªéœ€è¦å…‹æœçš„å›°éš¾ã€‚\n\n[Promise é“¾å¼è°ƒç”¨é¡ºåºå¼•å‘çš„æ€è€ƒ](https://mp.weixin.qq.com/s/zTVRIwmA_9oQ-Ea_b1oqqA)\nè¿‘ä¸€ä¸ªå¤šæœˆæ²¡æœ‰å†™åšå®¢äº†ï¼Œå‰é˜µå­ä¸€ä¸ªæœ‹å‹é—®æˆ‘ä¸€ä¸ªå…³äºŽ Promise é“¾å¼è°ƒç”¨æ‰§è¡Œé¡ºåºçš„é—®é¢˜\n","tags":["ç²¾é€‰"]},{"title":"mongodb å¢žåˆ æ”¹æŸ¥CURDåŸºæœ¬æ“ä½œæ€»ç»“","url":"/mongodb-curd-api/","content":"\n> åŸºäºŽ[mongodb v4.2](https://docs.mongodb.com/manual/introduction/)\n\n## æ’å…¥æ•°æ®\n\n### æ’å…¥ä¸€æ¡æ•°æ®\n`db.collection.insertOne()` æ’å…¥ä¸€ä¸ªæ–‡æ¡£åˆ°é›†åˆä¸­\n\n```\ntry {\n   db.products.insertOne( { item: \"card\", qty: 15 } );\n} catch (e) {\n   print (e);\n};\n// è¿”å›žå€¼ï¼š\n{\n   \"acknowledged\" : true,\n   \"insertedId\" : ObjectId(\"56fc40f9d735c28df206d078\")\n}\n```\n\n### æ’å…¥å¤šæ¡æ•°æ®\n`db.collection.insertMany()` åŒæ—¶æ’å…¥å¤šæ¡æ•°æ®åˆ°é›†åˆä¸­\n\n```\ntry {\n   db.products.insertMany( [\n      { item: \"card\", qty: 15 },\n      { item: \"envelope\", qty: 20 },\n      { item: \"stamps\" , qty: 30 }\n   ] );\n} catch (e) {\n   print (e);\n}\n// è¿”å›žå€¼ï¼š\n{\n   \"acknowledged\" : true,\n   \"insertedIds\" : [\n      ObjectId(\"562a94d381cb9f1cd6eb0e1a\"),\n      ObjectId(\"562a94d381cb9f1cd6eb0e1b\"),\n      ObjectId(\"562a94d381cb9f1cd6eb0e1c\")\n   ]\n}\n```\n\ninsert ç‰¹æ€§ï¼š\nå¦‚æžœå½“å‰é›†åˆä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªé›†åˆã€‚\n\n_id å±žæ€§ï¼š\nmongodbé‡Œé¢ï¼Œå¦‚æžœä½ ä¸æä¾›_idï¼Œmongodbä¼šé»˜è®¤åœ¨æ’å…¥æ–‡æ¡£çš„æ—¶å€™ä¸ºæ¯ä¸€ä¸ªæ–‡æ¡£åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„_idï¼Œä½œä¸ºä¸»é”®\n\n\n## æŸ¥æ‰¾æ•°æ®\nmongodbå¯ä»¥ä½¿ç”¨`find`æ–¹æ³•æŸ¥æ‰¾æ•°æ®\n\n### æ™®é€šæŸ¥è¯¢\n\n> æ¯ä¸ªæ–‡æ¡£æ’å…¥åˆ°é›†åˆä¸­å¦‚æžœä¸æä¾›ä¸€ä¸ª_idå­—æ®µï¼Œåˆ™mongodbä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªï¼Œå¹¶ä¸”åœ¨æŸ¥è¯¢è¯­å¥ä¸­é»˜è®¤è¿”å›žï¼Œè¿™é‡Œçœç•¥æ²¡æœ‰æ˜¾ç¤ºè¯¥å­—æ®µ\n\n```\n// ç¤ºä¾‹æ•°æ®\ndb.inventory.insertMany( [\n   { item: \"journal\", qty: 25, size: { h: 14, w: 21, uom: \"cm\" }, status: \"A\" },\n   { item: \"notebook\", qty: 50, size: { h: 8.5, w: 11, uom: \"in\" }, status: \"A\" },\n   { item: \"paper\", qty: 100, size: { h: 8.5, w: 11, uom: \"in\" }, status: \"D\" },\n   { item: \"planner\", qty: 75, size: { h: 22.85, w: 30, uom: \"cm\" }, status: \"D\" },\n   { item: \"postcard\", qty: 45, size: { h: 10, w: 15.25, uom: \"cm\" }, status: \"A\" }\n]);\n```\n\n```\n// æŸ¥æ‰¾ size ç­‰äºŽ { h: 14, w: 21, uom: \"cm\" } çš„æ•°æ®\ndb.inventory.find( { size: { h: 14, w: 21, uom: \"cm\" } } )\n// or æŸ¥æ‰¾ qty ç­‰äºŽ 25 çš„æ•°æ®\ndb.inventory.find({ qty: 25 })\n// or ä½¿ç”¨åµŒå¥—æŸ¥è¯¢ size çš„ uom ç­‰äºŽ in çš„æ•°æ®\ndb.inventory.find( { \"size.uom\": \"in\" } )\n// $lt å°äºŽ\ndb.inventory.find( { \"size.h\": { $lt: 15 } } )\n// å¤åˆæ¡ä»¶æŸ¥è¯¢ï¼ŒæŸ¥è¯¢ size.h å°äºŽ 15ï¼Œ å¹¶ä¸” size.uom ç­‰äºŽ inï¼Œå¹¶ä¸” status ç­‰äºŽ D çš„æ•°æ®\ndb.inventory.find( { \"size.h\": { $lt: 15 }, \"size.uom\": \"in\", status: \"D\" } )\n```\n\n### æŸ¥è¯¢æ•°ç»„\n```\n// ç¤ºä¾‹æ•°æ®\ndb.inventory.insertMany([\n   { item: \"journal\", qty: 25, tags: [\"blank\", \"red\"], dim_cm: [ 14, 21 ] },\n   { item: \"notebook\", qty: 50, tags: [\"red\", \"blank\"], dim_cm: [ 14, 21 ] },\n   { item: \"paper\", qty: 100, tags: [\"red\", \"blank\", \"plain\"], dim_cm: [ 14, 21 ] },\n   { item: \"planner\", qty: 75, tags: [\"blank\", \"red\"], dim_cm: [ 22.85, 30 ] },\n   { item: \"postcard\", qty: 45, tags: [\"blue\"], dim_cm: [ 10, 15.25 ] }\n]);\n```\n\n```\n// æŸ¥è¯¢ tags ç­‰äºŽ [\"red\", \"blank\"] çš„æ•°æ®\ndb.inventory.find( { tags: [\"red\", \"blank\"] } )\n\n// æˆ–è€…ä½ æƒ³æŸ¥è¯¢tagsåŒ…å« red blankï¼Œä¸ç®¡å®ƒçš„é¡ºåºï¼Œæˆ–è€…æ˜¯å¦è¿˜æœ‰å…¶ä»–å…ƒç´ ï¼Œä½ å¯ä»¥ä½¿ç”¨ `$all`\ndb.inventory.find( { tags: { $all: [\"red\", \"blank\"] } } )\n\n// æŸ¥è¯¢tags é‡Œé¢åŒ…å« redçš„æ•°æ®\ndb.inventory.find( { tags: \"red\" } )\n\n// æŸ¥è¯¢dim_cmé‡Œé¢æœ€å°‘æœ‰ä¸€ä¸ªå€¼å¤§äºŽ 25\ndb.inventory.find( { dim_cm: { $gt: 25 } } )\n\n/*\n** æŸ¥è¯¢dim_cmé‡Œé¢:\n** 1. æœ‰ä¸€ä¸ªå…ƒç´ åŒæ—¶æ»¡è¶³å¤§äºŽ15å¹¶ä¸”å°äºŽ20\n** 2. æœ‰ä¸¤ä¸ªåˆ†åˆ«æ»¡è¶³å°äºŽ15ä»¥åŠå¤§äºŽ20\n*/\ndb.inventory.find( { dim_cm: { $gt: 15, $lt: 20 } } )\n// æ‰€ä»¥ç»“æžœæ˜¯è¿”å›žè¿™å››æ¡ï¼š\n{ \"item\" : \"journal\", \"qty\" : 25, \"tags\" : [ \"blank\", \"red\" ], \"dim_cm\" : [ 14, 21 ] }\n{ \"item\" : \"notebook\", \"qty\" : 50, \"tags\" : [ \"red\", \"blank\" ], \"dim_cm\" : [ 14, 21 ] }\n{ \"item\" : \"paper\", \"qty\" : 100, \"tags\" : [ \"red\", \"blank\", \"plain\" ], \"dim_cm\" : [ 14, 21 ] }\n{ \"item\" : \"postcard\", \"qty\" : 45, \"tags\" : [ \"blue\" ], \"dim_cm\" : [ 10, 15.25 ] }\n\n// æŸ¥è¯¢dim_cmé‡Œé¢è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ åŒæ—¶æ»¡è¶³å¤§äºŽ22å¹¶ä¸”å°äºŽ30çš„æ•°æ®\ndb.inventory.find( { dim_cm: { $elemMatch: { $gt: 22, $lt: 30 } } } )\n\n// æŸ¥è¯¢dim_cmç¬¬äºŒä¸ªå…ƒç´ å¤§äºŽ25çš„æ•°æ®\ndb.inventory.find( { \"dim_cm.1\": { $gt: 25 } } )\n\n// æŸ¥è¯¢dim_cmçš„tagsæ•°ç»„é•¿åº¦ä¸º3çš„æ•°æ®\ndb.inventory.find( { \"tags\": { $size: 3 } } )\n```\n\n```\n// ç¤ºä¾‹æ•°æ®\ndb.inventory.insertMany( [\n   { item: \"journal\", instock: [ { warehouse: \"A\", qty: 5 }, { warehouse: \"C\", qty: 15 } ] },\n   { item: \"notebook\", instock: [ { warehouse: \"C\", qty: 5 } ] },\n   { item: \"paper\", instock: [ { warehouse: \"A\", qty: 60 }, { warehouse: \"B\", qty: 15 } ] },\n   { item: \"planner\", instock: [ { warehouse: \"A\", qty: 40 }, { warehouse: \"B\", qty: 5 } ] },\n   { item: \"postcard\", instock: [ { warehouse: \"B\", qty: 15 }, { warehouse: \"C\", qty: 35 } ] }\n]);\n\n// æŸ¥è¯¢instockæ•°ç»„é‡Œé¢æœ‰ä¸€ä¸ªå…ƒç´ ä¸º{ warehouse: \"A\", qty: 5 }çš„æ•°æ®ï¼Œå¿…é¡»warehouseç­‰äºŽAå¹¶ä¸”qtyç­‰äºŽ5ï¼ŒåŒ…æ‹¬é¡ºåºä¹Ÿå¿…é¡»ä¸€è‡´\ndb.inventory.find( { \"instock\": { warehouse: \"A\", qty: 5 } } )\n\n// æŸ¥è¯¢instockæ•°ç»„é‡Œé¢è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ çš„qtyå­—æ®µå€¼å°äºŽç­‰äºŽ20çš„æ•°ç»„\ndb.inventory.find( { 'instock.qty': { $lte: 20 } } )\n// ç»“æžœä¸ºï¼š\n{ \"item\" : \"journal\", \"instock\" : [ { \"warehouse\" : \"A\", \"qty\" : 5 }, { \"warehouse\" : \"C\", \"qty\" : 15 } ] }\n{ \"item\" : \"notebook\", \"instock\" : [ { \"warehouse\" : \"C\", \"qty\" : 5 } ] }\n{ \"item\" : \"paper\", \"instock\" : [ { \"warehouse\" : \"A\", \"qty\" : 60 }, { \"warehouse\" : \"B\", \"qty\" : 15 } ] }\n{ \"item\" : \"planner\", \"instock\" : [ { \"warehouse\" : \"A\", \"qty\" : 40 }, { \"warehouse\" : \"B\", \"qty\" : 5 } ] }\n{ \"item\" : \"postcard\", \"instock\" : [ { \"warehouse\" : \"B\", \"qty\" : 15 }, { \"warehouse\" : \"C\", \"qty\" : 35 } ] }\n\n// æŸ¥è¯¢instockæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„qtyå­—æ®µå°äºŽç­‰äºŽ20çš„æ•°æ®\ndb.inventory.find( { 'instock.0.qty': { $lte: 20 } } )\n\n// æŸ¥è¯¢instockæ•°ç»„é‡Œè‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ åŒæ—¶æ»¡è¶³qtyç­‰äºŽ5å¹¶ä¸”warehouseç­‰äºŽAçš„æ•°ç»„\ndb.inventory.find( { \"instock\": { $elemMatch: { qty: 5, warehouse: \"A\" } } } )\n\n// æŸ¥è¯¢instockæ•°ç»„é‡Œè‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ çš„qtyåŒæ—¶æ»¡è¶³å¤§äºŽ10å¹¶ä¸”å°äºŽç­‰äºŽ20\ndb.inventory.find( { \"instock\": { $elemMatch: { qty: { $gt: 10, $lte: 20 } } } } )\n\n// æŸ¥è¯¢instockæ•°ç»„é‡Œè‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ æ»¡è¶³å¤§äºŽ10æˆ–è€…å°äºŽç­‰äºŽ20\ndb.inventory.find( { \"instock.qty\": { $gt: 10,  $lte: 20 } } )\n// ç»“æžœä¸ºï¼š\n{ \"item\" : \"journal\", \"instock\" : [ { \"warehouse\" : \"A\", \"qty\" : 5 }, { \"warehouse\" : \"C\", \"qty\" : 15 } ] }\n{ \"item\" : \"paper\", \"instock\" : [ { \"warehouse\" : \"A\", \"qty\" : 60 }, { \"warehouse\" : \"B\", \"qty\" : 15 } ] }\n{ \"item\" : \"planner\", \"instock\" : [ { \"warehouse\" : \"A\", \"qty\" : 40 }, { \"warehouse\" : \"B\", \"qty\" : 5 } ] }\n{ \"item\" : \"postcard\", \"instock\" : [ { \"warehouse\" : \"B\", \"qty\" : 15 }, { \"warehouse\" : \"C\", \"qty\" : 35 } ] }\n\n// æŸ¥è¯¢instocké‡Œä»»æ„ä¸€ä¸ªå…ƒç´ çš„qtyç­‰äºŽ5å¹¶ä¸”ä»»æ„ä¸€ä¸ªå…ƒç´ çš„warehouseç­‰äºŽAçš„æ•°æ®\ndb.inventory.find( { \"instock.qty\": 5, \"instock.warehouse\": \"A\" } )\n// ç»“æžœä¸ºï¼š\n{ \"item\" : \"journal\", \"instock\" : [ { \"warehouse\" : \"A\", \"qty\" : 5 }, { \"warehouse\" : \"C\", \"qty\" : 15 } ] }\n{ \"item\" : \"planner\", \"instock\" : [ { \"warehouse\" : \"A\", \"qty\" : 40 }, { \"warehouse\" : \"B\", \"qty\" : 5 } ] }\n```\n\n### æŽ§åˆ¶æŸ¥è¯¢è¯­å¥è¾“å‡ºç»“æžœ\né»˜è®¤æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢è¯­å¥ä¼šè¿”å›žæ–‡æ¡£çš„æ‰€æœ‰å­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°æ¥è‡ªå®šä¹‰è¿”å›žæ–‡æ¡£é‡Œçš„å“ªäº›å­—æ®µ\n\nå…³äºŽç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæˆ‘ä»¬è¿™é‡Œå°±ä¸è¯¦ç»†è¯´æ˜Žäº†ï¼Œå¯å‚è€ƒä¸Šé¢\n\n```\n// ç¤ºä¾‹æ•°æ®\ndb.inventory.insertMany( [\n  { item: \"journal\", status: \"A\", size: { h: 14, w: 21, uom: \"cm\" }, instock: [ { warehouse: \"A\", qty: 5 } ] },\n  { item: \"notebook\", status: \"A\",  size: { h: 8.5, w: 11, uom: \"in\" }, instock: [ { warehouse: \"C\", qty: 5 } ] },\n  { item: \"paper\", status: \"D\", size: { h: 8.5, w: 11, uom: \"in\" }, instock: [ { warehouse: \"A\", qty: 60 } ] },\n  { item: \"planner\", status: \"D\", size: { h: 22.85, w: 30, uom: \"cm\" }, instock: [ { warehouse: \"A\", qty: 40 } ] },\n  { item: \"postcard\", status: \"A\", size: { h: 10, w: 15.25, uom: \"cm\" }, instock: [ { warehouse: \"B\", qty: 15 }, { warehouse: \"C\", qty: 35 } ] }\n]);\n\n// è¿”å›žæ‰€æœ‰æ–‡æ¡£çš„statusä¸ºçš„Açš„æ•°æ®çš„æ‰€æœ‰å­—æ®µ\ndb.inventory.find( { status: \"A\" } )\n\n// åªè¿”å›žæ–‡æ¡£çš„item, statuså­—æ®µä»¥åŠ_idï¼ˆé»˜è®¤æ˜¾ç¤ºï¼‰ï¼Œ1ä»£è¡¨æ˜¾ç¤ºï¼Œ0åˆ™æ˜¯ä¸æ˜¾ç¤º\ndb.inventory.find( { status: \"A\" }, { item: 1, status: 1 } )\n\n// å¦‚æžœæƒ³è¦_idä¹Ÿä¸è¿”å›žï¼Œå¯ä»¥è¿™æ ·ï¼š\ndb.inventory.find( { status: \"A\" }, { item: 1, status: 1, _id: 0 } )\n\n// ä¹Ÿå¯ä»¥å•ç‹¬ç»™æŸäº›ä¸æƒ³æ˜¾ç¤ºçš„å­—æ®µè®¾ä¸º0ï¼Œå…¶ä½™çš„æ­£å¸¸æ˜¾ç¤º\ndb.inventory.find( { status: \"A\" }, { status: 0, instock: 0 } )\n\n// è¿˜å¯ä»¥æŽ§åˆ¶åµŒå¥—å¯¹è±¡çš„å­—æ®µï¼Œä¸‹é¢è¯­å¥åªæ˜¾ç¤º_id, item, status, ä»¥åŠsizeçš„uomå­—æ®µ\ndb.inventory.find(\n   { status: \"A\" },\n   { item: 1, status: 1, \"size.uom\": 1 }\n)\n\n// ä¹Ÿå¯ä»¥åªè®¾ç½®ä¸æ˜¾ç¤ºæŸä¸ªåµŒå¥—å­—æ®µï¼Œä¸‹é¢è¯­å¥ä¸æ˜¾ç¤ºsizeçš„uomå±žæ€§ï¼Œå…¶ä½™æ­£å¸¸æ˜¾ç¤º\ndb.inventory.find(\n   { status: \"A\" },\n   { \"size.uom\": 0 }\n)\n\n// æŽ§åˆ¶æ•°ç»„ä¸­çš„å…ƒç´ æŸäº›å­—æ®µæ˜¯å¦æ˜¾ç¤º\ndb.inventory.find( { status: \"A\" }, { item: 1, status: 1, \"instock.qty\": 1 } )\n// ç»“æžœä¸ºï¼š\n{ \"_id\" : ObjectId(\"5e639b35940e1ec922af0d51\"), \"item\" : \"journal\", \"status\" : \"A\", \"instock\" : [ { \"qty\" : 5 } ] }\n{ \"_id\" : ObjectId(\"5e639b35940e1ec922af0d52\"), \"item\" : \"notebook\", \"status\" : \"A\", \"instock\" : [ { \"qty\" : 5 } ] }\n{ \"_id\" : ObjectId(\"5e639b35940e1ec922af0d55\"), \"item\" : \"postcard\", \"status\" : \"A\", \"instock\" : [ { \"qty\" : 15 }, { \"qty\" : 35 } ] }\n\n// å¯¹äºŽinstockï¼Œåªè¿”å›žæ•°ç»„çš„æœ€åŽä¸€ä¸ªå…ƒç´ \ndb.inventory.find( { status: \"A\" }, { item: 1, status: 1, instock: { $slice: -1 } } )\n\n// $elemMatch, $slice å’Œ $ æ˜¯å”¯ä¸€èƒ½æŽ§åˆ¶æ•°ç»„è¿”å›žå­—æ®µçš„æ–¹æ³•ï¼Œåœ¨è¿™é‡Œï¼Œä¸å¯ä»¥ä½¿ç”¨ç±»ä¼¼äºŽï¼š{ 'instock.0': 1 }è¿™ç§æŽ§åˆ¶åªæ˜¾ç¤ºinstockæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ã€‚\n```\n\n### å¦‚ä½•æ˜¾ç¤ºnullæˆ–è€…ç¼ºå¤±å­—æ®µ\n```\n// ç¤ºä¾‹æ•°æ®\ndb.inventory.insertMany([\n   { _id: 1, item: null },\n   { _id: 2 }\n])\n\n// itemè®¾ä¸ºnullæ—¶ï¼Œä¼šè¿”å›žnullï¼Œä»¥åŠä¸å­˜åœ¨è¯¥å­—æ®µçš„æ•°æ®ï¼Œæ¯”å¦‚ç¬¬äºŒæ¡æ•°æ®ä¸å­˜åœ¨itemå­—æ®µï¼Œä¹Ÿä¼šè¢«è¿”å›ž\ndb.inventory.find( { item: null } )\n// ç»“æžœä¸ºï¼š\n{ \"_id\" : 1, \"item\" : null }\n{ \"_id\" : 2 }\n\n// å¦‚æžœæƒ³è¦ç²¾ç¡®åŒ¹é…ï¼Œå¯ä»¥è¿™æ ·ï¼š\n// 10 æ˜¯Nullç±»åž‹çš„æ•°å€¼è¡¨ç¤ºï¼Œå…·ä½“å¯çœ‹ï¼šhttps://docs.mongodb.com/manual/reference/bson-types/ï¼Œé‡Œé¢æœ‰å„ç§ç±»åž‹å¯¹åº”çš„æ•°å€¼\ndb.inventory.find( { item : { $type: 10 } } )\n// ç»“æžœä¸ºï¼š\n{ \"_id\" : 1, \"item\" : null }\n\n// è¿˜å¯ä»¥ä½¿ç”¨$existsæ“ä½œç¬¦ï¼Œç”¨äºŽæ ‡æ˜Žå­—æ®µæ˜¯å¦å­˜åœ¨\ndb.inventory.find( { item : { $exists: false } } )\n// ç»“æžœä¸ºï¼š\n{ \"_id\" : 2 }\n// å¦‚æžœ$existsè®¾ä¸ºtrueï¼Œåˆ™è¿”å›žï¼š\n{ \"_id\" : 1, \"item\" : null }\n```\n\n### ä½¿ç”¨æ¸¸æ ‡æ“ä½œæ•°æ®\n\n```\n// å¯ä»¥å°†findçš„è¿”å›žå€¼ä¿å­˜åˆ°ä¸€ä¸ªå˜é‡ä¸­\nvar myCursor = db.users.find( { type: 2 } );\n\nwhile (myCursor.hasNext()) {\n   print(tojson(myCursor.next()));\n}\n\n// å¯ä»¥ä½¿ç”¨printjsonä»£æ›¿print(tojson()\nvar myCursor = db.users.find( { type: 2 } );\n\nwhile (myCursor.hasNext()) {\n   printjson(myCursor.next());\n}\n\n// è¿˜å¯ä»¥ä½¿ç”¨æ¸¸æ ‡çš„forEachæ–¹æ³•\nvar myCursor =  db.users.find( { type: 2 } );\n\nmyCursor.forEach(printjson);\n```\n\næ¸¸æ ‡å¯¹è±¡çš„å…·ä½“æœ‰å“ªäº›æ–¹æ³•å¯ä»¥çœ‹ï¼šhttps://docs.mongodb.com/manual/reference/method/#js-query-cursor-methods\n\n\n## æ›´æ–°æ•°æ®\n\næ›´æ–°æ•°æ®ä¸»è¦ä½¿ç”¨ï¼š\n* `db.collection.updateOne(<filter>, <update>, <options>)`\n* `db.collection.updateMany(<filter>, <update>, <options>)`\n* `db.collection.replaceOne(<filter>, <update>, <options>)`\n\nmongodbæä¾›äº†æ›´æ–°æ“ä½œç¬¦åŽ»æ›´æ–°æ•°æ®ï¼Œæ¯”å¦‚$setï¼Œå…·ä½“å¯çœ‹æ–‡æ¡£ï¼šhttps://docs.mongodb.com/manual/reference/operator/update/\n\næœ‰ä¸€äº›æ“ä½œç¬¦ï¼Œæ¯”å¦‚$setåœ¨å­—æ®µä¸å­˜åœ¨æ—¶ä¼šè‡ªåŠ¨æ·»åŠ è¯¥å­—æ®µ\n\n```\n// ç¤ºä¾‹æ•°æ®\ndb.inventory.insertMany( [\n   { item: \"canvas\", qty: 100, size: { h: 28, w: 35.5, uom: \"cm\" }, status: \"A\" },\n   { item: \"journal\", qty: 25, size: { h: 14, w: 21, uom: \"cm\" }, status: \"A\" },\n   { item: \"mat\", qty: 85, size: { h: 27.9, w: 35.5, uom: \"cm\" }, status: \"A\" },\n   { item: \"mousepad\", qty: 25, size: { h: 19, w: 22.85, uom: \"cm\" }, status: \"P\" },\n   { item: \"notebook\", qty: 50, size: { h: 8.5, w: 11, uom: \"in\" }, status: \"P\" },\n   { item: \"paper\", qty: 100, size: { h: 8.5, w: 11, uom: \"in\" }, status: \"D\" },\n   { item: \"planner\", qty: 75, size: { h: 22.85, w: 30, uom: \"cm\" }, status: \"D\" },\n   { item: \"postcard\", qty: 45, size: { h: 10, w: 15.25, uom: \"cm\" }, status: \"A\" },\n   { item: \"sketchbook\", qty: 80, size: { h: 14, w: 21, uom: \"cm\" }, status: \"A\" },\n   { item: \"sketch pad\", qty: 95, size: { h: 22.85, w: 30.5, uom: \"cm\" }, status: \"A\" }\n] );\n\n// ç¬¬ä¸€ä¸ªå‚æ•°è¿™é‡Œä¹Ÿä¸ç»§ç»­è¯´æ˜Žäº†ï¼Œè¯¦ç»†å¯ä»¥çœ‹ä¸Šé¢æŸ¥è¯¢éƒ¨åˆ†\n\n/*\n** 1. æ›´æ–°sizeçš„uomå­—æ®µå€¼ä¸ºcm\n** 2. æ›´æ–°statuså­—æ®µå€¼ä¸ºP\n** 3. æ›´æ–°lastModifiedä¸ºå½“å‰æ—¶é—´ï¼Œå¦‚æžœlastModifiedå­—æ®µä¸å­˜åœ¨ï¼Œä¼šæ·»åŠ è¯¥å­—æ®µ\n*/\ndb.inventory.updateOne(\n   { item: \"paper\" },\n   {\n     $set: { \"size.uom\": \"cm\", status: \"P\" },\n     $currentDate: { lastModified: true }\n   }\n)\n// æ›´æ–°åŽçš„æ•°æ®ï¼š\n{ \"_id\" : ObjectId(\"5e6466a4940e1ec922af0d5b\"), \"item\" : \"paper\", \"qty\" : 100, \"size\" : { \"h\" : 8.5, \"w\" : 11, \"uom\" : \"cm\" }, \"status\" : \"P\", \"lastModified\" : ISODate(\"2020-03-08T03:29:48.653Z\") }\n\n// æ›´æ–°å¤šæ¡æ•°æ®\ndb.inventory.updateMany(\n   { \"qty\": { $lt: 50 } },\n   {\n     $set: { \"size.uom\": \"in\", status: \"P\" },\n     $currentDate: { lastModified: true }\n   }\n)\n\n/*\n** æ›¿æ¢æ•°æ®\n** 1. _idå­—æ®µä¸èƒ½è¢«æ›¿æ¢ï¼Œå¦‚æžœæ–°æ•°æ®é‡ŒåŒ…å«_idå­—æ®µï¼Œåˆ™å€¼å¿…é¡»å’ŒåŽŸæ•°æ®çš„ä¸€è‡´\n** 2. æ–°æ•°æ®ä¸èƒ½åŒ…å«æ“ä½œç¬¦\n*/\ndb.inventory.replaceOne(\n   { item: \"paper\" },\n   { item: \"paper\", instock: [ { warehouse: \"A\", qty: 60 }, { warehouse: \"B\", qty: 40 } ] }\n)\n```\n\n`upsert`å±žæ€§\nå¦‚æžœ`updateOne()`, `updateMany()` æˆ–è€… `replaceOne()`åŒ…å«`upsert: true`å‚æ•°æ—¶ï¼Œå¦‚æžœè¿™ä¸‰ä¸ªæ–¹æ³•æ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•æ–‡æ¡£ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ’å…¥åˆ°é›†åˆä¸­ï¼Œå¦‚æžœåŒ¹é…åˆ°äº†ï¼Œåˆ™ä¼šä¿®æ”¹æˆ–è€…æ›¿æ¢åŽŸæ–‡æ¡£ã€‚\n\n### ä½¿ç”¨èšåˆæ›´æ–°æ•°æ®\nåœ¨èšåˆä¸­å¯ä»¥ä½¿ç”¨ä¸€ä¸‹æ›´æ–°æ“ä½œç¬¦ï¼š\n* $addFields\n* $set\n* $project\n* $unset\n* $replaceRoot\n* $replaceWith\n\n```\n// ç¤ºä¾‹æ•°æ®\ndb.students.insertMany([\n   { _id: 1, test1: 95, test2: 92, test3: 90, modified: new Date(\"01/05/2020\") },\n   { _id: 2, test1: 98, test2: 100, test3: 102, modified: new Date(\"01/05/2020\") },\n   { _id: 3, test1: 95, test2: 110, modified: new Date(\"01/04/2020\") }\n])\n\n/*\n** updateOneæ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æ˜¯ä»¥æ•°ç»„ï¼Œé‡Œé¢å¯ä»¥æœ‰å¤šç§æ“ä½œ\n** 1. æ–°å¢žä¸€ä¸ªtest3å­—æ®µå¹¶è®¾ä¸º98\n** 2. ä¿®æ”¹modifiedæ•°æ®å€¼ä¸ºå½“å‰æ—¶é—´\n*/\ndb.students.updateOne( { _id: 3 }, [ { $set: { \"test3\": 98, modified: \"$$NOW\"} } ] )\n\n\n// ç¤ºä¾‹æ•°æ®\ndb.students2.insertMany([\n   { \"_id\" : 1, quiz1: 8, test2: 100, quiz2: 9, modified: new Date(\"01/05/2020\") },\n   { \"_id\" : 2, quiz2: 5, test1: 80, test2: 89, modified: new Date(\"01/05/2020\") },\n])\n\n/*\n** åŒæ—¶æ‰§è¡Œå¤šä¸ªæ“ä½œï¼Œé¦–å…ˆåºåˆ—åŒ–æ‰€æœ‰æ–‡æ¡£ï¼ˆé›†åˆä¸­çš„æ¯ä¸ªæ–‡æ¡£å­—æ®µå¯èƒ½å¹¶ä¸ä¸€è‡´ï¼‰ï¼Œå†æ›´æ–°modifiedå­—æ®µ\n** 1. åºåˆ—åŒ–æ–‡æ¡£ï¼Œå¦‚æžœæ–‡æ¡£ä¸­æ²¡æœ‰ quiz1 or quiz2 or test1 or test2 å°±ç»™å®ƒæ·»åŠ è¯¥å­—æ®µï¼Œå¹¶å°†å€¼è®¾ä¸º0ã€‚è¯¥æ“ä½œå¯ä»¥ç”¨äºŽå°†é›†åˆä¸­æ‰€æœ‰æ–‡æ¡£çš„å­—æ®µä¿æŒä¸€è‡´\n** 2. æ›´æ–°æ–‡æ¡£çš„modifiedä¸ºå½“å‰æ—¶é—´\n*/\ndb.students2.updateMany( {},\n  [\n    { $replaceRoot: { newRoot:\n       { $mergeObjects: [ { quiz1: 0, quiz2: 0, test1: 0, test2: 0 }, \"$$ROOT\" ] }\n    } },\n    { $set: { modified: \"$$NOW\"}  }\n  ]\n)\n// ç»“æžœä¸ºï¼š\n{ \"_id\" : 1, quiz1: 8, quiz2: 9, test1: 0, test2: 100, modified: new Date(\"01/05/2020\") }\n{ \"_id\" : 2, quiz1: 0, quiz2: 5, test1: 80, test2: 89, modified: new Date(\"01/05/2020\") }\n\n// ç¤ºä¾‹æ•°æ®\ndb.students3.insert([\n   { \"_id\" : 1, \"tests\" : [ 95, 92, 90 ], \"modified\" : ISODate(\"2019-01-01T00:00:00Z\") },\n   { \"_id\" : 2, \"tests\" : [ 94, 88, 90 ], \"modified\" : ISODate(\"2019-01-01T00:00:00Z\") },\n   { \"_id\" : 3, \"tests\" : [ 70, 75, 82 ], \"modified\" : ISODate(\"2019-01-01T00:00:00Z\") }\n]);\n\n/*\n** è®¾ç½®average, gradeå­—æ®µå€¼ï¼Œå¹¶ä¸”ä¿®æ”¹modifiedå€¼\n** 1.1 è®¾ç½®averageå­—æ®µï¼ˆå¦‚æžœæ²¡æœ‰ä¼šæ–°å¢žï¼‰ä¸ºtestsæ•°ç»„çš„å¹³å‡å€¼ï¼Œ0ä»£è¡¨ä¿ç•™0ä¸ªå°æ•°ï¼Œå³å–è¯ï¼Œå…·ä½“å¯çœ‹$truncæ“ä½œç¬¦æ–‡æ¡£https://docs.mongodb.com/manual/reference/operator/aggregation/trunc/\n** 1.2 è®¾ç½®modifedå­—æ®µä¸ºå½“å‰æ—¶é—´\n** 1 è®¾ç½®gradeå­—æ®µï¼Œæ ¹æ®averageçš„å€¼åˆ†åˆ«è®¾ä¸ºA,B,C,D,F\n*/\ndb.students3.updateMany(\n   { },\n   [\n     { $set: { average : { $trunc: [ { $avg: \"$tests\" }, 0 ] }, modified: \"$$NOW\" } },\n     { $set: { grade: { $switch: {\n                           branches: [\n                               { case: { $gte: [ \"$average\", 90 ] }, then: \"A\" },\n                               { case: { $gte: [ \"$average\", 80 ] }, then: \"B\" },\n                               { case: { $gte: [ \"$average\", 70 ] }, then: \"C\" },\n                               { case: { $gte: [ \"$average\", 60 ] }, then: \"D\" }\n                           ],\n                           default: \"F\"\n     } } } }\n   ]\n)\n// ç»“æžœä¸ºï¼š\n{ \"_id\" : 1, \"tests\" : [ 95, 92, 90 ], \"average\": 92, \"grade\": \"A\", \"modified\" : ISODate(\"2019-01-01T00:00:00Z\") }\n{ \"_id\" : 2, \"tests\" : [ 94, 88, 90 ], \"average\": 90, \"grade\": \"A\", \"modified\" : ISODate(\"2019-01-01T00:00:00Z\") }\n{ \"_id\" : 3, \"tests\" : [ 70, 75, 82 ], \"average\": 75, \"grade\": \"C\", \"modified\" : ISODate(\"2019-01-01T00:00:00Z\") }\n\n// ç¤ºä¾‹æ•°æ®\ndb.students4.insertMany([\n  { \"_id\" : 1, \"quizzes\" : [ 4, 6, 7 ] },\n  { \"_id\" : 2, \"quizzes\" : [ 5 ] },\n  { \"_id\" : 3, \"quizzes\" : [ 10, 10, 10 ] }\n])\n\n// åœ¨quizzesåŽè¿½åŠ [8, 6]\ndb.students4.updateOne( { _id: 2 },\n  [ { $set: { quizzes: { $concatArrays: [ \"$quizzes\", [ 8, 6 ]  ] } } } ]\n)\n// ç»“æžœä¸º\n{ \"_id\" : 2, \"quizzes\" : [ 5, 8, 6 ] }\n\n// ç¤ºä¾‹æ•°æ®\ndb.temperatures.insertMany([\n  { \"_id\" : 1, \"date\" : ISODate(\"2019-06-23\"), \"tempsC\" : [ 4, 12, 17 ] },\n  { \"_id\" : 2, \"date\" : ISODate(\"2019-07-07\"), \"tempsC\" : [ 14, 24, 11 ] },\n  { \"_id\" : 3, \"date\" : ISODate(\"2019-10-30\"), \"tempsC\" : [ 18, 6, 8 ] }\n])\n\n/*\n** 1. æ–°å¢žtempsFå­—æ®µ\n** 2. å°†tempsCæ•°ç»„é‡Œçš„æ‘„æ°åº¦è½¬æ¢ä¸ºåŽæ°åº¦ f = c * 1.8 + 32\n*/\ndb.temperatures.updateMany( { },\n  [\n    { $addFields: { \"tempsF\": {\n          $map: {\n             input: \"$tempsC\",\n             as: \"celsius\",\n             in: { $add: [ { $multiply: [\"$$celsius\", 9/5 ] }, 32 ] }\n          }\n    } } }\n  ]\n)\n// ç»“æžœä¸ºï¼š\n{ \"_id\" : 1, \"date\" : ISODate(\"2019-06-23\"), \"tempsC\" : [ 4, 12, 17 ], \"tempsF\": [39.2, 53.6, 62.6] }\n{ \"_id\" : 2, \"date\" : ISODate(\"2019-07-07\"), \"tempsC\" : [ 14, 24, 11 ], \"tempsF\": [57.2, 75.2, 51.8] }\n{ \"_id\" : 3, \"date\" : ISODate(\"2019-10-30\"), \"tempsC\" : [ 18, 6, 8 ], \"tempsF\": [64.4, 42.8, 46.4] }\n```\n\n### updateæ–¹æ³•\nå…·ä½“å¯çœ‹æ–‡æ¡£ï¼šhttps://docs.mongodb.com/manual/reference/update-methods/\n\n* `db.collection.updateOne()`\n* `db.collection.updateMany()`\n* `db.collection.replaceOne()`\n* `db.collection.update()`\n\n* `db.collection.findOneAndReplace()`\n* `db.collection.findOneAndUpdate()`\n* `db.collection.findAndModify()`\n* `db.collection.save()`\n* `db.collection.bulkWrite()`\n\n## åˆ é™¤æ•°æ®\nå¯ä»¥ä½¿ç”¨ä¸‹é¢æ–¹æ³•åˆ é™¤æ•°æ®\n\n* `db.collection.deleteMany()`\n* `db.collection.deleteOne()`\n\n```\n// ç¤ºä¾‹æ•°æ®\ndb.inventory.insertMany( [\n   { item: \"journal\", qty: 25, size: { h: 14, w: 21, uom: \"cm\" }, status: \"A\" },\n   { item: \"notebook\", qty: 50, size: { h: 8.5, w: 11, uom: \"in\" }, status: \"P\" },\n   { item: \"paper\", qty: 100, size: { h: 8.5, w: 11, uom: \"in\" }, status: \"D\" },\n   { item: \"planner\", qty: 75, size: { h: 22.85, w: 30, uom: \"cm\" }, status: \"D\" },\n   { item: \"postcard\", qty: 45, size: { h: 10, w: 15.25, uom: \"cm\" }, status: \"A\" },\n] );\n\n// åˆ é™¤inventoryæ‰€æœ‰æ•°æ®\ndb.inventory.deleteMany({})\n\n// åˆ é™¤æ‰€æœ‰åŒ¹é…çš„æ•°æ®\ndb.inventory.deleteMany({ status : \"A\" })\n\n// åˆ é™¤åŒ¹é…åˆ°çš„ç¬¬ä¸€æ¡æ•°æ®\n//db.inventory.deleteOne( { status: \"D\" } )\n```\n\nåˆ é™¤æ“ä½œä¸ä¼šåˆ é™¤ç´¢å¼•ï¼Œå³ä½¿åˆ æŽ‰æ‰€æœ‰æ–‡æ¡£\n","tags":["mongodb"]}]